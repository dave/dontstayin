// LatestChat.js
(function($){
Type.registerNamespace('Js.Controls.LatestChat');Js.Controls.LatestChat.Service=function(){}
Js.Controls.LatestChat.Service.getThreads=function(objectType,objectK,threadsCount,hasGroupObjectFilter,success,failure,userContext,timeout){var $0={};$0['objectType']=objectType;$0['objectK']=objectK;$0['threadsCount']=threadsCount;$0['hasGroupObjectFilter']=hasGroupObjectFilter;var $1=Js.Library.WebServiceHelper.options('GetThreads','/WebServices/Controls/LatestChat/Service.asmx',$0,failure,userContext,timeout);$1.success=function($p1_0,$p1_1,$p1_2){
success(($p1_0)['d'],userContext,'GetThreads');};$.ajax($1);}
Js.Controls.LatestChat.ThreadStub=function(){}
Js.Controls.LatestChat.ThreadStub.prototype={k:0,watchingHtml:null,watchingScript:null,favouriteHtml:null,favouriteScript:null,threadUrlSimple:null,iconsHtml:null,commentHtmlStart:null,rollover:null,subjectSafe:null,commentHtmlEnd:null,pagesHtml:null,authorHtml:null,repliesHtml:null}
Js.Controls.LatestChat.Controller=function(view){this.$0=view;this.$1=new Js.Controls.LatestChat.LatestChat$0(parseInt(view.get_uiThreadsCount().value),Boolean.parse(view.get_uiHasGroupObjectFilter().value),parseInt(view.get_uiObjectType().value));this.$1.$5=ss.Delegate.create(this,this.$3);}
Js.Controls.LatestChat.Controller.$7=function($p0){var $0=document.createElement('tr');$0.style.verticalAlign='top';$0.appendChild(Js.Controls.LatestChat.Controller.$9($p0.watchingHtml,'dataGridThreadTitlesTight',null));$0.appendChild(Js.Controls.LatestChat.Controller.$9($p0.favouriteHtml,'dataGridThreadTitlesTight',null));$0.appendChild(Js.Controls.LatestChat.Controller.$9($p0.iconsHtml+$p0.commentHtmlStart+'<a href="'+$p0.threadUrlSimple+'" '+$p0.rollover+'>'+$p0.subjectSafe+'</a>'+$p0.commentHtmlEnd+$p0.pagesHtml,'dataGridThreadTitles',null));$0.childNodes[2].style.width='100%';$0.appendChild(Js.Controls.LatestChat.Controller.$9('<small>'+$p0.authorHtml+'</small>','dataGridThread','3px'));$0.appendChild(Js.Controls.LatestChat.Controller.$9('<small>'+$p0.repliesHtml+'</small>','dataGridThread','3px'));return $0;}
Js.Controls.LatestChat.Controller.$8=function(){var $0=document.createElement('tr');$0.className='dataGridHeader';var $1=document.createElement('td');$1.colSpan=3;$0.appendChild($1);$0.appendChild(Js.Controls.LatestChat.Controller.$9('Author',null,null));$0.appendChild(Js.Controls.LatestChat.Controller.$9('Replies&nbsp;/&nbsp;last',null,null));return $0;}
Js.Controls.LatestChat.Controller.$9=function($p0,$p1,$p2){var $0=document.createElement('td');$0.innerHTML=$p0;if($p2!=null){$0.style.padding=$p2;}if($p1!=null){$0.className=$p1;}return $0;}
Js.Controls.LatestChat.Controller.prototype={$0:null,$1:null,get_$2:function(){try{return parseInt(this.$0.get_uiObjectK().value);}catch($0){return 0;}},set_$2:function($p0){this.$0.get_uiObjectK().value=$p0.toString();return $p0;},hide:function(){this.$0.get_holder().style.display='none';},show:function(objectK){this.set_$2(objectK);this.$1.$7(this.get_$2());},update:function(o,e){this.$1.$B(this.get_$2());},$3:function($p0,$p1){this.$4();},$4:function(){var $0=this.$1.get_$6();if($0.length>0){this.$5(this.$0.get_threadsPanel());this.$0.get_threadsPanel().appendChild(this.$6($0));for(var $1=0;$1<$0.length;$1++){eval($0[$1].watchingScript);eval($0[$1].favouriteScript);}this.$0.get_holder().style.display='';this.$0.get_threadsPanel().style.display='';}},$5:function($p0){$p0.innerHTML='';},$6:function($p0){var $0=document.createElement('table');$0.style.border='0px';$0.style.width='100%';$0.style.borderCollapse='collapse';var $1=document.createElement('tbody');$0.appendChild($1);$1.appendChild(Js.Controls.LatestChat.Controller.$8());for(var $2=0;$2<$p0.length;$2++){$1.appendChild(Js.Controls.LatestChat.Controller.$7($p0[$2]));}return $0;}}
Js.Controls.LatestChat.View=function(clientId){this.clientId=clientId;}
Js.Controls.LatestChat.View.prototype={clientId:null,get_holder:function(){if(this.$0==null){this.$0=document.getElementById(this.clientId+'_Holder');}return this.$0;},$0:null,get_holderJ:function(){if(this.$1==null){this.$1=$('#'+this.clientId+'_Holder');}return this.$1;},$1:null,get_header:function(){if(this.$2==null){this.$2=document.getElementById(this.clientId+'_Header');}return this.$2;},$2:null,get_headerJ:function(){if(this.$3==null){this.$3=$('#'+this.clientId+'_Header');}return this.$3;},$3:null,get_innerHolder:function(){if(this.$4==null){this.$4=document.getElementById(this.clientId+'_InnerHolder');}return this.$4;},$4:null,get_innerHolderJ:function(){if(this.$5==null){this.$5=$('#'+this.clientId+'_InnerHolder');}return this.$5;},$5:null,get_threadsNoPermissionPanel:function(){if(this.$6==null){this.$6=document.getElementById(this.clientId+'_ThreadsNoPermissionPanel');}return this.$6;},$6:null,get_threadsNoPermissionPanelJ:function(){if(this.$7==null){this.$7=$('#'+this.clientId+'_ThreadsNoPermissionPanel');}return this.$7;},$7:null,get_threadsNoPermissionJoinAnchor:function(){if(this.$8==null){this.$8=document.getElementById(this.clientId+'_ThreadsNoPermissionJoinAnchor');}return this.$8;},$8:null,get_threadsNoPermissionJoinAnchorJ:function(){if(this.$9==null){this.$9=$('#'+this.clientId+'_ThreadsNoPermissionJoinAnchor');}return this.$9;},$9:null,get_threadsPanel:function(){if(this.$A==null){this.$A=document.getElementById(this.clientId+'_ThreadsPanel');}return this.$A;},$A:null,get_threadsPanelJ:function(){if(this.$B==null){this.$B=$('#'+this.clientId+'_ThreadsPanel');}return this.$B;},$B:null,get_brandChatControlsP:function(){if(this.$C==null){this.$C=document.getElementById(this.clientId+'_BrandChatControlsP');}return this.$C;},$C:null,get_brandChatControlsPJ:function(){if(this.$D==null){this.$D=$('#'+this.clientId+'_BrandChatControlsP');}return this.$D;},$D:null,get_showGroupChatEnabled:function(){if(this.$E==null){this.$E=document.getElementById(this.clientId+'_ShowGroupChatEnabled');}return this.$E;},$E:null,get_showGroupChatEnabledJ:function(){if(this.$F==null){this.$F=$('#'+this.clientId+'_ShowGroupChatEnabled');}return this.$F;},$F:null,get_showGroupChatLinkButton:function(){if(this.$10==null){this.$10=document.getElementById(this.clientId+'_ShowGroupChatLinkButton');}return this.$10;},$10:null,get_showGroupChatLinkButtonJ:function(){if(this.$11==null){this.$11=$('#'+this.clientId+'_ShowGroupChatLinkButton');}return this.$11;},$11:null,get_showBrandChatLinkButton:function(){if(this.$12==null){this.$12=document.getElementById(this.clientId+'_ShowBrandChatLinkButton');}return this.$12;},$12:null,get_showBrandChatLinkButtonJ:function(){if(this.$13==null){this.$13=$('#'+this.clientId+'_ShowBrandChatLinkButton');}return this.$13;},$13:null,get_showBrandChatEnabled:function(){if(this.$14==null){this.$14=document.getElementById(this.clientId+'_ShowBrandChatEnabled');}return this.$14;},$14:null,get_showBrandChatEnabledJ:function(){if(this.$15==null){this.$15=$('#'+this.clientId+'_ShowBrandChatEnabled');}return this.$15;},$15:null,get_inlineScript1:function(){if(this.$16==null){this.$16=document.getElementById(this.clientId+'_InlineScript1');}return this.$16;},$16:null,get_inlineScript1J:function(){if(this.$17==null){this.$17=$('#'+this.clientId+'_InlineScript1');}return this.$17;},$17:null,get_threadsDataGrid:function(){if(this.$18==null){this.$18=document.getElementById(this.clientId+'_ThreadsDataGrid');}return this.$18;},$18:null,get_threadsDataGridJ:function(){if(this.$19==null){this.$19=$('#'+this.clientId+'_ThreadsDataGrid');}return this.$19;},$19:null,get_commentsFooter:function(){if(this.$1A==null){this.$1A=document.getElementById(this.clientId+'_CommentsFooter');}return this.$1A;},$1A:null,get_commentsFooterJ:function(){if(this.$1B==null){this.$1B=$('#'+this.clientId+'_CommentsFooter');}return this.$1B;},$1B:null,get_moreThreadsAnchor:function(){if(this.$1C==null){this.$1C=document.getElementById(this.clientId+'_MoreThreadsAnchor');}return this.$1C;},$1C:null,get_moreThreadsAnchorJ:function(){if(this.$1D==null){this.$1D=$('#'+this.clientId+'_MoreThreadsAnchor');}return this.$1D;},$1D:null,get_moreThreadsCountLabel:function(){if(this.$1E==null){this.$1E=document.getElementById(this.clientId+'_MoreThreadsCountLabel');}return this.$1E;},$1E:null,get_moreThreadsCountLabelJ:function(){if(this.$1F==null){this.$1F=$('#'+this.clientId+'_MoreThreadsCountLabel');}return this.$1F;},$1F:null,get_uiObjectType:function(){if(this.$20==null){this.$20=document.getElementById(this.clientId+'_uiObjectType');}return this.$20;},$20:null,get_uiObjectTypeJ:function(){if(this.$21==null){this.$21=$('#'+this.clientId+'_uiObjectType');}return this.$21;},$21:null,get_uiObjectK:function(){if(this.$22==null){this.$22=document.getElementById(this.clientId+'_uiObjectK');}return this.$22;},$22:null,get_uiObjectKJ:function(){if(this.$23==null){this.$23=$('#'+this.clientId+'_uiObjectK');}return this.$23;},$23:null,get_uiThreadsCount:function(){if(this.$24==null){this.$24=document.getElementById(this.clientId+'_uiThreadsCount');}return this.$24;},$24:null,get_uiThreadsCountJ:function(){if(this.$25==null){this.$25=$('#'+this.clientId+'_uiThreadsCount');}return this.$25;},$25:null,get_uiHasGroupObjectFilter:function(){if(this.$26==null){this.$26=document.getElementById(this.clientId+'_uiHasGroupObjectFilter');}return this.$26;},$26:null,get_uiHasGroupObjectFilterJ:function(){if(this.$27==null){this.$27=$('#'+this.clientId+'_uiHasGroupObjectFilter');}return this.$27;},$27:null,get_externalHeader:function(){if(this.$28==null){this.$28=document.getElementById(this.clientId+'_ExternalHeader');}return this.$28;},$28:null,get_externalHeaderJ:function(){if(this.$29==null){this.$29=$('#'+this.clientId+'_ExternalHeader');}return this.$29;},$29:null,get_externalHolder:function(){if(this.$2A==null){this.$2A=document.getElementById(this.clientId+'_ExternalHolder');}return this.$2A;},$2A:null,get_externalHolderJ:function(){if(this.$2B==null){this.$2B=$('#'+this.clientId+'_ExternalHolder');}return this.$2B;},$2B:null}
Js.Controls.LatestChat.LatestChat$0=function(threadsCount,hasGroupObjectFilter,objectType){this.$0=threadsCount;this.$1=hasGroupObjectFilter;this.$2=objectType;this.$3=[];}
Js.Controls.LatestChat.LatestChat$0.prototype={$0:0,$1:false,$2:0,$3:null,$4:0,$5:null,get_$6:function(){return this.$3[this.$4];},set_$6:function($p0){this.$3[this.$4]=$p0;return $p0;},$7:function($p0){this.$4=$p0;if(this.get_$6()!=null){this.$A();}else{this.$8();}},$8:function(){Js.Controls.LatestChat.Service.getThreads(this.$2,this.$4,this.$0,this.$1,ss.Delegate.create(this,this.$9),Js.Library.Trace.webServiceFailure,null,-1);},$9:function($p0,$p1,$p2){this.set_$6($p0);this.$A();},$A:function(){if(this.$5!=null){this.$5(this,ss.EventArgs.Empty);}},$B:function($p0){this.$4=$p0;this.$8();}}
Js.Controls.LatestChat.Service.registerClass('Js.Controls.LatestChat.Service');Js.Controls.LatestChat.ThreadStub.registerClass('Js.Controls.LatestChat.ThreadStub');Js.Controls.LatestChat.Controller.registerClass('Js.Controls.LatestChat.Controller');Js.Controls.LatestChat.View.registerClass('Js.Controls.LatestChat.View');Js.Controls.LatestChat.LatestChat$0.registerClass('Js.Controls.LatestChat.LatestChat$0');})(jQuery);// This script was generated using Script# v0.7.4.0
