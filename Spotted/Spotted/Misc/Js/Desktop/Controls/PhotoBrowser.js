// PhotoBrowser.js
(function($){
Type.registerNamespace('Js.Controls.PhotoBrowser');Js.Controls.PhotoBrowser.Controller=function(view){Js.Controls.PhotoBrowser.Controller.initializeBase(this,[[view.get_uiPhotoRepeaterContainerJ()]]);this.$1_0=view;this.$1_3=parseInt(view.get_uiIconsPerRow().value);this.$1_4=parseInt(view.get_uiIconSize().value);this.$1_2=parseInt(view.get_uiIconsPerPage().value);view.get_uiPaginationControl().onPageChanged=ss.Delegate.create(this,this.$1_E);this.$1_1=new Array(this.$1_2);for(var $0=0;$0<this.$1_1.length;$0++){this.$1_1[$0]=document.getElementById(view.get_uiTableCellsPrefix().value+$0);}for(var $1=0;$1<this.$1_1.length;$1++){$(this.$1_1[$1].childNodes[0]).click(ss.Delegate.create(this,this.$1_8));}this.set_selectedIndex(this.$1_9());this.onPhotoNextClick=ss.Delegate.create(this,this.moveToNextPhoto);this.onPhotoPrevClick=ss.Delegate.create(this,this.moveToPreviousPhoto);this.onPhotoUpClick=ss.Delegate.create(this,this.moveToPhotoAbove);this.onPhotoDownClick=ss.Delegate.create(this,this.moveToPhotoBelow);this.onArrowKeyPress=ss.Delegate.create(this,this.$1_7);}
Js.Controls.PhotoBrowser.Controller.prototype={$1_0:null,$1_1:null,$1_2:0,$1_3:0,$1_4:0,$1_5:null,get_photoProvider:function(){return this.$1_5;},set_photoProvider:function(value){this.$1_5=value;return value;},get_paginationControl:function(){return this.$1_0.get_uiPaginationControl();},$1_6:0,get_selectedIndex:function(){return this.$1_6;},set_selectedIndex:function(value){this.$1_6=value;return value;},onChangePhoto:null,onChangePhotoSet:null,$1_7:function($p0,$p1){},$1_8:function($p0){$p0.preventDefault();for(var $0=0;$0<this.$1_1.length;$0++){if(this.$1_1[$0]===$p0.target.parentNode.parentNode){this.set_selectedIndex($0);break;}}this.$1_A();if(this.onChangePhoto!=null){this.onChangePhoto(this,new Js.Library.IntEventArgs(this.get_selectedIndex()));}},$1_9:function(){for(var $0=0;$0<this.$1_1.length;$0++){if(this.$1_1[$0].className==='PhotoBrowserCellHighlight'){return $0;}}return 0;},$1_A:function(){if(!this.$1_10()){this.$1_11();}for(var $2=0;$2<this.$1_1.length;$2++){this.$1_1[$2].className='';var $3=this.$1_1[$2].childNodes[0].childNodes[1];if($3.className!=='PhotoBrowserImage'){$3.className='PhotoBrowserImage';$3.style.width=this.$1_4.toString()+'px';$3.style.height=this.$1_4.toString()+'px';}var $4=this.$1_1[$2].childNodes[0].childNodes[2];if($4.className!=='PhotoBrowserImage'){$4.className='PhotoBrowserImage';$4.style.marginTop='0px';$4.style.marginLeft='0px';}}this.$1_1[this.get_selectedIndex()].className='PhotoBrowserCellHighlight';var $0=this.$1_1[this.get_selectedIndex()].childNodes[0].childNodes[1];$0.className='PhotoBrowserImageHighlight';$0.style.width=(this.$1_4-2).toString()+'px';$0.style.height=(this.$1_4-2).toString()+'px';var $1=this.$1_1[this.get_selectedIndex()].childNodes[0].childNodes[2];$1.className='PhotoBrowserImageHighlight';$1.style.marginTop='-1px';$1.style.marginLeft='-1px';},$1_B:false,$1_C:true,doPostLoadPhotoSetActions:function(sender,e){this.$1_B=false;if(!this.$1_C){this.$1_D();this.$1_11();this.$1_A();}this.$1_C=false;this.$1_0.get_uiPaginationControl().set_lastPage(this.get_photoProvider().get_currentPhotoSet().lastPage);if(this.onChangePhotoSet!=null){this.onChangePhotoSet(this,new Js.Controls.PhotoBrowser.PhotoSetEventArgs(this.get_photoProvider().get_currentPhotoSet().photos,this.get_selectedIndex()));}},photoSetIsLoadingFromServer:function(sender,e){this.$1_B=true;},$1_D:function(){for(var $0=0;$0<this.$1_1.length;$0++){if($0<this.get_photoProvider().get_currentPhotoSet().photos.length){(this.$1_1[$0].childNodes[0].childNodes[1]).src='/gfx/1pix.gif';}else{break;}}for(var $1=0;$1<this.$1_1.length;$1++){if($1<this.get_photoProvider().get_currentPhotoSet().photos.length){this.$1_1[$1].style.display='';this.$1_13($1);(this.$1_1[$1].childNodes[0].childNodes[1]).src=this.get_photoProvider().get_currentPhotoSet().photos[$1].iconPath;var $2=(this.$1_1[$1].childNodes[0].childNodes[2]);$2.src=this.get_photoProvider().get_currentPhotoSet().photos[$1].thumbPath;$2.style.width=this.get_photoProvider().get_currentPhotoSet().photos[$1].thumbWidth.toString()+'px';$2.style.height=this.get_photoProvider().get_currentPhotoSet().photos[$1].thumbHeight.toString()+'px';$2.style.top=(-(this.get_photoProvider().get_currentPhotoSet().photos[$1].thumbHeight-75)/2).toString()+'px';$2.style.left=(-(this.get_photoProvider().get_currentPhotoSet().photos[$1].thumbWidth-75)/2).toString()+'px';}else{this.$1_1[$1].style.display='none';}}},$1_E:function($p0,$p1){this.get_photoProvider().loadPhotos(($p1).value);},$1_F:function(){this.$1_A();if(this.onChangePhoto!=null){this.onChangePhoto(this,new Js.Library.IntEventArgs(this.get_selectedIndex()));}},$1_10:function(){return this.get_selectedIndex()>=0&&this.get_selectedIndex()<this.get_photoProvider().get_currentPhotoSet().photos.length;},$1_11:function(){if(this.get_selectedIndex()<0){this.set_selectedIndex(0);}else if(this.get_selectedIndex()>=this.get_photoProvider().get_currentPhotoSet().photos.length){this.set_selectedIndex(this.get_photoProvider().get_currentPhotoSet().photos.length-1);}},moveToNextPhoto:function(source,e){if(!this.$1_B){this.set_selectedIndex(this.get_selectedIndex()+1)-1;if(this.get_selectedIndex()>=this.get_photoProvider().get_currentPhotoSet().photos.length||this.get_photoProvider().get_currentPhotoSet().photos[this.get_selectedIndex()]==null){this.set_selectedIndex(0);this.$1_0.get_uiPaginationControl().moveToNextPage();}else{this.$1_F();}}},moveToPreviousPhoto:function(source,e){if(!this.$1_B){this.set_selectedIndex(this.get_selectedIndex()-1)+1;if(this.get_selectedIndex()<0){this.set_selectedIndex(this.get_selectedIndex()+this.$1_1.length);this.$1_0.get_uiPaginationControl().moveToPreviousPage();}else{this.$1_F();}}},moveToPhotoAbove:function(source,e){this.set_selectedIndex(this.get_selectedIndex()-this.$1_3);if(this.get_selectedIndex()<0){this.set_selectedIndex(this.get_selectedIndex()+this.$1_1.length);this.$1_0.get_uiPaginationControl().moveToPreviousPage();}else{this.$1_F();}},moveToPhotoBelow:function(source,e){if(this.get_selectedIndex()===this.get_photoProvider().get_currentPhotoSet().photos.length-1||this.get_selectedIndex()+this.$1_3>=this.$1_1.length){this.$1_12();this.$1_0.get_uiPaginationControl().moveToNextPage();}else{this.set_selectedIndex(this.get_selectedIndex()+this.$1_3);this.$1_F();}},$1_12:function(){while(this.get_selectedIndex()<0){this.set_selectedIndex(this.get_selectedIndex()+this.$1_3);}while(this.get_selectedIndex()>=this.$1_3){this.set_selectedIndex(this.get_selectedIndex()-this.$1_3);}},rolloverMouseOverTextChanged:function(o,e){var $0=(e).value;this.$1_13($0);},$1_13:function($p0){this.$1_1[$p0].childNodes[0].childNodes[0].setAttribute('rolloverMouseOverText',this.get_photoProvider().get_currentPhotoSet().photos[$p0].rolloverMouseOverText);}}
Js.Controls.PhotoBrowser.Service=function(){}
Js.Controls.PhotoBrowser.Service.getRecentVideos=function(pageNumber,success,failure,userContext,timeout){var $0={};$0['pageNumber']=pageNumber;var $1=Js.Library.WebServiceHelper.options('GetRecentVideos','/WebServices/Controls/PhotoBrowser/Service.asmx',$0,failure,userContext,timeout);$1.success=function($p1_0,$p1_1,$p1_2){
success(($p1_0)['d'],userContext,'GetRecentVideos');};$.ajax($1);}
Js.Controls.PhotoBrowser.Service.getPhotosByEventAndPage=function(eventK,pageNumber,success,failure,userContext,timeout){var $0={};$0['eventK']=eventK;$0['pageNumber']=pageNumber;var $1=Js.Library.WebServiceHelper.options('GetPhotosByEventAndPage','/WebServices/Controls/PhotoBrowser/Service.asmx',$0,failure,userContext,timeout);$1.success=function($p1_0,$p1_1,$p1_2){
success(($p1_0)['d'],userContext,'GetPhotosByEventAndPage');};$.ajax($1);}
Js.Controls.PhotoBrowser.Service.getPhotosByGalleryAndPage=function(galleryK,pageNumber,success,failure,userContext,timeout){var $0={};$0['galleryK']=galleryK;$0['pageNumber']=pageNumber;var $1=Js.Library.WebServiceHelper.options('GetPhotosByGalleryAndPage','/WebServices/Controls/PhotoBrowser/Service.asmx',$0,failure,userContext,timeout);$1.success=function($p1_0,$p1_1,$p1_2){
success(($p1_0)['d'],userContext,'GetPhotosByGalleryAndPage');};$.ajax($1);}
Js.Controls.PhotoBrowser.Service.getPhotosByArticle=function(articleK,pageNumber,success,failure,userContext,timeout){var $0={};$0['articleK']=articleK;$0['pageNumber']=pageNumber;var $1=Js.Library.WebServiceHelper.options('GetPhotosByArticle','/WebServices/Controls/PhotoBrowser/Service.asmx',$0,failure,userContext,timeout);$1.success=function($p1_0,$p1_1,$p1_2){
success(($p1_0)['d'],userContext,'GetPhotosByArticle');};$.ajax($1);}
Js.Controls.PhotoBrowser.Service.getPhotosOfUsr=function(usrK,pageNumber,spottedByUsrK,success,failure,userContext,timeout){var $0={};$0['usrK']=usrK;$0['pageNumber']=pageNumber;$0['spottedByUsrK']=spottedByUsrK;var $1=Js.Library.WebServiceHelper.options('GetPhotosOfUsr','/WebServices/Controls/PhotoBrowser/Service.asmx',$0,failure,userContext,timeout);$1.success=function($p1_0,$p1_1,$p1_2){
success(($p1_0)['d'],userContext,'GetPhotosOfUsr');};$.ajax($1);}
Js.Controls.PhotoBrowser.Service.getFavouritePhotosOfUsr=function(usrK,pageNumber,success,failure,userContext,timeout){var $0={};$0['usrK']=usrK;$0['pageNumber']=pageNumber;var $1=Js.Library.WebServiceHelper.options('GetFavouritePhotosOfUsr','/WebServices/Controls/PhotoBrowser/Service.asmx',$0,failure,userContext,timeout);$1.success=function($p1_0,$p1_1,$p1_2){
success(($p1_0)['d'],userContext,'GetFavouritePhotosOfUsr');};$.ajax($1);}
Js.Controls.PhotoBrowser.Service.getPhotosByGroup=function(groupK,pageNumber,success,failure,userContext,timeout){var $0={};$0['groupK']=groupK;$0['pageNumber']=pageNumber;var $1=Js.Library.WebServiceHelper.options('GetPhotosByGroup','/WebServices/Controls/PhotoBrowser/Service.asmx',$0,failure,userContext,timeout);$1.success=function($p1_0,$p1_1,$p1_2){
success(($p1_0)['d'],userContext,'GetPhotosByGroup');};$.ajax($1);}
Js.Controls.PhotoBrowser.Service.getPhotosByTag=function(tagK,pageNumber,success,failure,userContext,timeout){var $0={};$0['tagK']=tagK;$0['pageNumber']=pageNumber;var $1=Js.Library.WebServiceHelper.options('GetPhotosByTag','/WebServices/Controls/PhotoBrowser/Service.asmx',$0,failure,userContext,timeout);$1.success=function($p1_0,$p1_1,$p1_2){
success(($p1_0)['d'],userContext,'GetPhotosByTag');};$.ajax($1);}
Js.Controls.PhotoBrowser.Service.setAsPhotoOfWeek=function(photoK,isPhotoOfWeek,photoOfWeekCaption,success,failure,userContext,timeout){var $0={};$0['photoK']=photoK;$0['isPhotoOfWeek']=isPhotoOfWeek;$0['photoOfWeekCaption']=photoOfWeekCaption;var $1=Js.Library.WebServiceHelper.options('SetAsPhotoOfWeek','/WebServices/Controls/PhotoBrowser/Service.asmx',$0,failure,userContext,timeout);$1.success=function($p1_0,$p1_1,$p1_2){
success(($p1_0)['d'],userContext,'SetAsPhotoOfWeek');};$.ajax($1);}
Js.Controls.PhotoBrowser.View=function(clientId){this.clientId=clientId;}
Js.Controls.PhotoBrowser.View.prototype={clientId:null,get_uiPhotoRepeaterContainer:function(){if(this.$0==null){this.$0=document.getElementById(this.clientId+'_uiPhotoRepeaterContainer');}return this.$0;},$0:null,get_uiPhotoRepeaterContainerJ:function(){if(this.$1==null){this.$1=$('#'+this.clientId+'_uiPhotoRepeaterContainer');}return this.$1;},$1:null,get_uiPaginationControl:function(){return eval(this.clientId+'_uiPaginationControlController');},get_uiPhotoRepeater:function(){if(this.$2==null){this.$2=document.getElementById(this.clientId+'_uiPhotoRepeater');}return this.$2;},$2:null,get_uiPhotoRepeaterJ:function(){if(this.$3==null){this.$3=$('#'+this.clientId+'_uiPhotoRepeater');}return this.$3;},$3:null,get_uiBlowUpIconSpan:function(){if(this.$4==null){this.$4=document.getElementById(this.clientId+'_uiBlowUpIconSpan');}return this.$4;},$4:null,get_uiBlowUpIconSpanJ:function(){if(this.$5==null){this.$5=$('#'+this.clientId+'_uiBlowUpIconSpan');}return this.$5;},$5:null,get_uiIconsPerPage:function(){if(this.$6==null){this.$6=document.getElementById(this.clientId+'_uiIconsPerPage');}return this.$6;},$6:null,get_uiIconsPerPageJ:function(){if(this.$7==null){this.$7=$('#'+this.clientId+'_uiIconsPerPage');}return this.$7;},$7:null,get_uiIconsPerRow:function(){if(this.$8==null){this.$8=document.getElementById(this.clientId+'_uiIconsPerRow');}return this.$8;},$8:null,get_uiIconsPerRowJ:function(){if(this.$9==null){this.$9=$('#'+this.clientId+'_uiIconsPerRow');}return this.$9;},$9:null,get_uiIconSize:function(){if(this.$A==null){this.$A=document.getElementById(this.clientId+'_uiIconSize');}return this.$A;},$A:null,get_uiIconSizeJ:function(){if(this.$B==null){this.$B=$('#'+this.clientId+'_uiIconSize');}return this.$B;},$B:null,get_uiTableCellsPrefix:function(){if(this.$C==null){this.$C=document.getElementById(this.clientId+'_uiTableCellsPrefix');}return this.$C;},$C:null,get_uiTableCellsPrefixJ:function(){if(this.$D==null){this.$D=$('#'+this.clientId+'_uiTableCellsPrefix');}return this.$D;},$D:null}
Js.Controls.PhotoBrowser.PhotoProvider=function(){}
Js.Controls.PhotoBrowser.PhotoProvider.prototype={$0:null,get_currentPhotoSet:function(){return this.$0;},set_currentPhotoSet:function(value){this.$0=value;return value;},doPostLoadPhotoSetActions:null,photoSetIsLoadingFromServer:null,successCallback:function(result,pageNumber,methodName){this.set_currentPhotoSet(result);this.storePhotosInCache(this.get_currentPhotoSet(),pageNumber);if(this.doPostLoadPhotoSetActions!=null){this.doPostLoadPhotoSetActions(this,ss.EventArgs.Empty);}},loadPhotos:function(pageNumber){if(this.loadPhotosFromCache(pageNumber)){if(this.doPostLoadPhotoSetActions!=null){this.doPostLoadPhotoSetActions(this,ss.EventArgs.Empty);}}else{if(this.photoSetIsLoadingFromServer!=null){this.photoSetIsLoadingFromServer(this,ss.EventArgs.Empty);}this.loadPhotosViaWebRequest(pageNumber);}}}
Js.Controls.PhotoBrowser.EventPhotoProvider=function(galleryK,eventK){Js.Controls.PhotoBrowser.EventPhotoProvider.initializeBase(this);this.$3=galleryK;this.$4=eventK;this.$1=[];this.$2=[];}
Js.Controls.PhotoBrowser.EventPhotoProvider.prototype={$1:null,$2:null,$3:0,$4:0,loadPhotosViaWebRequest:function(pageNumber){if(this.$3>0){Js.Controls.PhotoBrowser.Service.getPhotosByGalleryAndPage(this.$3,pageNumber,ss.Delegate.create(this,this.successCallback),Js.Library.Trace.webServiceFailure,pageNumber,-1);}else{Js.Controls.PhotoBrowser.Service.getPhotosByEventAndPage(this.$4,pageNumber,ss.Delegate.create(this,this.successCallback),Js.Library.Trace.webServiceFailure,pageNumber,-1);}},loadPhotosFromCache:function(pageNumber){if(this.$3>0){if((this.$1[this.$3]!=null)&&((this.$1[this.$3])[pageNumber]!=null)){this.set_currentPhotoSet((this.$1[this.$3])[pageNumber]);return true;}}else if(this.$4>0&&(this.$2[this.$4]!=null)&&((this.$2[this.$4])[pageNumber]!=null)){this.set_currentPhotoSet((this.$2[this.$4])[pageNumber]);return true;}return false;},storePhotosInCache:function(photos,pageNumber){if(this.$3>0){if(this.$1[this.$3]==null){this.$1[this.$3]=[];}(this.$1[this.$3])[pageNumber]=photos;return true;}if(this.$4>0){if(this.$2[this.$4]==null){this.$2[this.$4]=[];}(this.$2[this.$4])[pageNumber]=photos;return true;}return false;},setGallery:function(galleryK){this.$3=galleryK;this.loadPhotos(1);}}
Js.Controls.PhotoBrowser.SingleKeyPhotoProvider=function(key){Js.Controls.PhotoBrowser.SingleKeyPhotoProvider.initializeBase(this);this.key=key;this.$1=[];}
Js.Controls.PhotoBrowser.SingleKeyPhotoProvider.prototype={$1:null,key:0,storePhotosInCache:function(photoSet,pageNumber){if(this.key>0){if(this.$1[this.key]==null){this.$1[this.key]=[];}(this.$1[this.key])[pageNumber]=photoSet;return true;}return false;},loadPhotosFromCache:function(pageNumber){if(this.key>0&&this.$1[this.key]!=null&&(this.$1[this.key])[pageNumber]!=null){this.set_currentPhotoSet((this.$1[this.key])[pageNumber]);return true;}return false;}}
Js.Controls.PhotoBrowser.ArticlePhotoProvider=function(k){Js.Controls.PhotoBrowser.ArticlePhotoProvider.initializeBase(this,[k]);}
Js.Controls.PhotoBrowser.ArticlePhotoProvider.prototype={loadPhotosViaWebRequest:function(pageNumber){Js.Controls.PhotoBrowser.Service.getPhotosByArticle(this.key,pageNumber,ss.Delegate.create(this,this.successCallback),Js.Library.Trace.webServiceFailure,pageNumber,-1);}}
Js.Controls.PhotoBrowser.TagPhotoProvider=function(k){Js.Controls.PhotoBrowser.TagPhotoProvider.initializeBase(this,[k]);}
Js.Controls.PhotoBrowser.TagPhotoProvider.prototype={loadPhotosViaWebRequest:function(pageNumber){Js.Controls.PhotoBrowser.Service.getPhotosByTag(this.key,pageNumber,ss.Delegate.create(this,this.successCallback),Js.Library.Trace.webServiceFailure,pageNumber,-1);}}
Js.Controls.PhotoBrowser.GroupPhotoProvider=function(k){Js.Controls.PhotoBrowser.GroupPhotoProvider.initializeBase(this,[k]);}
Js.Controls.PhotoBrowser.GroupPhotoProvider.prototype={loadPhotosViaWebRequest:function(pageNumber){Js.Controls.PhotoBrowser.Service.getPhotosByGroup(this.key,pageNumber,ss.Delegate.create(this,this.successCallback),Js.Library.Trace.webServiceFailure,pageNumber,-1);}}
Js.Controls.PhotoBrowser.PhotosOfUsrProvider=function(k,spottedByUsrK){Js.Controls.PhotoBrowser.PhotosOfUsrProvider.initializeBase(this,[k]);this.$2=spottedByUsrK;}
Js.Controls.PhotoBrowser.PhotosOfUsrProvider.prototype={$2:0,loadPhotosViaWebRequest:function(pageNumber){Js.Controls.PhotoBrowser.Service.getPhotosOfUsr(this.key,pageNumber,this.$2,ss.Delegate.create(this,this.successCallback),Js.Library.Trace.webServiceFailure,pageNumber,-1);}}
Js.Controls.PhotoBrowser.FavouritePhotosOfUsrProvider=function(k){Js.Controls.PhotoBrowser.FavouritePhotosOfUsrProvider.initializeBase(this,[k]);}
Js.Controls.PhotoBrowser.FavouritePhotosOfUsrProvider.prototype={loadPhotosViaWebRequest:function(pageNumber){Js.Controls.PhotoBrowser.Service.getFavouritePhotosOfUsr(this.key,pageNumber,ss.Delegate.create(this,this.successCallback),Js.Library.Trace.webServiceFailure,pageNumber,-1);}}
Js.Controls.PhotoBrowser.VideoPhotoProvider=function(){Js.Controls.PhotoBrowser.VideoPhotoProvider.initializeBase(this);this.$1=[];}
Js.Controls.PhotoBrowser.VideoPhotoProvider.prototype={$1:null,storePhotosInCache:function(photoSet,pageNumber){this.$1[pageNumber]=photoSet;return true;},loadPhotosFromCache:function(pageNumber){if(this.$1[pageNumber]!=null){this.set_currentPhotoSet(this.$1[pageNumber]);return true;}return false;},loadPhotosViaWebRequest:function(pageNumber){Js.Controls.PhotoBrowser.Service.getRecentVideos(pageNumber,ss.Delegate.create(this,this.successCallback),Js.Library.Trace.webServiceFailure,pageNumber,-1);}}
Js.Controls.PhotoBrowser.PhotosController=function(){}
Js.Controls.PhotoBrowser.PhotosController.prototype={setupController:function(){this.get_photoProvider().doPostLoadPhotoSetActions=ss.Delegate.create(this.get_photoBrowser(),this.get_photoBrowser().doPostLoadPhotoSetActions);this.get_photoProvider().photoSetIsLoadingFromServer=ss.Delegate.create(this.get_photoBrowser(),this.get_photoBrowser().photoSetIsLoadingFromServer);this.get_photoProvider().loadPhotos(this.get_photoBrowser().get_paginationControl().get_currentPage());this.get_photoBrowser().set_photoProvider(this.get_photoProvider());this.get_photoBrowser().onChangePhotoSet=ss.Delegate.create(this.get_photoControl(),this.get_photoControl().photoSetChanged);this.get_photoBrowser().onChangePhoto=ss.Delegate.create(this.get_photoControl(),this.get_photoControl().photoChanged);this.get_photoControl().onPhotoNextClick=ss.Delegate.create(this.get_photoBrowser(),this.get_photoBrowser().moveToNextPhoto);this.get_photoControl().onPhotoPrevClick=ss.Delegate.create(this.get_photoBrowser(),this.get_photoBrowser().moveToPreviousPhoto);this.get_photoControl().onPhotoUpClick=ss.Delegate.create(this.get_photoBrowser(),this.get_photoBrowser().moveToPhotoAbove);this.get_photoControl().onPhotoDownClick=ss.Delegate.create(this.get_photoBrowser(),this.get_photoBrowser().moveToPhotoBelow);this.get_photoControl().onPhotoChanged=ss.Delegate.create(this,this.$0);this.get_photoControl().onPhotoChangedAfterDelay=ss.Delegate.create(this,this.$1);this.get_photoControl().onRolloverMouseOverTextChanged=ss.Delegate.create(this.get_photoBrowser(),this.get_photoBrowser().rolloverMouseOverTextChanged);this.get_threadControl().onThreadCreated=ss.Delegate.create(this,this.$2);this.get_threadControl().onCommentPosted=ss.Delegate.create(this,this.$3);this.get_threadControl().get_uiCommentsDisplay().onThreadDeleted=ss.Delegate.create(this,this.$4);},$0:function($p0,$p1){var $0=$p1;this.get_threadControl().get_uiCommentsDisplay().setCommentsCount($0.photo.commentsCount);this.get_latestChatController().hide();},$1:function($p0,$p1){var $0=$p1;this.get_threadControl().get_uiCommentsDisplay().showComments($0.photo.threadK,1);this.get_threadControl().set_currentParentObjectK($0.photo.k);this.get_latestChatController().show($0.photo.k);},$2:function($p0,$p1){if(!this.get_photoControl().get_currentPhoto().threadK){this.get_photoControl().get_currentPhoto().threadK=($p1).value;}this.get_photoControl().get_currentPhoto().commentsCount=1;this.get_latestChatController().update($p0,$p1);},$3:function($p0,$p1){if(this.get_photoControl().get_currentPhoto().threadK===($p1).value){this.get_photoControl().get_currentPhoto().commentsCount++;}},$4:function($p0,$p1){if(this.get_photoControl().get_currentPhoto().threadK===($p1).value){this.get_photoControl().get_currentPhoto().threadK=0;this.get_photoControl().get_currentPhoto().commentsCount=0;}}}
Js.Controls.PhotoBrowser.Controller.registerClass('Js.Controls.PhotoBrowser.Controller',Js.Controls.PhotoBrowser.PhotoBrowsingUsingKeysControl);Js.Controls.PhotoBrowser.Service.registerClass('Js.Controls.PhotoBrowser.Service');Js.Controls.PhotoBrowser.View.registerClass('Js.Controls.PhotoBrowser.View');Js.Controls.PhotoBrowser.PhotoProvider.registerClass('Js.Controls.PhotoBrowser.PhotoProvider');Js.Controls.PhotoBrowser.EventPhotoProvider.registerClass('Js.Controls.PhotoBrowser.EventPhotoProvider',Js.Controls.PhotoBrowser.PhotoProvider);Js.Controls.PhotoBrowser.SingleKeyPhotoProvider.registerClass('Js.Controls.PhotoBrowser.SingleKeyPhotoProvider',Js.Controls.PhotoBrowser.PhotoProvider);Js.Controls.PhotoBrowser.ArticlePhotoProvider.registerClass('Js.Controls.PhotoBrowser.ArticlePhotoProvider',Js.Controls.PhotoBrowser.SingleKeyPhotoProvider);Js.Controls.PhotoBrowser.TagPhotoProvider.registerClass('Js.Controls.PhotoBrowser.TagPhotoProvider',Js.Controls.PhotoBrowser.SingleKeyPhotoProvider);Js.Controls.PhotoBrowser.GroupPhotoProvider.registerClass('Js.Controls.PhotoBrowser.GroupPhotoProvider',Js.Controls.PhotoBrowser.SingleKeyPhotoProvider);Js.Controls.PhotoBrowser.PhotosOfUsrProvider.registerClass('Js.Controls.PhotoBrowser.PhotosOfUsrProvider',Js.Controls.PhotoBrowser.SingleKeyPhotoProvider);Js.Controls.PhotoBrowser.FavouritePhotosOfUsrProvider.registerClass('Js.Controls.PhotoBrowser.FavouritePhotosOfUsrProvider',Js.Controls.PhotoBrowser.SingleKeyPhotoProvider);Js.Controls.PhotoBrowser.VideoPhotoProvider.registerClass('Js.Controls.PhotoBrowser.VideoPhotoProvider',Js.Controls.PhotoBrowser.PhotoProvider);Js.Controls.PhotoBrowser.PhotosController.registerClass('Js.Controls.PhotoBrowser.PhotosController');})(jQuery);// This script was generated using Script# v0.7.4.0
