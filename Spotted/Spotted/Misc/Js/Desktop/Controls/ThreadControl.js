// ThreadControl.js
(function($){
Type.registerNamespace('Js.Controls.ThreadControl');Js.Controls.ThreadControl.Controller=function(view){this.$0=view;view.get_commentHtml().get_saveButton().setAttribute('onclick','');view.get_commentHtml().get_saveButtonJ().click(ss.Delegate.create(this,this.$9));this.$6();if(view.get_addThreadAdvancedCheckBox()!=null){view.get_addThreadAdvancedCheckBoxJ().click(ss.Delegate.create(this,this.$5));}view.get_uiCommentsDisplay().threadCommentsProvider.onCommentPosted=ss.Delegate.create(this,this.$4);view.get_uiCommentsDisplay().threadCommentsProvider.onThreadCreated=ss.Delegate.create(this,this.$8);view.get_uiCommentsDisplay().onCommentsDisplayed=ss.Delegate.create(this,this.$3);}
Js.Controls.ThreadControl.Controller.prototype={$0:null,get_uiCommentsDisplay:function(){return this.$0.get_uiCommentsDisplay();},onThreadCreated:null,onCommentPosted:null,$1:null,get_currentParentObjectK:function(){try{return parseInt(this.$0.get_uiParentObjectK().value);}catch($0){return 0;}},set_currentParentObjectK:function(value){this.$0.get_uiParentObjectK().value=value.toString();return value;},get_$2:function(){try{return parseInt(this.$0.get_uiParentObjectType().value);}catch($0){return 0;}},$3:function($p0,$p1){this.$0.get_commentHtml().clearHtml();try{if(this.$0.get_uiMultiBuddyChooser()!=null){this.$0.get_uiMultiBuddyChooser().clear();}}catch($0){}},$4:function($p0,$p1){if(this.onCommentPosted!=null){this.onCommentPosted(null,$p1);}this.$6();this.$0.get_commentHtml().clearHtml();},$5:function($p0){WhenLoggedIn(ss.Delegate.create(this,function(){
this.$0.get_addThreadAdvancedPanel().style.display=(this.$0.get_addThreadAdvancedCheckBox().checked)?'':'none';}));},$6:function(){Js.Controls.CommentsDisplay.Service.getNewGuid(ss.Delegate.create(this,this.$7),Js.Library.Trace.webServiceFailure,null,-1);},$7:function($p0,$p1,$p2){this.$1=$p0;},$8:function($p0,$p1){if(this.onThreadCreated!=null){this.onThreadCreated($p0,$p1);}},$9:function($p0){$p0.preventDefault();WhenLoggedIn(ss.Delegate.create(this,function(){
this.$A();}));},$A:function(){var $0=this.$0.get_commentHtml().get_rawHtml();if(!$0.trim().length){return;}Js.Library.Misc.showWaitingCursor();var $1=this.$0.get_uiMultiBuddyChooser().get_selectedValues();if(!this.$0.get_addThreadAdvancedCheckBox().checked||this.$0.get_addThreadPublicRadioButton().checked||this.$0.get_addThreadNewPublicRadioButton().checked){if(!this.$0.get_uiCommentsDisplay().threadCommentsProvider.get_threadK()){this.$0.get_uiCommentsDisplay().threadCommentsProvider.createPublicThread(this.get_$2(),this.get_currentParentObjectK(),this.$1,$0,this.$0.get_commentHtml().get_formatting(),this.$0.get_addThreadAdvancedCheckBox().checked&&this.$0.get_addThreadNewsCheckBox().checked,$1);}else if(this.$0.get_addThreadAdvancedCheckBox().checked&&this.$0.get_addThreadNewPublicRadioButton().checked){this.$0.get_uiCommentsDisplay().threadCommentsProvider.createNewPublicThread(this.get_$2(),this.get_currentParentObjectK(),this.$1,$0,this.$0.get_commentHtml().get_formatting(),this.$0.get_addThreadNewsCheckBox().checked,$1);}else{this.$0.get_uiCommentsDisplay().threadCommentsProvider.createReply(this.get_$2(),this.get_currentParentObjectK(),this.$0.get_uiCommentsDisplay().threadCommentsProvider.get_threadK(),this.$1,$0,this.$0.get_commentHtml().get_formatting(),this.$0.get_uiCommentsDisplay().threadCommentsProvider.get_lastKnownCommentK(),$1);}}else if(this.$0.get_addThreadAdvancedCheckBox().checked&&this.$0.get_addThreadPrivateRadioButton().checked){Js.Controls.CommentsDisplay.Service.createPrivateThread(this.get_$2(),this.get_currentParentObjectK(),this.$1,$0,this.$0.get_commentHtml().get_formatting(),$1,this.$0.get_addThreadSealedCheckBox().checked,ss.Delegate.create(this,this.$B),null,null,-1);}else if(this.$0.get_addThreadAdvancedCheckBox().checked&&this.$0.get_addThreadGroupRadioButton().checked){var $2=parseInt(this.$0.get_addThreadGroupDropDown().value);Js.Controls.CommentsDisplay.Service.createNewThreadInGroup($2,this.get_$2(),this.get_currentParentObjectK(),this.$1,$0,this.$0.get_commentHtml().get_formatting(),this.$0.get_addThreadNewsCheckBox().checked,$1,this.$0.get_addThreadGroupPrivateCheckBox().checked,ss.Delegate.create(this,this.$C),null,null,-1);}},$B:function($p0,$p1,$p2){Js.Library.Misc.hideWaitingCursor();Js.Library.Misc.redirect($p0);},$C:function($p0,$p1,$p2){Js.Library.Misc.hideWaitingCursor();Js.Library.Misc.redirect($p0);}}
Js.Controls.ThreadControl.View=function(clientId){this.clientId=clientId;}
Js.Controls.ThreadControl.View.prototype={clientId:null,get_uiCommentsDisplay:function(){return eval(this.clientId+'_uiCommentsDisplayController');},get_postCommentPanel:function(){if(this.$0==null){this.$0=document.getElementById(this.clientId+'_PostCommentPanel');}return this.$0;},$0:null,get_postCommentPanelJ:function(){if(this.$1==null){this.$1=$('#'+this.clientId+'_PostCommentPanel');}return this.$1;},$1:null,get_h1:function(){if(this.$2==null){this.$2=document.getElementById(this.clientId+'_H1');}return this.$2;},$2:null,get_h1J:function(){if(this.$3==null){this.$3=$('#'+this.clientId+'_H1');}return this.$3;},$3:null,get_threadWatchButtonHolder:function(){if(this.$4==null){this.$4=document.getElementById(this.clientId+'_ThreadWatchButtonHolder');}return this.$4;},$4:null,get_threadWatchButtonHolderJ:function(){if(this.$5==null){this.$5=$('#'+this.clientId+'_ThreadWatchButtonHolder');}return this.$5;},$5:null,get_inlineScript3:function(){if(this.$6==null){this.$6=document.getElementById(this.clientId+'_InlineScript3');}return this.$6;},$6:null,get_inlineScript3J:function(){if(this.$7==null){this.$7=$('#'+this.clientId+'_InlineScript3');}return this.$7;},$7:null,get_threadFavouriteButtonP:function(){if(this.$8==null){this.$8=document.getElementById(this.clientId+'_ThreadFavouriteButtonP');}return this.$8;},$8:null,get_threadFavouriteButtonPJ:function(){if(this.$9==null){this.$9=$('#'+this.clientId+'_ThreadFavouriteButtonP');}return this.$9;},$9:null,get_threadFavouriteButtonHolder:function(){if(this.$A==null){this.$A=document.getElementById(this.clientId+'_ThreadFavouriteButtonHolder');}return this.$A;},$A:null,get_threadFavouriteButtonHolderJ:function(){if(this.$B==null){this.$B=$('#'+this.clientId+'_ThreadFavouriteButtonHolder');}return this.$B;},$B:null,get_inlineScript2:function(){if(this.$C==null){this.$C=document.getElementById(this.clientId+'_InlineScript2');}return this.$C;},$C:null,get_inlineScript2J:function(){if(this.$D==null){this.$D=$('#'+this.clientId+'_InlineScript2');}return this.$D;},$D:null,get_requiredFieldValidator1:function(){if(this.$E==null){this.$E=document.getElementById(this.clientId+'_RequiredFieldValidator1');}return this.$E;},$E:null,get_requiredFieldValidator1J:function(){if(this.$F==null){this.$F=$('#'+this.clientId+'_RequiredFieldValidator1');}return this.$F;},$F:null,get_commentGroupMemberPanel:function(){if(this.$10==null){this.$10=document.getElementById(this.clientId+'_CommentGroupMemberPanel');}return this.$10;},$10:null,get_commentGroupMemberPanelJ:function(){if(this.$11==null){this.$11=$('#'+this.clientId+'_CommentGroupMemberPanel');}return this.$11;},$11:null,get_commentGroupMemberAnchor:function(){if(this.$12==null){this.$12=document.getElementById(this.clientId+'_CommentGroupMemberAnchor');}return this.$12;},$12:null,get_commentGroupMemberAnchorJ:function(){if(this.$13==null){this.$13=$('#'+this.clientId+'_CommentGroupMemberAnchor');}return this.$13;},$13:null,get_commentLoginPanel:function(){if(this.$14==null){this.$14=document.getElementById(this.clientId+'_CommentLoginPanel');}return this.$14;},$14:null,get_commentLoginPanelJ:function(){if(this.$15==null){this.$15=$('#'+this.clientId+'_CommentLoginPanel');}return this.$15;},$15:null,get_commentEmailVerifyPanel:function(){if(this.$16==null){this.$16=document.getElementById(this.clientId+'_CommentEmailVerifyPanel');}return this.$16;},$16:null,get_commentEmailVerifyPanelJ:function(){if(this.$17==null){this.$17=$('#'+this.clientId+'_CommentEmailVerifyPanel');}return this.$17;},$17:null,get_commentHtml:function(){return eval(this.clientId+'_CommentHtmlController');},get_addThreadAdvancedCheckBoxP:function(){if(this.$18==null){this.$18=document.getElementById(this.clientId+'_AddThreadAdvancedCheckBoxP');}return this.$18;},$18:null,get_addThreadAdvancedCheckBoxPJ:function(){if(this.$19==null){this.$19=$('#'+this.clientId+'_AddThreadAdvancedCheckBoxP');}return this.$19;},$19:null,get_addThreadAdvancedCheckBox:function(){if(this.$1A==null){this.$1A=document.getElementById(this.clientId+'_AddThreadAdvancedCheckBox');}return this.$1A;},$1A:null,get_addThreadAdvancedCheckBoxJ:function(){if(this.$1B==null){this.$1B=$('#'+this.clientId+'_AddThreadAdvancedCheckBox');}return this.$1B;},$1B:null,get_addThreadAdvancedPanel:function(){if(this.$1C==null){this.$1C=document.getElementById(this.clientId+'_AddThreadAdvancedPanel');}return this.$1C;},$1C:null,get_addThreadAdvancedPanelJ:function(){if(this.$1D==null){this.$1D=$('#'+this.clientId+'_AddThreadAdvancedPanel');}return this.$1D;},$1D:null,get_addThreadPublicRadioButtonSpan:function(){if(this.$1E==null){this.$1E=document.getElementById(this.clientId+'_AddThreadPublicRadioButtonSpan');}return this.$1E;},$1E:null,get_addThreadPublicRadioButtonSpanJ:function(){if(this.$1F==null){this.$1F=$('#'+this.clientId+'_AddThreadPublicRadioButtonSpan');}return this.$1F;},$1F:null,get_addThreadPublicRadioButton:function(){if(this.$20==null){this.$20=document.getElementById(this.clientId+'_AddThreadPublicRadioButton');}return this.$20;},$20:null,get_addThreadPublicRadioButtonJ:function(){if(this.$21==null){this.$21=$('#'+this.clientId+'_AddThreadPublicRadioButton');}return this.$21;},$21:null,get_addThreadNewPublicRadioButtonSpan:function(){if(this.$22==null){this.$22=document.getElementById(this.clientId+'_AddThreadNewPublicRadioButtonSpan');}return this.$22;},$22:null,get_addThreadNewPublicRadioButtonSpanJ:function(){if(this.$23==null){this.$23=$('#'+this.clientId+'_AddThreadNewPublicRadioButtonSpan');}return this.$23;},$23:null,get_addThreadNewPublicRadioButton:function(){if(this.$24==null){this.$24=document.getElementById(this.clientId+'_AddThreadNewPublicRadioButton');}return this.$24;},$24:null,get_addThreadNewPublicRadioButtonJ:function(){if(this.$25==null){this.$25=$('#'+this.clientId+'_AddThreadNewPublicRadioButton');}return this.$25;},$25:null,get_addThreadPrivateRadioButtonSpan:function(){if(this.$26==null){this.$26=document.getElementById(this.clientId+'_AddThreadPrivateRadioButtonSpan');}return this.$26;},$26:null,get_addThreadPrivateRadioButtonSpanJ:function(){if(this.$27==null){this.$27=$('#'+this.clientId+'_AddThreadPrivateRadioButtonSpan');}return this.$27;},$27:null,get_addThreadPrivateRadioButton:function(){if(this.$28==null){this.$28=document.getElementById(this.clientId+'_AddThreadPrivateRadioButton');}return this.$28;},$28:null,get_addThreadPrivateRadioButtonJ:function(){if(this.$29==null){this.$29=$('#'+this.clientId+'_AddThreadPrivateRadioButton');}return this.$29;},$29:null,get_addThreadGroupRadioButtonSpan:function(){if(this.$2A==null){this.$2A=document.getElementById(this.clientId+'_AddThreadGroupRadioButtonSpan');}return this.$2A;},$2A:null,get_addThreadGroupRadioButtonSpanJ:function(){if(this.$2B==null){this.$2B=$('#'+this.clientId+'_AddThreadGroupRadioButtonSpan');}return this.$2B;},$2B:null,get_addThreadGroupRadioButton:function(){if(this.$2C==null){this.$2C=document.getElementById(this.clientId+'_AddThreadGroupRadioButton');}return this.$2C;},$2C:null,get_addThreadGroupRadioButtonJ:function(){if(this.$2D==null){this.$2D=$('#'+this.clientId+'_AddThreadGroupRadioButton');}return this.$2D;},$2D:null,get_addThreadGroupDropDown:function(){if(this.$2E==null){this.$2E=document.getElementById(this.clientId+'_AddThreadGroupDropDown');}return this.$2E;},$2E:null,get_addThreadGroupDropDownJ:function(){if(this.$2F==null){this.$2F=$('#'+this.clientId+'_AddThreadGroupDropDown');}return this.$2F;},$2F:null,get_addThreadGroupPrivateCheckBoxSpan:function(){if(this.$30==null){this.$30=document.getElementById(this.clientId+'_AddThreadGroupPrivateCheckBoxSpan');}return this.$30;},$30:null,get_addThreadGroupPrivateCheckBoxSpanJ:function(){if(this.$31==null){this.$31=$('#'+this.clientId+'_AddThreadGroupPrivateCheckBoxSpan');}return this.$31;},$31:null,get_addThreadGroupPrivateCheckBox:function(){if(this.$32==null){this.$32=document.getElementById(this.clientId+'_AddThreadGroupPrivateCheckBox');}return this.$32;},$32:null,get_addThreadGroupPrivateCheckBoxJ:function(){if(this.$33==null){this.$33=$('#'+this.clientId+'_AddThreadGroupPrivateCheckBox');}return this.$33;},$33:null,get_addThreadNewsCheckBoxSpan:function(){if(this.$34==null){this.$34=document.getElementById(this.clientId+'_AddThreadNewsCheckBoxSpan');}return this.$34;},$34:null,get_addThreadNewsCheckBoxSpanJ:function(){if(this.$35==null){this.$35=$('#'+this.clientId+'_AddThreadNewsCheckBoxSpan');}return this.$35;},$35:null,get_addThreadNewsCheckBox:function(){if(this.$36==null){this.$36=document.getElementById(this.clientId+'_AddThreadNewsCheckBox');}return this.$36;},$36:null,get_addThreadNewsCheckBoxJ:function(){if(this.$37==null){this.$37=$('#'+this.clientId+'_AddThreadNewsCheckBox');}return this.$37;},$37:null,get_addThreadSealedCheckBoxSpan:function(){if(this.$38==null){this.$38=document.getElementById(this.clientId+'_AddThreadSealedCheckBoxSpan');}return this.$38;},$38:null,get_addThreadSealedCheckBoxSpanJ:function(){if(this.$39==null){this.$39=$('#'+this.clientId+'_AddThreadSealedCheckBoxSpan');}return this.$39;},$39:null,get_addThreadSealedCheckBox:function(){if(this.$3A==null){this.$3A=document.getElementById(this.clientId+'_AddThreadSealedCheckBox');}return this.$3A;},$3A:null,get_addThreadSealedCheckBoxJ:function(){if(this.$3B==null){this.$3B=$('#'+this.clientId+'_AddThreadSealedCheckBox');}return this.$3B;},$3B:null,get_addThreadInviteCheckBoxSpan:function(){if(this.$3C==null){this.$3C=document.getElementById(this.clientId+'_AddThreadInviteCheckBoxSpan');}return this.$3C;},$3C:null,get_addThreadInviteCheckBoxSpanJ:function(){if(this.$3D==null){this.$3D=$('#'+this.clientId+'_AddThreadInviteCheckBoxSpan');}return this.$3D;},$3D:null,get_addThreadInviteCheckBox:function(){if(this.$3E==null){this.$3E=document.getElementById(this.clientId+'_AddThreadInviteCheckBox');}return this.$3E;},$3E:null,get_addThreadInviteCheckBoxJ:function(){if(this.$3F==null){this.$3F=$('#'+this.clientId+'_AddThreadInviteCheckBox');}return this.$3F;},$3F:null,get_addThreadInvitePanel:function(){if(this.$40==null){this.$40=document.getElementById(this.clientId+'_AddThreadInvitePanel');}return this.$40;},$40:null,get_addThreadInvitePanelJ:function(){if(this.$41==null){this.$41=$('#'+this.clientId+'_AddThreadInvitePanel');}return this.$41;},$41:null,get_uiMultiBuddyChooser:function(){return eval(this.clientId+'_uiMultiBuddyChooserController');},get_inlineScript1:function(){if(this.$42==null){this.$42=document.getElementById(this.clientId+'_InlineScript1');}return this.$42;},$42:null,get_inlineScript1J:function(){if(this.$43==null){this.$43=$('#'+this.clientId+'_InlineScript1');}return this.$43;},$43:null,get_uiThreadK:function(){if(this.$44==null){this.$44=document.getElementById(this.clientId+'_uiThreadK');}return this.$44;},$44:null,get_uiThreadKJ:function(){if(this.$45==null){this.$45=$('#'+this.clientId+'_uiThreadK');}return this.$45;},$45:null,get_uiParentObjectK:function(){if(this.$46==null){this.$46=document.getElementById(this.clientId+'_uiParentObjectK');}return this.$46;},$46:null,get_uiParentObjectKJ:function(){if(this.$47==null){this.$47=$('#'+this.clientId+'_uiParentObjectK');}return this.$47;},$47:null,get_uiParentObjectType:function(){if(this.$48==null){this.$48=document.getElementById(this.clientId+'_uiParentObjectType');}return this.$48;},$48:null,get_uiParentObjectTypeJ:function(){if(this.$49==null){this.$49=$('#'+this.clientId+'_uiParentObjectType');}return this.$49;},$49:null}
Js.Controls.ThreadControl.Controller.registerClass('Js.Controls.ThreadControl.Controller');Js.Controls.ThreadControl.View.registerClass('Js.Controls.ThreadControl.View');})(jQuery);// This script was generated using Script# v0.7.4.0
