Type.registerNamespace('SpottedScript.Controls.ChatClient.Items');
SpottedScript.Controls.ChatClient.Items.IHasPostingUsr=function(){};SpottedScript.Controls.ChatClient.Items.IHasPostingUsr.registerInterface('SpottedScript.Controls.ChatClient.Items.IHasPostingUsr');SpottedScript.Controls.ChatClient.Items.MessagePinLocation=function(){};SpottedScript.Controls.ChatClient.Items.MessagePinLocation.prototype = {afterName:1,afterSubhead:2,afterBody:3}
SpottedScript.Controls.ChatClient.Items.MessagePinLocation.registerEnum('SpottedScript.Controls.ChatClient.Items.MessagePinLocation',false);SpottedScript.Controls.ChatClient.Items.TopPhoto=function(topPhotoStub,parent){SpottedScript.Controls.ChatClient.Items.TopPhoto.initializeBase(this,[topPhotoStub,parent]);this.photoK=topPhotoStub.photoK;this.photoUrl=topPhotoStub.photoUrl;this.photoIcon=topPhotoStub.photoIcon;this.photoWeb=topPhotoStub.photoWeb;this.photoWebWidth=topPhotoStub.photoWebWidth;this.photoWebHeight=topPhotoStub.photoWebHeight;this.photoThumb=topPhotoStub.photoThumb;this.photoThumbWidth=topPhotoStub.photoThumbWidth;this.photoThumbHeight=topPhotoStub.photoThumbHeight;}
SpottedScript.Controls.ChatClient.Items.TopPhoto.prototype={photoK:0,photoUrl:null,photoIcon:null,photoWeb:null,photoWebWidth:0,photoWebHeight:0,photoThumb:null,photoThumbWidth:0,photoThumbHeight:0}
SpottedScript.Controls.ChatClient.Items.CommentMessage=function(commentStub,parent,serverRequestIndex){SpottedScript.Controls.ChatClient.Items.CommentMessage.initializeBase(this,[commentStub,parent,serverRequestIndex]);this.url=commentStub.url;this.subject=commentStub.subject;this.showReadButton=this.url.length>0;}
SpottedScript.Controls.ChatClient.Items.CommentMessage.prototype={url:null,subject:null,getReadButtonUrl:function(){return this.url;},getHtmlAfterBody:function(){return '';},getSubhead:function(){if(this.subject.length>0&&this.url.length>0){return '<a href=\"'+this.url+'\" class=\"ChatClientCommentMessageSubhead\">'+this.subject+'</a>';}else{return this.subject;}}}
SpottedScript.Controls.ChatClient.Items.Alert=function(alertStub,parent,serverRequestIndex){SpottedScript.Controls.ChatClient.Items.Alert.initializeBase(this,[alertStub,parent,serverRequestIndex]);this.$2=alertStub.nickName;this.$3=alertStub.stmuParams;this.usrK=alertStub.usrK;this.$4=alertStub.pic;this.$5=(this.$4==='0')?'00000000-0000-0000-b916-000000000001':this.$4;this.set_isInNewSection(false);this.set_isTopOfSection(false);this.set_isBottomOfSection(false);this.$6=this.get_clientID()+'_Pic';this.$7=this.get_clientID()+'_Pin';}
SpottedScript.Controls.ChatClient.Items.Alert.prototype={usrK:0,$2:null,$3:null,$4:null,$5:null,$6:null,$7:null,$8:null,showChatButton:false,initialiseElements:function(){this.initialiseElementsInternal(true);},initialiseElementsInternal:function(setElementsInitialisedFlagOnFinish){SpottedScript.Controls.ChatClient.Items.Alert.callBaseMethod(this, 'initialiseElementsInternal',[false]);this.$8=(this.get_showPic())?document.getElementById(this.$6):null;if(setElementsInitialisedFlagOnFinish){this.elementsInitialised=true;}},updateUI:function(){this.$9();},$9:function(){if(this.elementsInitialised){var $0='ChatClientMessageHolder';$0+=(this.get_isInNewSection())?' ChatClientMessageHolderNew':' ChatClientMessageHolderOld';$0+=(this.get_isTopOfSection())?' ChatClientMessageHolderTop':'';$0+=(this.get_isBottomOfSection())?' ChatClientMessageHolderBot':'';$0+=' ClearAfter';this.itemElement.className=$0;}},getHtml:function(){return '';},get_showPic:function(){return true;},appendHtml:function(sb){var $0=33;sb.append('<div');sb.appendAttribute('id',this.get_clientID());sb.append(' class=\"ChatClientMessageHolder');sb.append((this.get_isInNewSection())?' ChatClientMessageHolderNew':' ChatClientMessageHolderOld');sb.append((this.get_isTopOfSection())?' ChatClientMessageHolderTop':'');sb.append((this.get_isBottomOfSection())?' ChatClientMessageHolderBot':'');sb.append(' ClearAfter\">');if(this.get_showPic()){sb.append('<a');sb.appendAttribute('href','/members/'+this.$2.toLowerCase());sb.appendAttribute('onmouseover','stmu(\''+this.$4+'\','+this.$3+');');sb.appendAttribute('onmouseout','htm();');sb.append('>');sb.append('<img');sb.appendAttribute('id',this.$6);sb.appendAttribute('src',SpottedScript.Misc.getPicUrlFromGuid(this.$5));sb.appendAttribute('width',$0.toString());sb.appendAttribute('height',$0.toString());sb.appendAttribute('hspace','0');sb.appendAttribute('class','ChatClientMessagePic');sb.appendAttribute('align','left');sb.append(' />');sb.append('</a>');}if(this.showChatButton){sb.append('<div class=\"ChatClientMessageChatButtonHolder\" align=\"right\">');if(this.showChatButton){sb.append('<button');sb.appendAttribute('class','ChatClientMessageChatButton');sb.appendAttribute('onclick','chatClientPinRoom(\''+this.roomGuid+'\', null, false);return false;');sb.append('>chat</button>');}sb.append('</div>');}sb.append('<div class=\"ChatClientMessageHeader\">');sb.append('<a');sb.appendAttribute('href','/members/'+this.$2.toLowerCase());sb.appendAttribute('onmouseover','stmu(\''+this.$4+'\','+this.$3+');');sb.appendAttribute('onmouseout','htm();');sb.append('>');sb.append(this.$2);sb.append('</a> ');sb.append(this.getHtml());sb.append('</div>');sb.append('</div>');},get_postingUsrK:function(){return this.usrK;}}
SpottedScript.Controls.ChatClient.Items.Laugh=function(laughStub,parent,serverRequestIndex){SpottedScript.Controls.ChatClient.Items.Laugh.initializeBase(this,[laughStub,parent,serverRequestIndex]);}
SpottedScript.Controls.ChatClient.Items.Laugh.prototype={getHtmlAfterName:function(){return ' laughed at:';},getRoomGuidForChatClickAction:function(){return this.$6;}}
SpottedScript.Controls.ChatClient.Items.Logout=function(alertStub,parent,serverRequestIndex){SpottedScript.Controls.ChatClient.Items.Logout.initializeBase(this,[alertStub,parent,serverRequestIndex]);}
SpottedScript.Controls.ChatClient.Items.Logout.prototype={getHtml:function(){return 'logged out';}}
SpottedScript.Controls.ChatClient.Items.Login=function(alertStub,parent,serverRequestIndex){SpottedScript.Controls.ChatClient.Items.Login.initializeBase(this,[alertStub,parent,serverRequestIndex]);}
SpottedScript.Controls.ChatClient.Items.Login.prototype={getHtml:function(){return 'logged in';}}
SpottedScript.Controls.ChatClient.Items.Note=function(text,parent,roomGuid,serverRequestIndex){SpottedScript.Controls.ChatClient.Items.Note.initializeBase(this,[new SpottedScript.Controls.ChatClient.Shared.ItemStub(Math.round(Math.random()*100000).toString(),11,'0',roomGuid),parent,serverRequestIndex]);this.$2=text;}
SpottedScript.Controls.ChatClient.Items.Note.prototype={$2:null,appendHtml:function(sb){sb.append('<p>NOTE:<br />');sb.append(this.$2);sb.append('</p>');}}
SpottedScript.Controls.ChatClient.Items.Newable=function(itemStub,parent,serverRequestIndex){SpottedScript.Controls.ChatClient.Items.Newable.initializeBase(this,[itemStub,parent,serverRequestIndex]);}
SpottedScript.Controls.ChatClient.Items.Newable.prototype={get_isInNewSection:function(){return this.isInNewSection;},set_isInNewSection:function(value){this.isInNewSection=value;this.updateUI();return value;},isInNewSection:false,get_isTopOfSection:function(){return this.isTopOfSection;},set_isTopOfSection:function(value){this.isTopOfSection=value;this.updateUI();return value;},isTopOfSection:false,get_isBottomOfSection:function(){return this.isBottomOfSection;},set_isBottomOfSection:function(value){this.isBottomOfSection=value;this.updateUI();return value;},isBottomOfSection:false,updateClassModifiersAllAtOnce:function(isTopOfSectionValue,isBottomOfSectionValue,isInNewSectionValue){if(isTopOfSectionValue!==this.get_isTopOfSection()||isBottomOfSectionValue!==this.get_isBottomOfSection()||isInNewSectionValue!==this.get_isInNewSection()){this.isTopOfSection=isTopOfSectionValue;this.isBottomOfSection=isBottomOfSectionValue;this.isInNewSection=isInNewSectionValue;this.updateUI();}}}
SpottedScript.Controls.ChatClient.Items.Photo=function(photoStub,parent,serverRequestIndex){SpottedScript.Controls.ChatClient.Items.Photo.initializeBase(this,[photoStub,parent,serverRequestIndex]);this.width=photoStub.width;this.height=photoStub.height;this.url=photoStub.url;this.web=photoStub.web;this.icon=photoStub.icon;this.thumb=photoStub.thumb;this.thumbWidth=photoStub.thumbWidth;this.thumbHeight=photoStub.thumbHeight;this.buddyAlert=photoStub.buddyAlert;this.$2=this.get_clientID()+'_Image';}
SpottedScript.Controls.ChatClient.Items.Photo.prototype={width:0,height:0,url:null,web:null,icon:null,thumb:null,thumbWidth:0,thumbHeight:0,buddyAlert:false,$2:null,$3:null,initialiseElements:function(){this.initialiseElementsInternal(true);},initialiseElementsInternal:function(setElementsInitialisedFlagOnFinish){SpottedScript.Controls.ChatClient.Items.Photo.callBaseMethod(this, 'initialiseElementsInternal',[false]);this.$3=document.getElementById(this.$2);if(setElementsInitialisedFlagOnFinish){this.elementsInitialised=true;}},updateUI:function(){this.$4();},$4:function(){if(this.elementsInitialised){}},get_$5:function(){return (this.get_isInNewSection())?200:50;},get_$6:function(){return (this.get_$5()-300)/2;},get_$7:function(){return 0;},appendHtml:function(sb){sb.append('<div class=\"ChatMessagePhotoHolder\"');sb.appendAttribute('id',this.get_clientID());sb.append('>');sb.append('<a');sb.appendAttribute('href',this.url);sb.appendAttribute('onclick','event.cancelBubble = true; if (event.stopPropagation) { event.stopPropagation(); } document.location = \"'+this.url+'\";return false;');sb.append('>');sb.append('<img');sb.appendAttribute('id',this.$2);sb.appendAttribute('src',SpottedScript.Misc.getPicUrlFromGuid(this.thumb));sb.appendAttribute('width',this.thumbWidth.toString());sb.appendAttribute('height',this.thumbHeight.toString());sb.appendAttribute('class','ChatClientPhotoImage');sb.appendAttribute('style','top:'+this.get_$6().toString()+'px; left: '+this.get_$7().toString()+'px;');sb.appendAttribute('border','0');sb.append(' />');sb.append('</a>');sb.append('</div>');}}
SpottedScript.Controls.ChatClient.Items.Error=function(err,method,parent,roomGuid,serverRequestIndex){SpottedScript.Controls.ChatClient.Items.Error.initializeBase(this,[new SpottedScript.Controls.ChatClient.Shared.ItemStub(Math.round(Math.random()*100000).toString(),11,'0',roomGuid),parent,serverRequestIndex]);this.$2=method;this.$3=err.get_exceptionType();this.$4=err.get_message();this.$5=err.get_stackTrace();this.$7=err.get_timedOut();this.$6=err.get_statusCode();}
SpottedScript.Controls.ChatClient.Items.Error.prototype={$2:null,$3:null,$4:null,$5:null,$6:0,$7:false,appendHtml:function(sb){sb.append('<p>ERROR during '+this.$2+':<br />');if(this.$3.length>0){sb.append('<small>'+this.$3+'</small><br />');}if(this.$4.length>0){sb.append(this.$4+'<br />');}if(this.$6!==0){sb.append('<small>Status: '+this.$6.toString()+'</small><br />');}if(this.$7){sb.append('<small>(timed out)</small>');}sb.append('</p>');}}
SpottedScript.Controls.ChatClient.Items.Html=function(itemStub,parent,serverRequestIndex){SpottedScript.Controls.ChatClient.Items.Html.initializeBase(this,[itemStub,parent]);this.elementsInitialised=false;this.serverRequestIndex=serverRequestIndex;}
SpottedScript.Controls.ChatClient.Items.Html.prototype={instance:0,itemElement:null,elementsInitialised:false,get_clientID:function(){return this.parent.clientID+'_ServerRequestIndex_'+this.serverRequestIndex+'_Item_'+this.guid+'_Instance_'+this.instance;},getRoomGuidForChatClickAction:function(){return this.roomGuid;},get_isElementsInitialised:function(){return this.elementsInitialised;},initialiseElements:function(){this.initialiseElementsInternal(true);},initialiseElementsInternal:function(setElementsInitialisedFlagOnFinish){this.itemElement=document.getElementById(this.get_clientID());if(setElementsInitialisedFlagOnFinish){this.elementsInitialised=true;}},toHtml:function(){var $0=new Spotted.System.Text.StringBuilder();this.appendHtml($0);return $0.toString();},appendHtml:function(sb){sb.append('<p>');sb.append(SpottedScript.Controls.ChatClient.Shared.ItemType.toString(this.type));sb.append(' - ');sb.append(this.guid);sb.append('</p>');}}
SpottedScript.Controls.ChatClient.Items.Item=function(itemStub,parent){this.parent=parent;this.guid=itemStub.guid;this.type=itemStub.type;this.$0=itemStub.dateTime;this.roomGuid=itemStub.roomGuid;this.fromGuestRefresh=false;}
SpottedScript.Controls.ChatClient.Items.Item.create=function(itemStub,parent,serverRequestIndex,fromGuestRefresh,instance){var $0=itemStub.type;var $1;if($0===6){$1=new SpottedScript.Controls.ChatClient.Items.Login(itemStub,parent,serverRequestIndex);}else if($0===8){$1=new SpottedScript.Controls.ChatClient.Items.Logout(itemStub,parent,serverRequestIndex);}else if($0===5){$1=new SpottedScript.Controls.ChatClient.Items.Laugh(itemStub,parent,serverRequestIndex);}else if($0===2){$1=new SpottedScript.Controls.ChatClient.Items.Private(itemStub,parent,serverRequestIndex);}else if($0===13){$1=new SpottedScript.Controls.ChatClient.Items.CommentMessage(itemStub,parent,serverRequestIndex);}else if($0===1){$1=new SpottedScript.Controls.ChatClient.Items.Message(itemStub,parent,serverRequestIndex);}else if($0===7){$1=new SpottedScript.Controls.ChatClient.Items.Photo(itemStub,parent,serverRequestIndex);}else if($0===15){$1=new SpottedScript.Controls.ChatClient.Items.TopPhoto(itemStub,parent);}else{$1=new SpottedScript.Controls.ChatClient.Items.Item(itemStub,parent);}$1.$1=instance;$1.serverRequestIndex=serverRequestIndex;$1.fromGuestRefresh=fromGuestRefresh;return $1;}
SpottedScript.Controls.ChatClient.Items.Item.prototype={parent:null,guid:null,type:0,$0:null,roomGuid:null,serverRequestIndex:0,fromGuestRefresh:false,$1:0,getAgeInMinutes:function(){return Math.floor(this.parent.getMessageAge(this.$0)/60000);}}
SpottedScript.Controls.ChatClient.Items.Private=function(privateStub,parent,serverRequestIndex){SpottedScript.Controls.ChatClient.Items.Private.initializeBase(this,[privateStub,parent,serverRequestIndex]);this.buddy=privateStub.buddy;}
SpottedScript.Controls.ChatClient.Items.Private.prototype={buddy:false}
SpottedScript.Controls.ChatClient.Items.Message=function(messageStub,parent,serverRequestIndex){SpottedScript.Controls.ChatClient.Items.Message.initializeBase(this,[messageStub,parent,serverRequestIndex]);this.nickName=messageStub.nickName;this.stmuParams=messageStub.stmuParams;this.usrK=messageStub.usrK;this.$2=messageStub.pic;this.$3=messageStub.chatPic;this.$4=messageStub.text;this.$5=messageStub.pinRoomGuid;this.$6=messageStub.roomGuid;this.$7=(this.$2==='0')?'00000000-0000-0000-b916-000000000001':this.$2;this.anyChatPic=(this.$3==='0')?'00000000-0000-0000-b916-000000000005':this.$3;this.set_isInNewSection(false);this.set_isTopOfSection(false);this.set_isBottomOfSection(false);this.$8=this.get_clientID()+'_Pic';this.$9=this.get_clientID()+'_RoomPin';this.$A=this.get_clientID()+'_MessageBody';}
SpottedScript.Controls.ChatClient.Items.Message.prototype={usrK:0,nickName:null,stmuParams:null,$2:null,$3:null,$4:null,$5:null,$6:null,$7:null,anyChatPic:null,$8:null,$9:null,$A:null,$B:null,$C:null,showChatButton:false,showReadButton:false,showSubHead:false,initialiseElements:function(){this.initialiseElementsInternal(true);},initialiseElementsInternal:function(setElementsInitialisedFlagOnFinish){SpottedScript.Controls.ChatClient.Items.Message.callBaseMethod(this, 'initialiseElementsInternal',[false]);this.$B=document.getElementById(this.$8);this.$C=document.getElementById(this.$A);if(setElementsInitialisedFlagOnFinish){this.elementsInitialised=true;}},updateUI:function(){this.$D();},$D:function(){if(this.elementsInitialised){var $0='ChatClientMessageHolder';$0+=(this.get_isInNewSection())?' ChatClientMessageHolderNew':' ChatClientMessageHolderOld';$0+=(this.get_isTopOfSection())?' ChatClientMessageHolderTop':'';$0+=(this.get_isBottomOfSection())?' ChatClientMessageHolderBot':'';$0+=' ClearAfter';this.itemElement.className=$0;}},getReadButtonUrl:function(){return '';},getHtmlAfterBody:function(){return '';},getHtmlAfterName:function(){return '';},getSubhead:function(){return '';},getRoomGuidForChatClickAction:function(){return (this.$5.length===0)?this.$6:this.$5;},appendHtml:function(sb){var $0=33;sb.append('<div');sb.appendAttribute('id',this.get_clientID());sb.append(' class=\"ChatClientMessageHolder');sb.append((this.get_isInNewSection())?' ChatClientMessageHolderNew':' ChatClientMessageHolderOld');sb.append((this.get_isTopOfSection())?' ChatClientMessageHolderTop':'');sb.append((this.get_isBottomOfSection())?' ChatClientMessageHolderBot':'');sb.append(' ClearAfter\">');sb.append('<a');sb.appendAttribute('href','/members/'+this.nickName.toLowerCase());sb.appendAttribute('onmouseover','stmu(\''+this.$2+'\','+this.stmuParams+');');sb.appendAttribute('onmouseout','htm();');sb.append('>');sb.append('<img');sb.appendAttribute('id',this.$8);sb.appendAttribute('src',SpottedScript.Misc.getPicUrlFromGuid(this.$7));sb.appendAttribute('width',$0.toString());sb.appendAttribute('height',$0.toString());sb.appendAttribute('hspace','0');sb.appendAttribute('class','ChatClientMessagePic');sb.appendAttribute('align','left');sb.append(' />');sb.append('</a>');if(this.showChatButton||this.showReadButton){sb.append('<div class=\"ChatClientMessageChatButtonHolder\" align=\"right\">');if(this.showChatButton){sb.append('<button');sb.appendAttribute('class','ChatClientMessageChatButton');sb.appendAttribute('onclick','chatClientPinRoom(\''+this.getRoomGuidForChatClickAction()+'\', null, false);return false;');sb.append('>chat</button>');}if(this.showChatButton&&this.showReadButton){sb.append('<br />');}if(this.showReadButton){sb.append('<button');sb.appendAttribute('class','ChatClientMessageChatButton');sb.appendAttribute('onclick','event.cancelBubble = true; if (event.stopPropagation) { event.stopPropagation(); } document.location = \"'+this.getReadButtonUrl()+'\";return false;');sb.append('>read</button>');}sb.append('</div>');}sb.append('<div class=\"ChatClientMessageHeader\">');sb.append('<a');sb.appendAttribute('href','/members/'+this.nickName.toLowerCase());sb.appendAttribute('onmouseover','stmu(\''+this.$2+'\','+this.stmuParams+');');sb.appendAttribute('onmouseout','htm();');sb.append('>');sb.append(this.nickName);sb.append('</a>');var $1=this.getHtmlAfterName();if(this.$6!=='AQEFAAAAAAUAAAAAvVaVmQ'){var $2=this.getAgeInMinutes();if($2>=5){sb.append(' (');if($2>525600){var $3=Math.floor($2/525600);sb.append($3.toString());sb.append(' yr');sb.append(($3===1)?'':'s');}else if($2>43200){var $4=Math.floor($2/43200);sb.append($4.toString());sb.append(' month');sb.append(($4===1)?'':'s');}else if($2>10080){var $5=Math.floor($2/10080);sb.append($5.toString());sb.append(' wk');sb.append(($5===1)?'':'s');}else if($2>1440){var $6=Math.floor($2/1440);sb.append($6.toString());sb.append(' day');sb.append(($6===1)?'':'s');}else if($2>60){var $7=Math.floor($2/60);sb.append($7.toString());sb.append(' hr');sb.append(($7===1)?'':'s');}else{sb.append($2.toString());sb.append(' min');sb.append(($2===1)?'':'s');}sb.append(' ago) ');}}if($1.length>0){sb.append($1);}sb.append('</div>');if(this.showSubHead&&this.getSubhead().length>0){sb.append('<div');sb.append(' class=\"ChatClientMessageSubHead\">');sb.append(this.getSubhead());sb.append('</div>');}sb.append('<div');sb.appendAttribute('id',this.$A);sb.append(' class=\"ChatClientMessageBody\">');sb.append(this.$4);sb.append(this.getHtmlAfterBody());sb.append('</div>');sb.append('</div>');},get_postingUsrK:function(){return this.usrK;}}
Type.registerNamespace('SpottedScript.Controls.ChatClient');
SpottedScript.Controls.ChatClient.PopupArea=function(view){this.popups=[];this.animate=Boolean.parse(view.get_initAnimatePopups().value);this.$0=document.getElementById('ChatClientPopupAreaHolder');this.$0.style.width=SpottedScript.Controls.ChatClient.PopupArea.popupWidth.toString()+'px';}
SpottedScript.Controls.ChatClient.PopupArea.prototype={popups:null,$0:null,animate:false,add:function(popup){popup.area=this;var $0=this.popups.length;this.popups[$0]=popup;this.$0.appendChild(popup.holder);$addHandler(popup.holder,'mouseover',Function.createDelegate(this,this.$5));$addHandler(popup.holder,'mouseout',Function.createDelegate(this,this.$6));popup.repositionImmediate($0);popup.show();popup.setRemoveTimeout(10000);},$1:false,$2:false,remove:function(popup,force,forceNoAnimation){if(!this.$1||force){this.$3(popup,forceNoAnimation);}},$3:function($p0,$p1){if(!$p0.removed){$p0.hide($p1);$p0.removed=true;var $0=[];for(var $1=0;$1<this.popups.length;$1++){if(this.popups[$1].id!==$p0.id){$0[$0.length]=this.popups[$1];}}this.popups=$0;this.$9();}},$4:function(){var $0=[];for(var $1=0;$1<this.popups.length;$1++){if(this.popups[$1].needsRemoval){this.popups[$1].hide(false);}else{$0[$0.length]=this.popups[$1];}}this.popups=$0;this.$9();},$5:function($p0){this.$1=true;this.$2=true;},$6:function($p0){this.$2=false;window.setTimeout(Function.createDelegate(this,this.$7),100);},$7:function(){if(!this.$2){this.$1=false;this.$8();}},$8:function(){this.$4();},$9:function(){for(var $0=0;$0<this.popups.length;$0++){this.popups[$0].repositionSlide($0);}}}
SpottedScript.Controls.ChatClient.Popup=function(controller,title,room,items){this.title=title;this.roomGuid=room.guid;this.removed=false;this.roomGuidForClickAction=room.guid;this.holder=document.createElement('div');this.holder.className='ChatClientPopup';this.holder.style.width=SpottedScript.Controls.ChatClient.PopupArea.popupWidth.toString()+'px';this.holder.style.height=SpottedScript.Controls.ChatClient.PopupArea.popupHeight.toString()+'px';var $0=document.createElement('div');$0.className='ChatClientPopupHeader';$0.style.overflow='hidden';var $1=document.createElement('div');$1.className='ChatClientPopupCloseLinkHolder';var $2=document.createElement('a');$2.innerHTML='Close';$2.href='';$addHandler($2,'click',Function.createDelegate(this,this.$8));$1.appendChild($2);$0.appendChild($1);var $3=document.createElement('div');$3.className='ChatClientPopupTitle';$3.innerHTML=this.title;$0.appendChild($3);this.holder.appendChild($0);if(items!=null){this.itemsList=document.createElement('div');this.itemsList.className='ChatClientPopupItemsList';$addHandler(this.itemsList,'click',Function.createDelegate(this,this.$3));$addHandler(this.itemsList,'mouseover',Function.createDelegate(this,this.$4));$addHandler(this.itemsList,'mouseout',Function.createDelegate(this,this.$5));var $4=false;for(var $5=0;$5<items.length;$5++){var $6=items[$5];if(SpottedScript.Controls.ChatClient.Items.IHasPostingUsr.isInstanceOfType($6)){if(($6).get_postingUsrK()===controller.usrK){continue;}}if(this.hasRelevantItems){$4=true;break;}this.hasRelevantItems=true;}if(this.hasRelevantItems){for(var $7=0;$7<items.length;$7++){var $8=items[$7];if(SpottedScript.Controls.ChatClient.Items.IHasPostingUsr.isInstanceOfType($8)){if(($8).get_postingUsrK()===controller.usrK){continue;}}if(!$4){this.roomGuidForClickAction=$8.getRoomGuidForChatClickAction();}var $9=$8.instance;var $A=false;if(SpottedScript.Controls.ChatClient.Items.Newable.isInstanceOfType($8)){$A=($8).get_isInNewSection();($8).set_isInNewSection(false);}$8.instance=2;var $B=false;if(!$4&&SpottedScript.Controls.ChatClient.Items.Message.isInstanceOfType($8)){$B=($8).showChatButton;($8).showChatButton=false;}var $C=document.createElement('span');$C.innerHTML=$8.toHtml();if(this.itemsList.hasChildNodes()){this.itemsList.insertBefore($C,this.itemsList.childNodes[0]);}else{this.itemsList.appendChild($C);}$8.instance=$9;if(SpottedScript.Controls.ChatClient.Items.Newable.isInstanceOfType($8)){($8).set_isInNewSection($A);}if(!$4&&SpottedScript.Controls.ChatClient.Items.Message.isInstanceOfType($8)){($8).showChatButton=$B;}}this.holder.appendChild(this.itemsList);}}this.id=Math.random().toString();this.$0=jQuery(this.holder);}
SpottedScript.Controls.ChatClient.Popup.prototype={title:null,holder:null,itemsList:null,clickAction:null,roomGuid:null,area:null,id:null,$0:null,needsRemoval:false,removed:false,roomGuidForClickAction:null,hasRelevantItems:false,setRemoveTimeout:function(timeout){window.setTimeout(Function.createDelegate(this,this.$1),timeout);},$1:function(){this.needsRemoval=true;this.area.remove(this,false,false);},$2:function($p0){return 0-(($p0+1)*SpottedScript.Controls.ChatClient.PopupArea.popupHeight);},repositionImmediate:function(positionIndex){this.holder.style.top=this.$2(positionIndex).toString()+'px';},repositionSlide:function(positionIndex){if(this.area.animate){var $0={};$0['top']=this.$2(positionIndex).toString()+'px';this.$0.animate($0,500,'easeOutQuint',null);}else{this.repositionImmediate(positionIndex);}},show:function(){if(this.area.animate){var $0={};$0['direction']='down';$0['easing']='easeOutQuint';this.$0.show('drop',$0,500,null);}else{this.holder.style.display='block';}},hide:function(forceNoAnimation){if(this.area.animate&&!forceNoAnimation){var $0={};$0['direction']='down';$0['easing']='easeOutQuint';this.$0.hide('drop',$0,500,null);}else{this.holder.style.display='none';}},$3:function($p0){if(this.area.animate){try{var $0={};$0['to']='#ChatClient_MessagesMain';this.$0.effect('transfer',$0,500,null);}catch($1){}}if(this.clickAction!=null){this.clickAction(this.roomGuidForClickAction,null);}this.area.remove(this,true,true);$p0.preventDefault();},$4:function($p0){this.$6=true;if(this.itemsList!=null){this.itemsList.className='ChatClientPopupItemsList ChatClientPopupItemsListMouseOver';}$p0.preventDefault();},$5:function($p0){this.$6=false;window.setTimeout(Function.createDelegate(this,this.$7),0);$p0.preventDefault();},$6:false,$7:function(){if(this.itemsList!=null&&!this.$6){this.itemsList.className='ChatClientPopupItemsList';}},$8:function($p0){this.area.remove(this,true,false);$p0.preventDefault();}}
SpottedScript.Controls.ChatClient.Controller=function(view){this.$D=view;if(SpottedScript.Misc.get_browserIsIE()){jQuery(document.body).ready(Function.createDelegate(this,this.$13));}else{this.$13();}}
SpottedScript.Controls.ChatClient.Controller.prototype={$0:0,$1:null,$2:null,$3:null,$4:null,$5:null,$6:0,$7:null,$8:null,$9:null,$A:null,$B:null,$C:false,$D:null,$E:null,$F:0,$10:0,usrK:0,loggedIn:false,clientID:null,hasFocus:false,streamList:null,$11:function(){var $0=this.$12(new Date().getTime().toString());var $1=$0-this.$10;return ($1>0)?$1:0;},getMessageAge:function(serverTicksMessageString){var $0=this.$12(serverTicksMessageString);var $1=this.$F+(this.$11()*10000);var $2=($1-$0)/10000;return ($2>0)?$2:0;},$12:function($p0){return Number.parseInvariant($p0);},$13:function(){if(this.$D.get_initGo().value==='0'){return;}this.$F=this.$12(this.$D.get_initLastActionTicks().value);this.$10=this.$12(new Date().getTime().toString());this.streamList=this.$D.get_streamList();SpottedScript.Controls.ChatClient.Controller.instance=this;this.usrK=Number.parseInvariant(this.$D.get_initUsrK().value);this.loggedIn=this.usrK>0;this.clientID=this.$D.get_initClientID().value;this.$1=this.$D.get_initLastActionTicks().value;this.$0=Math.round(Math.random()*10000);this.$7=this.$D.get_initSystemMessagesRoomGuid().value;this.$8=this.$D.get_initInboxUpdatesRoomGuid().value;this.$9=this.$D.get_initBuddyStreamRoomGuid().value;this.$A='ARAFAAAAAAUAAAAANdfH9w';this.$B='ARIFAAAAAAUAAAAAO3ZY0A';this.$6=-1;this.$C=false;this.$5=new Array(0);this.$4=[];this.$E=new SpottedScript.Controls.ChatClient.PopupArea(this.$D);$addHandler(this.$D.get_textBox(),'focus',Function.createDelegate(this,this.$3F));$addHandler(this.$D.get_textBox(),'blur',Function.createDelegate(this,this.$40));$addHandler(this.$D.get_textBox(),'keypress',Function.createDelegate(this,this.$3D));$addHandler(this.$D.get_textBox(),'keydown',Function.createDelegate(this,this.$3B));$addHandler(this.$D.get_outerMain(),'keydown',Function.createDelegate(this,this.$3C));$addHandler(this.$D.get_roomsMain(),'click',Function.createDelegate(this,this.$22));$addHandler(this.$D.get_roomsMain(),'mousedown',Function.createDelegate(this,this.$21));if(this.loggedIn){$addHandler(this.$D.get_privateChatDrop(),'change',Function.createDelegate(this,this.$23));}$addHandler(this.$D.get_wrongSessionResumeLink(),'click',Function.createDelegate(this,this.$2E));$addHandler(this.$D.get_timeoutResumeLink(),'click',Function.createDelegate(this,this.$2E));$addHandler(this.$D.get_deleteArchiveAnchor(),'click',Function.createDelegate(this,this.$29));this.$3={};this.$17='';for(var $0=0;$0<this.$D.get_roomList().childNodes.length+this.$D.get_roomPrivateList().childNodes.length+this.$D.get_roomGuestList().childNodes.length;$0++){var $1=null;if($0<this.$D.get_roomList().childNodes.length){$1=this.$D.get_roomList().childNodes[$0];}else if($0<this.$D.get_roomList().childNodes.length+this.$D.get_roomPrivateList().childNodes.length){$1=this.$D.get_roomPrivateList().childNodes[$0-this.$D.get_roomList().childNodes.length];}else{$1=this.$D.get_roomGuestList().childNodes[$0-this.$D.get_roomList().childNodes.length-this.$D.get_roomPrivateList().childNodes.length];}if($1.nodeType===1&&$1.className.startsWith('ChatClientRoomHolder')){var $2=new SpottedScript.Controls.ChatClient.Room(this,this.$D);$2.initialiseFromElement($1,this.$5);this.$14($2);if($2.get_selected()){if(this.$17.length>0){$2.set_selected(false);}else{this.$17=$2.guid;}}this.$3[$2.guid]=$2;this.$4[this.$4.length]=$2.guid;$2.setListOrder(this.$4.length-1);}}if(this.$D.get_initTopPhoto().value.length>0&&this.$3['AQEFAAAAAAUAAAAAvVaVmQ']!=null){var $3=this.$D.get_initTopPhoto().value.split(',');var $4=new SpottedScript.Controls.ChatClient.Items.TopPhoto(new SpottedScript.Controls.ChatClient.Shared.TopPhotoStub('',15,'','AQEFAAAAAAUAAAAAvVaVmQ',Number.parseInvariant($3[0]),$3[1],$3[2],$3[3],Number.parseInvariant($3[4]),Number.parseInvariant($3[5]),$3[6],Number.parseInvariant($3[7]),Number.parseInvariant($3[8])),this);(this.$3['AQEFAAAAAAUAAAAAvVaVmQ']).addItem($4,null);}this.$15();this.$2=new SpottedScript.Controls.ChatClient.ServerClass(this,this.$0,this.$1,this.$5);this.$2.gotItems=Function.createDelegate(this,this.$1B);this.$2.gotNoItems=Function.createDelegate(this,this.$1C);this.$2.gotWrongSessionException=Function.createDelegate(this,this.$1D);this.$2.gotTimeoutException=Function.createDelegate(this,this.$1E);this.$2.gotGenericException=Function.createDelegate(this,this.$1F);this.$2.gotRoom=Function.createDelegate(this,this.$38);this.$2.gotNewPhotoRoom=Function.createDelegate(this,this.$33);this.$2.gotRoomState=Function.createDelegate(this,this.$30);this.$2.showLoadingIcon=Function.createDelegate(this,this.$48);this.$2.hideLoadingIcon=Function.createDelegate(this,this.$47);this.$2.gotMoreInfo=Function.createDelegate(this,this.$2C);this.$2.gotArchiveItems=Function.createDelegate(this,this.$28);this.$2.debugPrint=Function.createDelegate(this,this.$4A);this.$2.doneDeleteArchive=Function.createDelegate(this,this.$2A);this.$2.start();if(this.$17.length===0&&this.$4.length>0){this.set_$16(this.$3[this.$4[0]]);}this.$49('Controller started successfully.');},$14:function($p0){$p0.roomPinAction=Function.createDelegate(this,this.$34);$p0.roomStarAction=Function.createDelegate(this,this.$35);$p0.getMoreInfoHtml=Function.createDelegate(this,this.$2B);$p0.getArchiveItems=Function.createDelegate(this,this.$27);if($p0.get_guest()){$p0.guestRoomPinAction=Function.createDelegate(this,this.$36);}},$15:function(){},chatClientUpdateRoomOrder:function(e,ui){htm();;try{var $0=ui.item[0];var $1=this.$25($0.id);if($1.get_guest()&&!$1.get_pinned()){$1.set_pinned(true);}var $2=jQuery('.ChatClientRoomPrivateList');var $3={};var $4=$2.sortable('serialize',$3);var $5=$4.split('&');for(var $6=0;$6<$5.length;$6++){var $7=$5[$6].split('=')[1];this.$4[$6]=$7;(this.$3[$7]).setListOrder($6);}this.$2.storeUpdatedRoomListOrder();}catch($8){this.$49('Serailise failed.');}},get_$16:function(){if(this.$17.length===0){return null;}else{return this.$3[this.$17];}},set_$16:function($p0){this.$19($p0,true);return $p0;},$17:null,$18:null,$19:function($p0,$p1){if(this.$C){this.$18=($p0==null)?'':$p0.guid;return;}this.$17=($p0==null)?'':$p0.guid;var $dict1=this.$3;for(var $key2 in $dict1){var $0={key:$key2,value:$dict1[$key2]};var $1=$0.value;if($p0!=null&&$1.guid===$p0.guid){if(!$1.get_selected()){$1.set_selected(true);this.$17=$1.guid;}}else if($1.get_selected()){$1.set_selected(false);}}this.$D.get_textBox().style.display=($p0==null||$p0.readOnly)?'none':'';this.$D.get_deleteArchiveHolder().style.display=($p0==null||!$p0.isPrivateChatRoom)?'none':'';this.$D.get_deleteArchiveDoneLabel().style.display='none';if($p0!=null&&$p1){this.$1A($p0);}},$1A:function($p0){if(!$p0.readOnly&&this.usrK>0){this.$D.get_textBox().focus();}else{this.$D.get_tabsChatLink().focus();}},$1B:function($p0,$p1){var $0=$p1;var $1={};for(var $2=0;$2<$0.items.length;$2++){var $3=$0.items[$2];if(this.$3[$3.roomGuid]!=null&&((this.$3[$3.roomGuid]).get_pinned()||(this.$3[$3.roomGuid]).get_guest())){var $4=this.$3[$3.roomGuid];if($3.type===13&&($3.roomGuid===this.$A||$3.roomGuid===this.$9)){var $5=$3;$5.showSubHead=true;}else if($3.type===5){var $6=$3;$6.showSubHead=true;}$4.addItem($3,$1);}else if($3.type===2){var $7=$0.items[$2];if($7.usrK!==this.usrK){if(this.$3[this.$B]!=null){$7.showChatButton=true;var $8=this.$3[this.$B];$8.addItem($3,$1);}}}else if($3.type===13&&$3.roomGuid!==this.$A&&$3.roomGuid!==this.$9){var $9=$0.items[$2];if(this.$3[this.$8]!=null&&$9.usrK!==this.usrK){$9.showSubHead=true;var $A=this.$3[this.$8];$A.addItem($3,$1);}}else{if(this.$3['AQ0FAAAAAAUAAAAA5wHGJw']!=null){var $B=this.$3['AQ0FAAAAAAUAAAAA5wHGJw'];$B.addItem($0.items[$2],$1);}}}var $dict1=this.$3;for(var $key2 in $dict1){var $C={key:$key2,value:$dict1[$key2]};var $D=this.$3[$C.key];if($0.serverRequestIndex===0||$D.requestIndex===0||$1[$D.guid]!=null){$D.finaliseRequest($0.serverRequestIndex);if($0.serverRequestIndex>0&&$D.requestIndex>0&&$1[$D.guid]!=null&&$D.get_starred()&&(!this.hasFocus||!$D.get_selected())){var $E=new SpottedScript.Controls.ChatClient.Popup(this,$D.name,$D,$1[$D.guid]);if($E.hasRelevantItems){$E.clickAction=Function.createDelegate(this,this.$20);this.$E.add($E);}}}}},$1C:function($p0,$p1){var $0=$p1;var $dict1=this.$3;for(var $key2 in $dict1){var $1={key:$key2,value:$dict1[$key2]};var $2=this.$3[$1.key];if($0.serverRequestIndex===0||$2.requestIndex===0){$2.finaliseRequest($0.serverRequestIndex);}}},$1D:function($p0,$p1){var $0=$p1;this.$18=(this.get_$16()==null)?'':this.get_$16().guid;this.set_$16(null);this.$C=true;this.$D.get_wrongSessionHolder().style.display='';this.$D.get_timeoutHolder().style.display='none';},$1E:function($p0,$p1){var $0=$p1;this.$18=(this.get_$16()==null)?'':this.get_$16().guid;this.set_$16(null);this.$C=true;this.$D.get_wrongSessionHolder().style.display='none';this.$D.get_timeoutHolder().style.display='';},$1F:function($p0,$p1){var $0=$p1;if($0.error.get_exceptionType().endsWith('+SelfPrivateChatRoomException')){alert('Trying to have a private chat with yourself? Are you MAD?');}if($0.error.get_exceptionType().endsWith('+WritePermissionException')){alert('Error from the chat server while sending a message... Do you have permission to post into this room? If it\'s a group chat room, you need to be a member to chat.');}if(this.$3[this.$7]!=null){var $1=new SpottedScript.Controls.ChatClient.Items.Error($0.error,$0.method,this,this.$7,0);(this.$3[this.$7]).addItem($1,null);(this.$3[this.$7]).finaliseRequest(1);}},$20:function($p0,$p1){this.$D.get_tabsChatLink().focus();var $0=$p0;this.pinNewRoom($0);},$21:function($p0){window.setTimeout(Function.createDelegate(this,this.$43),20);},$22:function($p0){if($p0.target.id.endsWith('PrivateChatDrop')){return;}if($p0.target.id.endsWith('_Link')||$p0.target.id.endsWith('_Icon')){var $0=this.$24($p0.target.id);this.set_$16($0);this.$2F(true);}else if($p0.target.id.endsWith('_Cross')){var $1=this.$24($p0.target.id);if($1.get_pinned()){this.$2F(false);this.set_$16(null);$1.set_pinned(false);}else{this.$2F(true);}}else if($p0.target.id.endsWith('_Star')){var $2=this.$24($p0.target.id);if($2.starrable){$2.set_starred(!$2.get_starred());}else if($2.get_starred()){alert('This room can\'t be un-starred');}else{alert('This room can\'t be starred');}this.$2F(true);}if(this.get_$16()!=null){this.$1A(this.get_$16());}$p0.preventDefault();},$23:function($p0){if(this.$D.get_privateChatDrop().value!=='0'){this.pinNewRoom(this.$D.get_privateChatDrop().value);this.$D.get_privateChatDrop().selectedIndex=0;}},$24:function($p0){var $0=$p0.split('_');var $1=$0[$0.length-2];return this.$3[$1];},$25:function($p0){var $0=$p0.split('_');var $1=$0[$0.length-1];return this.$3[$1];},$26:function(){for(var $0=0;$0<this.$4.length;$0++){if((this.$3[this.$4[$0].toString()]).get_selected()){return $0;}}return 0;},$27:function($p0,$p1){if($p1!=null){var $0=$p1;this.$2.getArchiveItems($0.roomGuid);}},$28:function($p0,$p1){if($p1!=null){var $0=$p1;this.$2F(true);if(this.$3[$0.roomGuid]!=null){var $1=this.$3[$0.roomGuid];if(!$1.get_selected()){return;}$1.showArchiveItems($0.archiveItems);}}},$29:function($p0){this.$2F(true);this.$2.deleteArchive(this.get_$16().guid);$p0.preventDefault();},$2A:function($p0,$p1){if($p1!=null){var $0=$p1;this.$2F(true);if(this.$3[$0.roomGuid]!=null){var $1=this.$3[$0.roomGuid];$1.clearItems();this.$D.get_deleteArchiveDoneLabel().style.display='';window.setTimeout(Function.createDelegate(this,function(){
this.$D.get_deleteArchiveDoneLabel().style.display='none';}),2000);}}},$2B:function($p0,$p1){if($p1!=null){var $0=$p1;this.$2.getMoreInfo($0.roomGuid);}},$2C:function($p0,$p1){if($p1!=null){var $0=$p1;this.$2F(true);if(this.$3[$0.roomGuid]!=null){var $1=this.$3[$0.roomGuid];if(!$1.get_selected()){return;}$1.storeMoreInfoHtmlAndShowMoreInfo($0.moreInfoHtml);}}},$2D:function($p0){this.$2F(true);if(this.get_$16()!=null&&!this.get_$16().get_moreInfoVisible()){this.get_$16().showMoreInfo(false);}$p0.preventDefault();},$2E:function($p0){this.$2F(true);$p0.preventDefault();},$2F:function($p0){if(this.$C){this.$C=false;this.$D.get_wrongSessionHolder().style.display='none';this.$D.get_timeoutHolder().style.display='none';if($p0&&this.$18.length>0){this.set_$16(this.$3[this.$18]);}this.$2.resumeAfterPause();}},$30:function($p0,$p1){var $0=$p1;if($0.roomState==null){return;}for(var $1=0;$1<$0.roomState.length;$1++){var $2=$0.roomState[$1];var $3=this.$3[$2.guid];if($3!=null){var $4=$3;$4.updateStatsAfterUnPause($2);}}},changePhoto:function(newRoomGuid){this.$2F(false);var $0=this.$3[newRoomGuid];if($0==null){this.$2.switchPhotoRoom(newRoomGuid);}else{var $1=this.$32(newRoomGuid);var $2=$0;if($1){this.$19($2,false);}}},$31:function($p0){var $0=this.$3[$p0];$0.prepareForRemoval();delete this.$3[$p0];var $1=[];for(var $2=0;$2<this.$4.length;$2++){if($p0!==this.$4[$2]){$1[$1.length]=this.$4[$2];}}this.$4=$1;},$32:function($p0){var $0=false;var $dict1=this.$3;for(var $key2 in $dict1){var $1={key:$key2,value:$dict1[$key2]};var $2=$1.value;if($2.isPhotoChatRoom&&$2.get_guest()&&$2.guid!==$p0&&!$2.get_pinned()){if($2.get_selected()){$0=true;}this.$31($2.guid);}}return $0;},$33:function($p0,$p1){var $0=$p1;var $1=this.$32($0.roomStub.guid);var $2=this.$3[$0.roomStub.guid];if($2==null){var $3=new SpottedScript.Controls.ChatClient.Room(this,this.$D);$3.initialiseFromStub($0.roomStub,($0.roomStub.isPrivateChatRoom)?this.$D.get_roomPrivateList():($0.roomStub.guest)?this.$D.get_roomGuestList():this.$D.get_roomList(),this.$5);this.$14($3);this.$3[$3.guid]=$3;this.$4[this.$4.length]=$3.guid;$3.setListOrder(this.$4.length-1);if($1){this.$19($3,false);}this.$15();this.$37();return false;}else{var $4=$2;if($1){this.$19($4,false);}return true;}},pinNewRoom:function(newRoomGuid){this.$2F(false);this.$D.get_tabsChatLink().focus();var $0=this.$3[newRoomGuid];if($0==null){this.$2.pinRoom(newRoomGuid);}else{var $1=$0;if(!$1.get_pinned()){$1.set_pinned(true);}this.set_$16($1);}},$34:function($p0,$p1){var $0=$p1;if($0.pinned){this.$2.rePinRoom($0.roomGuid);}else{this.$2.unPinRoom($0.roomGuid);}},$35:function($p0,$p1){var $0=$p1;this.$2.starRoom($0.roomGuid,$0.starred);},$36:function($p0,$p1){var $0=$p1;var $1=this.$3[$0.roomGuid];if($1!=null&&$1.get_guest()){$1.removeFromRoomsList();$1.addToRoomsList((!$1.get_pinned())?this.$D.get_roomGuestList():($1.isPrivateChatRoom)?this.$D.get_roomPrivateList():this.$D.get_roomList());$1.updateUIAfterGuestPinAction();}this.$37();},$37:function(){var $0=false;var $1=false;var $dict1=this.$3;for(var $key2 in $dict1){var $2={key:$key2,value:$dict1[$key2]};var $3=$2.value;if($3.get_guest()&&!$3.get_pinned()){$0=true;}if($3.isPrivateChatRoom&&$3.get_pinned()){$1=true;}if($0&&$1){break;}}this.$3A($1);this.$39($0);},$38:function($p0,$p1){var $0=$p1;var $1=this.$3[$0.roomStub.guid];if($1==null){var $2=new SpottedScript.Controls.ChatClient.Room(this,this.$D);$2.initialiseFromStub($0.roomStub,($0.roomStub.guest)?this.$D.get_roomGuestList():($0.roomStub.isPrivateChatRoom)?this.$D.get_roomPrivateList():this.$D.get_roomList(),this.$5);this.$14($2);this.$3[$2.guid]=$2;this.$4[this.$4.length]=$2.guid;$2.setListOrder(this.$4.length-1);this.set_$16($2);this.$15();if($0.roomStub.guest){this.$39(true);}else if($0.roomStub.isPrivateChatRoom){this.$3A(true);}return false;}else{var $3=$1;if(!$3.get_pinned()){$3.set_pinned(true);}this.set_$16($3);return true;}},$39:function($p0){this.$D.get_roomGuestListDivider().style.display=($p0)?'':'none';this.$D.get_roomGuestList().style.display=($p0)?'':'none';},$3A:function($p0){this.$D.get_roomPrivateList().style.display=($p0)?'':'none';},$3B:function($p0){this.$6=$p0.keyCode;if($p0.keyCode===27){this.$2F(true);this.$D.get_textBox().value='';}else if($p0.keyCode===13){if(this.get_$16().get_guest()&&!this.get_$16().get_pinned()){this.get_$16().set_pinned(true);}if(this.$D.get_textBox().value.trim().length>0){this.$2F(true);WhenLoggedIn(Function.createDelegate(this,function(){
this.$2.sendMessage(this.$D.get_textBox().value,this.$17);this.$D.get_textBox().value='';}));}else{this.$2F(true);}if(!this.get_$16().get_pinned()){this.get_$16().set_pinned(true);}$p0.preventDefault();}},$3C:function($p0){if($p0.keyCode===38||$p0.keyCode===40){var $0=this.$26();var $1=null;var $2=0;while(($2<=this.$4.length+1)&&($1==null||!$1.get_pinned()||$1.guid===this.$A)){if($p0.keyCode===38){if($0===0){$0=this.$4.length;}$0--;}else if($p0.keyCode===40){if($0===this.$4.length-1){$0=-1;}$0++;}$1=this.$3[this.$4[$0].toString()];$2++;}this.set_$16($1);this.$2F(true);$p0.preventDefault();}},$3D:function($p0){if(this.$6===13){$p0.preventDefault();}},$3E:false,$3F:function($p0){if(!this.$41(this.$D.get_textBox(),'readonly')){this.hasFocus=true;this.$3E=false;if(this.$D.get_textBox().value==='Enter your message here...'){this.$D.get_textBox().value='';}this.$D.get_textBox().className='ChatClientTextBox';}},$40:function($p0){if(!this.$41(this.$D.get_textBox(),'readonly')){this.hasFocus=false;this.$3E=true;window.setTimeout(Function.createDelegate(this,this.$42),50);}},$41:function($p0,$p1){var $0=null;try{$0=$p0.attributes.getNamedItem($p1);}catch($1){return false;}if($0==null){return false;}try{if(!$0.specified){return false;}}catch($2){return false;}return true;},$42:function(){if(this.$D.get_textBox().value===''&&this.$3E){this.$D.get_textBox().value='Enter your message here...';this.$D.get_textBox().className='ChatClientTextBoxWatermark';}},$43:function(){this.$3E=false;},$44:function($p0){this.hasFocus=true;},$45:function($p0){this.hasFocus=false;},$46:null,$47:function($p0,$p1){if(this.$46!=null){this.$46.style.display='none';}},$48:function($p0,$p1){if(this.$D.get_textBox().style.display===''){if(this.$46==null){this.$46=document.createElement('img');this.$46.src='/gfx/autocomplete-loading.gif';this.$46.style.height='16px';this.$46.style.width='16px';this.$46.style.position='absolute';this.$46.style.zIndex=200;document.body.appendChild(this.$46);}var $0=jQuery(this.$D.get_textBox()).offset();this.$46.style.left=($0.left+this.$D.get_textBox().clientWidth-20)+'px';this.$46.style.top=($0.top+2)+'px';this.$46.style.display='';}},$49:function($p0){if(this.$3[this.$7]!=null){try{var $0=new SpottedScript.Controls.ChatClient.Items.Note($p0.replace('<','&lt;'),this,this.$7,0);(this.$3[this.$7]).addItem($0,null);(this.$3[this.$7]).finaliseRequest(1);}catch($1){var $2=new SpottedScript.Controls.ChatClient.Items.Note('<small>NULL</small>',this,this.$7,0);(this.$3[this.$7]).addItem($2,null);(this.$3[this.$7]).finaliseRequest(1);}}},$4A:function($p0,$p1){var $0=$p1;this.$49($0.html);},$4B:function($p0){var $0=0;var $dict1=$0;for(var $key2 in $dict1){var $1={key:$key2,value:$dict1[$key2]};this.$49($1.key+': '+$1.value.toString()+'<br /><br />');}}}
function chatClientPinRoom(roomGuid,transferSelector,transfer){SpottedScript.Controls.ChatClient.Controller.instance.pinNewRoom(roomGuid);if(transfer){try{var $0={};$0['to']='#ChatClient_MessagesMain';jQuery(transferSelector).effect('transfer',$0,500,null);}catch($1){}}}
function chatClientChangePhoto(photoRoomGuid){SpottedScript.Controls.ChatClient.Controller.instance.changePhoto(photoRoomGuid);}
SpottedScript.Controls.ChatClient.Room=function(parent,view){this.$0=parent;this.$D=[];this.$15=parent.loggedIn;this.$C=false;this.$11=false;this.$12=false;this.$E=document.createElement('div');this.$E.style.display='none';view.get_messageList().appendChild(this.$E);this.$F=document.createElement('div');this.$E.appendChild(this.$F);this.$10=document.createElement('div');this.$10.className='ChatClientMessageListHiddenHolder';view.get_messageList().appendChild(this.$10);this.requestIndex=0;}
SpottedScript.Controls.ChatClient.Room.prototype={$0:null,$1:null,$2:null,$3:null,$4:null,$5:null,$6:null,$7:null,$8:null,guid:null,name:null,url:null,pinable:false,starrable:false,readOnly:false,$9:null,$A:null,$B:null,$C:false,$D:null,$E:null,$F:null,$10:null,$11:false,$12:false,roomPinAction:null,roomStarAction:null,guestRoomPinAction:null,getMoreInfoHtml:null,getArchiveItems:null,requestIndex:0,isPhotoChatRoom:false,isPrivateChatRoom:false,isNewPhotoAlertsRoom:false,presence:0,icon:null,$13:null,$14:null,$15:false,$16:false,$17:0,$18:false,$19:null,$1A:null,$1B:null,$1C:null,$1D:false,$1E:null,$1F:null,$20:null,$21:null,$22:null,$23:null,$24:null,$25:false,$26:false,$27:false,$28:false,$29:false,get_selected:function(){return this.$A.selected;},set_selected:function(value){if(this.$A.selected!==value){this.$A.selected=value;if(this.$A.selected){this.$2A();if(!this.$26||(this.$25&&!this.$27)){this.$3C();}else{this.$3F();}if(this.$16){this.$37();}}else{this.$38=false;}this.$41();}return value;},$2A:function(){this.set_$31(this.get_$30());this.set_$2E(0);},get_pinned:function(){if(this.pinable){return this.$2B;}else{return true;}},set_pinned:function(value){if(this.pinable){if(this.$2B!==value){this.$2B=value;if(this.roomPinAction!=null){this.roomPinAction(this,new SpottedScript.Controls.ChatClient.PinActionEventArgs(this.guid,this.$2B));}if(this.get_guest()){if(this.guestRoomPinAction!=null){this.guestRoomPinAction(this,new SpottedScript.Controls.ChatClient.PinActionEventArgs(this.guid,this.$2B));}}if(this.$2B){this.requestIndex=0;}else{this.$2C=this.$2D;}if(!this.$2B&&!this.get_guest()){this.clearItems();}this.$41();}}return value;},$2B:false,get_starred:function(){return this.$2C;},set_starred:function(value){if(this.$2C!==value){this.$2C=value;if(this.roomStarAction!=null){this.roomStarAction(this,new SpottedScript.Controls.ChatClient.StarActionEventArgs(this.guid,this.$2C));}this.$41();}return value;},$2C:false,$2D:false,get_guest:function(){return this.$A.guest;},set_guest:function(value){this.$A.guest=value;return value;},get_$2E:function(){return this.$A.newMessages;},set_$2E:function($p0){this.$A.newMessages=$p0;return $p0;},get_$2F:function(){return this.$A.totalMessages;},set_$2F:function($p0){this.$A.totalMessages=$p0;return $p0;},get_$30:function(){return this.$A.latestItem;},set_$30:function($p0){this.$A.latestItem=$p0;return $p0;},get_$31:function(){return this.$A.latestItemSeen;},set_$31:function($p0){this.$A.latestItemSeen=$p0;return $p0;},get_$32:function(){return this.$A.latestItemOld;},set_$32:function($p0){this.$A.latestItemOld=$p0;return $p0;},get_itemCount:function(){return (this.$D==null)?0:this.$D.length;},initialiseFromElement:function(e,controllerStateStore){this.guid=e.attributes.getNamedItem('roomGuid').value;this.name=e.attributes.getNamedItem('roomName').value;this.url=e.attributes.getNamedItem('roomUrl').value;this.pinable=Boolean.parse(e.attributes.getNamedItem('roomPinable').value);this.$2B=Boolean.parse(e.attributes.getNamedItem('roomPinned').value);this.$2C=Boolean.parse(e.attributes.getNamedItem('roomStarred').value);this.starrable=Boolean.parse(e.attributes.getNamedItem('roomStarrable').value);this.$2D=Boolean.parse(e.attributes.getNamedItem('roomIsStarredByDefault').value);this.readOnly=Boolean.parse(e.attributes.getNamedItem('roomReadOnly').value);this.isPhotoChatRoom=Boolean.parse(e.attributes.getNamedItem('roomIsPhotoChatRoom').value);this.isPrivateChatRoom=Boolean.parse(e.attributes.getNamedItem('roomIsPrivateChatRoom').value);this.isNewPhotoAlertsRoom=Boolean.parse(e.attributes.getNamedItem('roomIsNewPhotoAlertsRoom').value);this.presence=Number.parseInvariant(e.attributes.getNamedItem('roomPresence').value);this.icon=e.attributes.getNamedItem('roomIcon').value;this.$13=e.attributes.getNamedItem('roomTokenDateTimeTicks').value;this.$14=e.attributes.getNamedItem('roomToken').value;this.$26=Boolean.parse(e.attributes.getNamedItem('roomHasArchive').value);this.$28=Boolean.parse(e.attributes.getNamedItem('roomHiddenFromRoomList').value);this.$29=Boolean.parse(e.attributes.getNamedItem('roomisStreamRoom').value);this.$A=new SpottedScript.Controls.ChatClient.Shared.StateStub();this.$A.initialise(this.guid,Boolean.parse(e.attributes.getNamedItem('roomSelected').value),Boolean.parse(e.attributes.getNamedItem('roomGuest').value),Number.parseInvariant(e.attributes.getNamedItem('roomNewMessages').value),Number.parseInvariant(e.attributes.getNamedItem('roomTotalMessages').value),e.attributes.getNamedItem('roomLatestItem').value,e.attributes.getNamedItem('roomLatestItemSeen').value,e.attributes.getNamedItem('roomLatestItemOld').value,Number.parseInvariant(e.attributes.getNamedItem('roomListOrder').value),this.$13,this.$14);this.$34(controllerStateStore,this.$A);this.$9=new SpottedScript.Controls.ChatClient.Shared.RoomStub(this.$0.clientID,this.guid,this.name,this.url,this.get_pinned(),this.get_starred(),this.$2D,this.pinable,this.starrable,this.get_selected(),this.get_guest(),this.get_$2E(),this.get_$2F(),this.get_$30(),this.get_$31(),this.get_$32(),this.readOnly,this.$A.listOrder,this.isPhotoChatRoom,this.isPrivateChatRoom,this.isNewPhotoAlertsRoom,this.presence,this.icon,this.$13,this.$14,this.$26,this.$28,this.$29);this.$B=new SpottedScript.Controls.ChatClient.Shared.RoomHtml(this.$9,this.$15);this.initialiseElements('');this.$33();},initialiseFromStub:function(roomStub,roomList,controllerStateStore){this.$9=roomStub;this.guid=this.$9.guid;this.name=this.$9.name;this.url=this.$9.url;this.pinable=this.$9.pinable;this.$2B=this.$9.pinned;this.$2C=this.$9.starred;this.starrable=this.$9.starrable;this.$2D=this.$9.isStarredByDefault;this.readOnly=this.$9.readOnly;this.isPhotoChatRoom=this.$9.isPhotoChatRoom;this.isPrivateChatRoom=this.$9.isPrivateChatRoom;this.isNewPhotoAlertsRoom=this.$9.isNewPhotoAlertsRoom;this.presence=this.$9.presence;this.$13=this.$9.tokenDateTimeTicks;this.$14=this.$9.token;this.$26=this.$9.hasArchive;this.$A=new SpottedScript.Controls.ChatClient.Shared.StateStub();this.$A.initialise(this.$9.guid,this.$9.selected,this.$9.guest,this.$9.newMessages,this.$9.totalMessages,this.$9.latestItem,this.$9.latestItemSeen,this.$9.latestItemOld,this.$9.listOrder,this.$9.tokenDateTimeTicks,this.$9.token);this.$34(controllerStateStore,this.$A);this.$B=new SpottedScript.Controls.ChatClient.Shared.RoomHtml(this.$9,this.$15);var $0=roomStub.parentClientID+'_Room_'+this.guid+'_Outer';var $1=document.createElement('span');$1.id=$0;$1.innerHTML=this.$B.toHtml();roomList.appendChild($1.firstChild);this.initialiseElements($0);this.$33();},$33:function(){if(this.isNewPhotoAlertsRoom){this.$16=true;this.$17=10;}else{this.$16=false;this.$17=0;}},$34:function($p0,$p1){for(var $0=0;$0<$p0.length;$0++){var $1=$p0[$0];if($1.guid===$p1.guid){return;}}$p0[$p0.length]=$p1;},removeFromRoomsList:function(){if(this.$1!=null){this.$1.parentNode.removeChild(this.$1);}else{this.$2.parentNode.removeChild(this.$2);}},addToRoomsList:function(parent){parent.appendChild(this.$2);},prepareForRemoval:function(){this.removeFromRoomsList();this.$E.parentNode.removeChild(this.$E);this.$10.parentNode.removeChild(this.$10);},setListOrder:function(listOrder){this.$A.listOrder=listOrder;},updateUIAfterGuestPinAction:function(){this.$41();},addItem:function(item,itemTracker){if(this.get_guest()&&!item.fromGuestRefresh){return false;}if(!this.get_guest()&&!this.get_pinned()){return false;}this.set_$30(item.guid);if(SpottedScript.Controls.ChatClient.Items.Html.isInstanceOfType(item)){this.$24=item;if(!this.$29){if(SpottedScript.Controls.ChatClient.Items.Newable.isInstanceOfType(item)){this.$11=true;}if(item.serverRequestIndex>0){if(SpottedScript.Controls.ChatClient.Items.Newable.isInstanceOfType(item)){(item).set_isInNewSection(true);}}}else{if(SpottedScript.Controls.ChatClient.Items.Newable.isInstanceOfType(item)){(item).set_isInNewSection(false);}}if(!this.$16){this.$35(item,true);}if(itemTracker!=null){if(itemTracker[this.guid]==null){itemTracker[this.guid]=[];}var $0=itemTracker[this.guid];$0[$0.length]=item;}if(this.$39&&this.get_moreInfoVisible()){this.hideMoreInfo(false);}}else if(SpottedScript.Controls.ChatClient.Items.TopPhoto.isInstanceOfType(item)){this.$18=true;this.$19=item;this.$41();}this.$D[this.$D.length]=item;return true;},finaliseRequest:function(serverRequestIndex){if(this.$16&&this.get_selected()){this.$37();}if(serverRequestIndex===0||this.requestIndex===0){if(this.get_$31()!==this.get_$30()){this.set_$32(this.get_$31());if(this.get_selectedAndMessagesVisible()){this.set_$31(this.get_$30());}}}else{if(this.get_selectedAndMessagesVisible()){this.set_$32(this.get_$31());this.set_$31(this.get_$30());}else{if(this.get_$32()!==this.get_$31()){this.set_$32(this.get_$31());}}}if(serverRequestIndex===0&&this.get_selected()){if(!this.$26||(this.$25&&!this.$27)){this.$3C();}else{this.$3F();}}if(this.$24!=null){if(SpottedScript.Controls.ChatClient.Items.Message.isInstanceOfType(this.$24)){var $0=this.$24;this.$1D=true;this.$1E=$0.anyChatPic;this.$1F=$0.stmuParams;this.$20='/members/'+$0.nickName.toLowerCase();}else{this.$1D=false;}}else{this.$1D=false;}this.$40();this.$41();this.requestIndex++;},$35:function($p0,$p1){var $0=document.createElement('span');$0.innerHTML=($p0).toHtml();var $1=(this.$29)?this.$0.streamList:this.$F;if($1.hasChildNodes()&&$p1){$1.insertBefore($0,$1.childNodes[0]);}else{$1.appendChild($0);}($p0).initialiseElements();},$36:null,$37:function(){if(this.$36!==this.get_$30()){this.$36=this.get_$30();this.$F.innerHTML='';var $0=0;for(var $1=this.$D.length-1;$1>=0;$1--){var $2=this.$D[$1];if(SpottedScript.Controls.ChatClient.Items.Html.isInstanceOfType($2)){$0++;this.$35($2,false);if(this.$17>0&&$0>=this.$17){break;}}}}},clearItems:function(){this.$D=[];this.$F.innerHTML='';this.$1D=false;this.$41();},get_selectedAndMessagesVisible:function(){return this.get_selected()&&!this.get_moreInfoVisible();},get_moreInfoVisible:function(){return this.$38;},$38:false,showMoreInfo:function(hideMoreInfoOnNextReceivedItem){this.$39=hideMoreInfoOnNextReceivedItem;if(this.$10.innerHTML.length>0){this.$38=true;this.$41();}else{if(this.getMoreInfoHtml!=null){this.getMoreInfoHtml(this,new SpottedScript.Controls.ChatClient.RoomGuidEventArgs(this.guid));}}},$39:false,storeMoreInfoHtmlAndShowMoreInfo:function(moreInfoHtml){if(moreInfoHtml.length>0){this.$10.innerHTML=moreInfoHtml;this.$38=true;this.$41();}},hideMoreInfo:function(resetItems){this.$38=false;if(this.get_selected()&&resetItems){this.$2A();}this.$41();},$3A:0,$3B:function($p0){if(this.get_selected()&&this.get_itemCount()===0&&!this.get_moreInfoVisible()&&this.$3A===$p0){this.showMoreInfo(true);}},$3C:function(){this.$3A=Math.floor(Math.random()*10000);window.setTimeout(Function.createDelegate(this,function(){
this.$3B(this.$3A);}),500);},showArchiveItems:function(itemsJson){var $0=0;this.$25=true;if(itemsJson.length>0){var $1=eval(' [ '+itemsJson+' ] ');var $2=[];var $3=null;var $4=null;for(var $5=0;$5<$1.length;$5++){var $6=false;for(var $7=0;$7<this.$D.length;$7++){if(this.$D[$7].guid===$1[$5].guid){$6=true;break;}}if(!$6){var $8=SpottedScript.Controls.ChatClient.Items.Item.create($1[$5],this.$0,this.requestIndex,false,1);if(SpottedScript.Controls.ChatClient.Items.Html.isInstanceOfType($8)){if($0===0){var $9=document.createElement('div');$9.className='ChatClientArchiveHeading';$9.innerHTML='Archived messages:';this.$F.appendChild($9);}this.$27=true;$0++;this.$35($8,false);if(SpottedScript.Controls.ChatClient.Items.Newable.isInstanceOfType($8)){if($3==null){$3=$8;}$4=$8;}}}}if($3!=null){$3.updateClassModifiersAllAtOnce(true,false,false);}if($4!=null){$4.updateClassModifiersAllAtOnce(false,true,false);}}if($0===0&&this.get_selected()&&this.get_itemCount()===0&&!this.get_moreInfoVisible()){this.showMoreInfo(true);}},getArchiveItemsNow:function(){if(this.$25||!this.$26){return;}if(this.getArchiveItems!=null){this.getArchiveItems(this,new SpottedScript.Controls.ChatClient.RoomGuidEventArgs(this.guid));}},$3D:0,$3E:function($p0){if(this.$25||!this.$26){return;}if(this.get_selected()&&this.get_itemCount()<20&&this.$3D===$p0){this.getArchiveItemsNow();}},$3F:function(){if(this.$25||!this.$26){return;}this.$3D=Math.floor(Math.random()*10000);window.setTimeout(Function.createDelegate(this,function(){
this.$3E(this.$3D);}),500);},$40:function(){var $0=0;if(this.$D.length>0&&this.$11){var $1=0;var $2=-1;var $3=-1;var $4=false;var $5=false;var $6=false;var $7=false;for(var $8=this.$D.length-1;$8>=0;$8--){if(this.$D[$8].guid===this.get_$32()){$6=true;}if(this.$D[$8].guid===this.get_$31()){$7=true;}if(SpottedScript.Controls.ChatClient.Items.Newable.isInstanceOfType(this.$D[$8])){var $9=this.$D[$8];var $A=false;var $B=false;var $C=false;if($1===0){$A=true;}$2=$8;if(!$7){$0++;}if(!$6){$C=true;$3=$8;$4=true;}else{$C=false;if($4){$A=true;}$4=false;if(!$9.get_isInNewSection()){$5=true;}}$9.updateClassModifiersAllAtOnce($A,$B,$C);$1++;if(this.$12&&$5){break;}}}if(!this.$12&&$2>-1){(this.$D[$2]).set_isBottomOfSection(true);}if($3>-1){(this.$D[$3]).set_isBottomOfSection(true);}this.$12=true;this.$11=false;}if($0!==this.get_$2E()||this.get_$2F()!==this.$D.length){this.set_$2F(this.$D.length);this.set_$2E($0);this.$41();}},initialiseElements:function(outerClientID){if(outerClientID.length>0){this.$1=document.getElementById(outerClientID);}this.$2=document.getElementById(this.$B.clientID);this.$3=document.getElementById(this.$B.linkID);this.$4=document.getElementById(this.$B.crossID);this.$5=document.getElementById(this.$B.presenceID);this.$6=document.getElementById(this.$B.totalID);this.$7=document.getElementById(this.$B.statsSeperatorID);this.$8=document.getElementById(this.$B.unreadID);this.$C=true;this.$41();},$41:function(){this.$42();this.$43();this.$44();this.$45();this.$46();this.$47();this.$48();},$42:function(){if(this.$C){if(this.$18){if(this.$1A==null){this.$1A=document.createElement('div');this.$1A.style.position='relative';this.$1A.style.width='280px';this.$1A.style.height='120px';this.$E.insertBefore(this.$1A,this.$E.childNodes[0]);this.$1C=document.createElement('a');this.$1C.style.position='absolute';this.$1C.style.top='9px';this.$1C.style.left='96px';this.$1B=document.createElement('img');this.$1B.className='BorderBlack All';this.$1B.style.width='100px';this.$1B.style.height='100px';this.$1C.appendChild(this.$1B);this.$1A.appendChild(this.$1C);var $0=document.createElement('span');$0.style.textAlign='right';$0.innerHTML='<small><a href=\"/pages/frontpagephotos\">Get&nbsp;yours<br />here!</a></small>';$0.style.position='absolute';$0.style.top='7px';$0.style.left='225px';$0.className='CleanLinks';this.$1A.appendChild($0);var $1=document.createElement('span');$1.style.textAlign='left';$1.innerHTML='<small>Chat&nbsp;about<br />this:</small>';$1.style.position='absolute';$1.style.top='7px';$1.style.left='5px';this.$1A.appendChild($1);}this.$1B.src=SpottedScript.Misc.getPicUrlFromGuid(this.$19.photoIcon);$clearHandlers(this.$1B);$addHandler(this.$1B,'mouseover',Function.createDelegate(this,function(){
eval('stm(\'<img src='+SpottedScript.Misc.getPicUrlFromGuid(this.$19.photoWeb)+' width='+this.$19.photoWebWidth.toString()+' height='+this.$19.photoWebHeight.toString()+' class=Block />\');');}));$addHandler(this.$1B,'mouseout',Function.createDelegate(this,function(){
htm();;}));this.$1C.href=this.$19.photoUrl;}}},$43:function(){if(this.$C){if(this.$18){if(this.$21!=null){this.$21.style.display='none';}return;}if(this.$1D){if(this.$21==null){this.$21=document.createElement('div');this.$E.insertBefore(this.$21,this.$E.childNodes[0]);this.$23=document.createElement('a');this.$22=document.createElement('img');this.$22.className='ChatClientChatPicImage';this.$23.appendChild(this.$22);this.$21.appendChild(this.$23);}this.$22.src=SpottedScript.Misc.getPicUrlFromGuid(this.$1E);$clearHandlers(this.$22);$addHandler(this.$22,'mouseover',Function.createDelegate(this,function(){
eval('stmun('+this.$1F+');');}));$addHandler(this.$22,'mouseout',Function.createDelegate(this,function(){
htm();;}));this.$23.href=this.$20;}else{if(this.$21!=null){this.$21.style.display='none';}}}},$44:function(){if(this.$C){this.$2.className=(!this.get_pinned())?'ChatClientRoomHolder ChatClientRoomUnpinned':(this.get_selected())?'ChatClientRoomHolder ChatClientRoomSelected':'ChatClientRoomHolder';}},$45:function(){if(this.$C){if(this.$15&&this.isPrivateChatRoom&&(this.presence===3||this.presence===2)){this.$5.setAttribute('src',(this.presence===3)?'/gfx/chat-chatting.png':'/gfx/chat-online.png');this.$5.style.width=(this.presence===3)?'13':'9';}}},$46:function(){if(this.$C){if(this.get_pinned()||this.get_guest()){this.$3.style.textDecoration='';this.$3.className=(this.get_selected())?'ChatClientRoomLink ChatClientRoomLinkSelected':((this.get_$2E()===0)?'ChatClientRoomLink ChatClientRoomLinkNoUnread':'ChatClientRoomLink');}else{this.$3.style.textDecoration='line-through';this.$3.className='ChatClientRoomLink ChatClientRoomLinkNoUnread';}}},$47:function(){if(this.$C){if(this.get_pinned()||this.get_guest()){this.$6.innerHTML=(this.get_$2F()>0)?this.get_$2F().toString():'&nbsp;';this.$8.innerHTML=(this.get_$2E()>0)?this.get_$2E().toString():'&nbsp;';this.$7.innerHTML=(this.get_$2E()>0)?'/':'&nbsp;';}else{this.$6.innerHTML='&nbsp;';this.$8.innerHTML='&nbsp;';this.$7.innerHTML='&nbsp;';}}},$48:function(){if(this.$E.style.display!==((this.get_selected()&&!this.get_moreInfoVisible())?'':'none')){this.$E.style.display=(this.get_selected()&&!this.get_moreInfoVisible())?'':'none';}if(this.$10.style.display!==((this.get_selected()&&this.get_moreInfoVisible())?'':'none')){this.$10.style.display=(this.get_selected()&&this.get_moreInfoVisible())?'':'none';}},updateStatsAfterUnPause:function(ss){this.set_$32(ss.latestItemOld);this.set_$31(ss.latestItemSeen);this.set_$2E(ss.newMessages);this.set_$2F(ss.totalMessages);this.$41();}}
SpottedScript.Controls.ChatClient.StarActionEventArgs=function(roomGuid,starred){SpottedScript.Controls.ChatClient.StarActionEventArgs.initializeBase(this);this.roomGuid=roomGuid;this.starred=starred;}
SpottedScript.Controls.ChatClient.StarActionEventArgs.prototype={roomGuid:null,starred:false}
SpottedScript.Controls.ChatClient.PinActionEventArgs=function(roomGuid,pinned){SpottedScript.Controls.ChatClient.PinActionEventArgs.initializeBase(this);this.roomGuid=roomGuid;this.pinned=pinned;}
SpottedScript.Controls.ChatClient.PinActionEventArgs.prototype={roomGuid:null,pinned:false}
SpottedScript.Controls.ChatClient.RoomGuidEventArgs=function(roomGuid){SpottedScript.Controls.ChatClient.RoomGuidEventArgs.initializeBase(this);this.roomGuid=roomGuid;}
SpottedScript.Controls.ChatClient.RoomGuidEventArgs.prototype={roomGuid:null}
SpottedScript.Controls.ChatClient.ServerClass=function(controller,sessionID,lastActionTicks,controllerRoomState){this.$1=sessionID;this.$2=lastActionTicks;this.$3='';this.$4=0;this.$0=controller;this.$7=[];this.$8=false;this.$9=false;this.$A=false;this.$B=false;this.$6=controllerRoomState;}
SpottedScript.Controls.ChatClient.ServerClass.prototype={$0:null,$1:0,$2:null,$3:null,$4:0,$5:0,$6:null,$7:null,$8:false,$9:false,$A:false,$B:false,gotItems:null,gotNoItems:null,gotWrongSessionException:null,gotTimeoutException:null,gotGenericException:null,gotRoom:null,gotNewPhotoRoom:null,gotMoreInfo:null,gotArchiveItems:null,gotRoomState:null,debugPrint:null,showLoadingIcon:null,hideLoadingIcon:null,doneDeleteArchive:null,start:function(){this.$E();window.setInterval(Function.createDelegate(this,this.$E),1000);},$C:function($p0){if(this.showLoadingIcon!=null){this.showLoadingIcon(this,null);}if(this.$7.length===0&&!this.$8){if(this.$9){this.$A=true;}this.$8=true;$p0.sendNow();this.$10('Processing request immediately');}else{Array.enqueue(this.$7,$p0);this.$10('Queueing request...');}},$D:function(){if(this.$7.length>0){if(this.showLoadingIcon!=null){this.showLoadingIcon(this,null);}var $0=Array.dequeue(this.$7);$0.sendNow();this.$10('Processing queued request ('+this.$7.length+' in the queue)');}else{if(this.hideLoadingIcon!=null){this.hideLoadingIcon(this,null);}this.$8=false;}},$E:function(){if(this.$B){return;}if(this.$7.length===0&&!this.$8&&!this.$9){this.$9=true;this.invokeRefreshChat();}if(this.$7.length===0&&!this.$8){if(this.hideLoadingIcon!=null){this.hideLoadingIcon(this,null);}}else{if(this.showLoadingIcon!=null){this.showLoadingIcon(this,null);}}},sendMessage:function(message,roomGuid){this.$B=false;var $0=new SpottedScript.Controls.ChatClient.SendMessageRequest(this,message,roomGuid);this.$C($0);},invokeSendMessage:function(message,roomGuid){Spotted.WebServices.ChatService.send(message,roomGuid,this.$3,this.$1,'',this.$6,Function.createDelegate(this,this.sendSuccessCallback),Function.createDelegate(this,this.sendFailureCallback),++this.$5,2500);},sendSuccessCallback:function(s,userContext,methodName){if(s!=null){this.$F(s.itemsJson,s.lastActionTicks,s.lastItemGuidReturned,methodName,s.guestRefreshStubs,'',false);}this.$D();},sendFailureCallback:function(error,userContext,methodName){if(this.gotGenericException!=null){this.gotGenericException(this,new SpottedScript.Controls.ChatClient.GotExceptionEventArgs(error,methodName));}this.$D();},deleteArchive:function(roomGuid){this.$B=false;var $0=new SpottedScript.Controls.ChatClient.DeleteArchiveRequest(this,roomGuid);this.$C($0);},invokeDeleteArchive:function(roomGuid){Spotted.WebServices.ChatService.deleteArchive(roomGuid,this.$3,this.$1,this.$2,'',this.$6,Function.createDelegate(this,this.deleteArchiveSuccessCallback),Function.createDelegate(this,this.deleteArchiveFailureCallback),++this.$5,5000);},deleteArchiveSuccessCallback:function(s,userContext,methodName){if(s!=null){if(this.doneDeleteArchive!=null){this.doneDeleteArchive(this,new SpottedScript.Controls.ChatClient.RoomGuidEventArgs(s.roomGuid));}this.$F(s.itemsJson,s.lastActionTicks,s.lastItemGuidReturned,methodName,s.guestRefreshStubs,'',false);}this.$D();},deleteArchiveFailureCallback:function(error,userContext,methodName){if(this.gotGenericException!=null){this.gotGenericException(this,new SpottedScript.Controls.ChatClient.GotExceptionEventArgs(error,methodName));}this.$D();},getArchiveItems:function(roomGuid){this.$B=false;var $0=new SpottedScript.Controls.ChatClient.ArchiveItemsRequest(this,roomGuid);this.$C($0);},invokeGetArchiveItems:function(roomGuid){Spotted.WebServices.ChatService.getArchive(roomGuid,this.$3,this.$1,this.$2,'',this.$6,Function.createDelegate(this,this.getArchiveItemsSuccessCallback),Function.createDelegate(this,this.getArchiveItemsFailureCallback),++this.$5,5000);},getArchiveItemsSuccessCallback:function(s,userContext,methodName){if(s!=null){this.$F(s.itemsJson,s.lastActionTicks,s.lastItemGuidReturned,methodName,s.guestRefreshStubs,'',false);if(this.gotArchiveItems!=null){this.gotArchiveItems(this,new SpottedScript.Controls.ChatClient.GotArchiveItemsEventArgs(s.roomGuid,s.archiveItems));}}this.$D();},getArchiveItemsFailureCallback:function(error,userContext,methodName){if(this.gotGenericException!=null){this.gotGenericException(this,new SpottedScript.Controls.ChatClient.GotExceptionEventArgs(error,methodName));}this.$D();},getMoreInfo:function(roomGuid){this.$B=false;var $0=new SpottedScript.Controls.ChatClient.MoreInfoRequest(this,roomGuid);this.$C($0);},invokeGetMoreInfo:function(roomGuid){Spotted.WebServices.ChatService.moreInfo(roomGuid,this.$3,this.$1,this.$2,'',this.$6,Function.createDelegate(this,this.getMoreInfoSuccessCallback),Function.createDelegate(this,this.getMoreInfoFailureCallback),++this.$5,2500);},getMoreInfoSuccessCallback:function(s,userContext,methodName){if(s!=null){if(this.gotMoreInfo!=null){this.gotMoreInfo(this,new SpottedScript.Controls.ChatClient.GotMoreInfoEventArgs(s.roomGuid,s.moreInfoHtml));}this.$F(s.itemsJson,s.lastActionTicks,s.lastItemGuidReturned,methodName,s.guestRefreshStubs,'',false);}this.$D();},getMoreInfoFailureCallback:function(error,userContext,methodName){if(this.gotGenericException!=null){this.gotGenericException(this,new SpottedScript.Controls.ChatClient.GotExceptionEventArgs(error,methodName));}this.$D();},switchPhotoRoom:function(newRoomGuid){this.$B=false;var $0=new SpottedScript.Controls.ChatClient.SwitchPhotoRoomRequest(this,newRoomGuid);this.$C($0);},invokeSwitchPhotoRoom:function(newRoomGuid){Spotted.WebServices.ChatService.switchPhotoRoom(this.$0.clientID,newRoomGuid,this.$3,this.$1,this.$2,'',this.$6,Function.createDelegate(this,this.switchPhotoRoomSuccessCallback),Function.createDelegate(this,this.switchPhotoRoomFailureCallback),++this.$5,2500);},switchPhotoRoomSuccessCallback:function(p,userContext,methodName){if(p!=null){var $0=false;if(this.gotNewPhotoRoom!=null){$0=this.gotNewPhotoRoom(this,new SpottedScript.Controls.ChatClient.GotRoomEventArgs(p.roomStub));}this.$F(p.itemsJson,p.lastActionTicks,p.lastItemGuidReturned,methodName,p.guestRefreshStubs,p.roomStub.guid,$0);}this.$D();},switchPhotoRoomFailureCallback:function(error,userContext,methodName){if(this.gotGenericException!=null){this.gotGenericException(this,new SpottedScript.Controls.ChatClient.GotExceptionEventArgs(error,methodName));}this.$D();},pinRoom:function(newRoomGuid){this.$B=false;var $0=new SpottedScript.Controls.ChatClient.PinRoomRequest(this,newRoomGuid);this.$C($0);},invokePinRoom:function(newRoomGuid){Spotted.WebServices.ChatService.pin(this.$0.clientID,newRoomGuid,this.$3,this.$1,this.$2,'',this.$6,Function.createDelegate(this,this.pinSuccessCallback),Function.createDelegate(this,this.pinFailureCallback),++this.$5,2500);},pinSuccessCallback:function(p,userContext,methodName){if(p!=null){var $0=false;if(this.gotRoom!=null){$0=this.gotRoom(this,new SpottedScript.Controls.ChatClient.GotRoomEventArgs(p.roomStub));}this.$F(p.itemsJson,p.lastActionTicks,p.lastItemGuidReturned,methodName,p.guestRefreshStubs,p.roomStub.guid,$0);}this.$D();},pinFailureCallback:function(error,userContext,methodName){if(this.gotGenericException!=null){this.gotGenericException(this,new SpottedScript.Controls.ChatClient.GotExceptionEventArgs(error,methodName));}this.$D();},unPinRoom:function(roomGuid){this.$B=false;var $0=new SpottedScript.Controls.ChatClient.UnPinRoomRequest(this,roomGuid);this.$C($0);},invokeUnPinRoom:function(roomGuid){Spotted.WebServices.ChatService.unPin(this.$0.clientID,roomGuid,this.$3,this.$1,this.$2,'',this.$6,Function.createDelegate(this,this.unPinSuccessCallback),Function.createDelegate(this,this.unPinFailureCallback),++this.$5,2500);},unPinSuccessCallback:function(u,userContext,methodName){this.$F(u.itemsJson,u.lastActionTicks,u.lastItemGuidReturned,methodName,u.guestRefreshStubs,u.roomGuid,true);this.$D();},unPinFailureCallback:function(error,userContext,methodName){if(this.gotGenericException!=null){this.gotGenericException(this,new SpottedScript.Controls.ChatClient.GotExceptionEventArgs(error,methodName));}this.$D();},starRoom:function(roomGuid,starred){this.$B=false;var $0=new SpottedScript.Controls.ChatClient.StarRoomRequest(this,roomGuid,starred);this.$C($0);},invokeStarRoom:function(roomGuid,starred){Spotted.WebServices.ChatService.star(this.$0.clientID,roomGuid,starred,this.$3,this.$1,this.$2,'',this.$6,Function.createDelegate(this,this.starSuccessCallback),Function.createDelegate(this,this.starFailureCallback),++this.$5,2500);},starSuccessCallback:function(r,userContext,methodName){this.$F(r.itemsJson,r.lastActionTicks,r.lastItemGuidReturned,methodName,r.guestRefreshStubs,'',false);this.$D();},starFailureCallback:function(error,userContext,methodName){if(this.gotGenericException!=null){this.gotGenericException(this,new SpottedScript.Controls.ChatClient.GotExceptionEventArgs(error,methodName));}this.$D();},rePinRoom:function(newRoomGuid){this.$B=false;var $0=new SpottedScript.Controls.ChatClient.RePinRoomRequest(this,newRoomGuid);this.$C($0);},invokeRePinRoom:function(roomGuid){Spotted.WebServices.ChatService.rePin(this.$0.clientID,roomGuid,this.$3,this.$1,this.$2,'',this.$6,Function.createDelegate(this,this.rePinSuccessCallback),Function.createDelegate(this,this.rePinFailureCallback),++this.$5,2500);},rePinSuccessCallback:function(r,userContext,methodName){this.$F(r.itemsJson,r.lastActionTicks,r.lastItemGuidReturned,methodName,r.guestRefreshStubs,'',false);this.$D();},rePinFailureCallback:function(error,userContext,methodName){if(this.gotGenericException!=null){this.gotGenericException(this,new SpottedScript.Controls.ChatClient.GotExceptionEventArgs(error,methodName));}this.$D();},storeUpdatedRoomListOrder:function(){this.$B=false;var $0=new SpottedScript.Controls.ChatClient.StoreUpdatedRoomListOrderRequest(this);this.$C($0);},invokeStoreUpdatedRoomListOrder:function(){Spotted.WebServices.ChatService.storeUpdatedRoomListOrder(this.$3,this.$1,this.$2,'',this.$6,Function.createDelegate(this,this.storeUpdatedRoomListOrderSuccessCallback),Function.createDelegate(this,this.storeUpdatedRoomListOrderFailureCallback),++this.$5,2500);},storeUpdatedRoomListOrderSuccessCallback:function(s,userContext,methodName){this.$F(s.itemsJson,s.lastActionTicks,s.lastItemGuidReturned,methodName,s.guestRefreshStubs,'',false);this.$D();},storeUpdatedRoomListOrderFailureCallback:function(error,userContext,methodName){if(this.gotGenericException!=null){this.gotGenericException(this,new SpottedScript.Controls.ChatClient.GotExceptionEventArgs(error,methodName));}this.$D();},resumeAfterPause:function(){this.$B=false;var $0=new SpottedScript.Controls.ChatClient.ForceResetSessionAndGetState(this);this.$C($0);},invokeForceResetSessionAndGetState:function(){Spotted.WebServices.ChatService.resetSessionAndGetState(this.$4===0,this.$3,this.$1,this.$2,'',this.$6,Function.createDelegate(this,this.forceResetSessionAndGetStateSuccessCallback),Function.createDelegate(this,this.forceResetSessionAndGetStateFailureCallback),++this.$5,2500);},forceResetSessionAndGetStateSuccessCallback:function(result,userContext,methodName){var $0=result;if(this.gotRoomState!=null){this.gotRoomState(this,new SpottedScript.Controls.ChatClient.GotRoomStateEventArgs($0.roomState));}this.$F($0.itemsJson,$0.lastActionTicks,$0.lastItemGuidReturned,methodName,$0.guestRefreshStubs,'',false);this.$D();},forceResetSessionAndGetStateFailureCallback:function(error,userContext,methodName){if(this.gotGenericException!=null){this.gotGenericException(this,new SpottedScript.Controls.ChatClient.GotExceptionEventArgs(error,methodName));}this.$D();},invokeRefreshChat:function(){Spotted.WebServices.ChatService.refresh(this.$4===0,this.$3,this.$1,this.$2,'',this.$6,Function.createDelegate(this,this.refreshSuccessCallback),Function.createDelegate(this,this.refreshFailureCallback),++this.$5,2500);},refreshSuccessCallback:function(result,userContext,methodName){if(!this.$A){var $0=result;this.$F($0.itemsJson,$0.lastActionTicks,$0.lastItemGuidReturned,methodName,$0.guestRefreshStubs,'',false);}else{this.$10('Cancelling periodic background refresh...');}this.$A=false;this.$9=false;},refreshFailureCallback:function(error,userContext,methodName){this.$A=false;this.$9=false;if(error.get_exceptionType().endsWith('+WrongSessionException')){this.$B=true;if(this.gotWrongSessionException!=null){this.gotWrongSessionException(this,new SpottedScript.Controls.ChatClient.GotExceptionEventArgs(error,methodName));}}else if(error.get_exceptionType().endsWith('+TimeoutException')){this.$B=true;if(this.gotTimeoutException!=null){this.gotTimeoutException(this,new SpottedScript.Controls.ChatClient.GotExceptionEventArgs(error,methodName));}}else{if(this.gotGenericException!=null){this.gotGenericException(this,new SpottedScript.Controls.ChatClient.GotExceptionEventArgs(error,methodName));}}},$F:function($p0,$p1,$p2,$p3,$p4,$p5,$p6){var $0=eval(' [ '+$p0+' ] ');var $1=[];for(var $3=0;$3<$0.length;$3++){if(!$p6||$0[$3].roomGuid!==$p5){var $4=SpottedScript.Controls.ChatClient.Items.Item.create($0[$3],this.$0,this.$4,false,1);$1[$1.length]=$4;}}var $2=$1;if($2.length>0&&$p2.length>0){this.$3=$p2;}if($p1.length>0){this.$2=$p1;}if($p4!=null){for(var $5=0;$5<$p4.length;$5++){var $6=$p4[$5];if($6.itemsJson.length>0){var $7=eval(' [ '+$6.itemsJson+' ] ');for(var $8=0;$8<$7.length;$8++){var $9=SpottedScript.Controls.ChatClient.Items.Item.create($7[$8],this.$0,this.$4,true,1);$2[$2.length]=$9;}if($6.lastItemGuidReturned.length>0){for(var $A=0;$A<this.$6.length;$A++){var $B=this.$6[$A];if($B.guid===$6.roomGuid){$B.latestItem=$6.lastItemGuidReturned;break;}}}}}}if($2.length>0){if(this.gotItems!=null){this.gotItems(this,new SpottedScript.Controls.ChatClient.GotItemsEventArgs($2,this.$4));}}else{if(this.gotNoItems!=null){this.gotNoItems(this,new SpottedScript.Controls.ChatClient.GotNoItemsEventArgs(this.$4));}}this.$4++;},$10:function($p0){if(this.debugPrint!=null){this.debugPrint(this,new SpottedScript.Controls.ChatClient.DebugPrintEventArgs($p0));}}}
SpottedScript.Controls.ChatClient.StoreUpdatedRoomListOrderRequest=function(parent){SpottedScript.Controls.ChatClient.StoreUpdatedRoomListOrderRequest.initializeBase(this);this.$0=parent;}
SpottedScript.Controls.ChatClient.StoreUpdatedRoomListOrderRequest.prototype={$0:null,sendNow:function(){this.$0.invokeStoreUpdatedRoomListOrder();}}
SpottedScript.Controls.ChatClient.SendMessageRequest=function(parent,message,roomGuid){SpottedScript.Controls.ChatClient.SendMessageRequest.initializeBase(this);this.$2=parent;this.$0=message;this.$1=roomGuid;}
SpottedScript.Controls.ChatClient.SendMessageRequest.prototype={$0:null,$1:null,$2:null,sendNow:function(){this.$2.invokeSendMessage(this.$0,this.$1);}}
SpottedScript.Controls.ChatClient.MoreInfoRequest=function(parent,roomGuid){SpottedScript.Controls.ChatClient.MoreInfoRequest.initializeBase(this);this.$1=parent;this.$0=roomGuid;}
SpottedScript.Controls.ChatClient.MoreInfoRequest.prototype={$0:null,$1:null,sendNow:function(){this.$1.invokeGetMoreInfo(this.$0);}}
SpottedScript.Controls.ChatClient.ArchiveItemsRequest=function(parent,roomGuid){SpottedScript.Controls.ChatClient.ArchiveItemsRequest.initializeBase(this);this.$1=parent;this.$0=roomGuid;}
SpottedScript.Controls.ChatClient.ArchiveItemsRequest.prototype={$0:null,$1:null,sendNow:function(){this.$1.invokeGetArchiveItems(this.$0);}}
SpottedScript.Controls.ChatClient.DeleteArchiveRequest=function(parent,roomGuid){SpottedScript.Controls.ChatClient.DeleteArchiveRequest.initializeBase(this);this.$1=parent;this.$0=roomGuid;}
SpottedScript.Controls.ChatClient.DeleteArchiveRequest.prototype={$0:null,$1:null,sendNow:function(){this.$1.invokeDeleteArchive(this.$0);}}
SpottedScript.Controls.ChatClient.UnPinRoomRequest=function(parent,roomGuid){SpottedScript.Controls.ChatClient.UnPinRoomRequest.initializeBase(this);this.$1=parent;this.$0=roomGuid;}
SpottedScript.Controls.ChatClient.UnPinRoomRequest.prototype={$0:null,$1:null,sendNow:function(){this.$1.invokeUnPinRoom(this.$0);}}
SpottedScript.Controls.ChatClient.PinRoomRequest=function(parent,newRoomGuid){SpottedScript.Controls.ChatClient.PinRoomRequest.initializeBase(this);this.$1=parent;this.$0=newRoomGuid;}
SpottedScript.Controls.ChatClient.PinRoomRequest.prototype={$0:null,$1:null,sendNow:function(){this.$1.invokePinRoom(this.$0);}}
SpottedScript.Controls.ChatClient.StarRoomRequest=function(parent,roomGuid,starred){SpottedScript.Controls.ChatClient.StarRoomRequest.initializeBase(this);this.$2=parent;this.$0=roomGuid;this.$1=starred;}
SpottedScript.Controls.ChatClient.StarRoomRequest.prototype={$0:null,$1:false,$2:null,sendNow:function(){this.$2.invokeStarRoom(this.$0,this.$1);}}
SpottedScript.Controls.ChatClient.SwitchPhotoRoomRequest=function(parent,newRoomGuid){SpottedScript.Controls.ChatClient.SwitchPhotoRoomRequest.initializeBase(this);this.$1=parent;this.$0=newRoomGuid;}
SpottedScript.Controls.ChatClient.SwitchPhotoRoomRequest.prototype={$0:null,$1:null,sendNow:function(){this.$1.invokeSwitchPhotoRoom(this.$0);}}
SpottedScript.Controls.ChatClient.RePinRoomRequest=function(parent,roomGuid){SpottedScript.Controls.ChatClient.RePinRoomRequest.initializeBase(this);this.$1=parent;this.$0=roomGuid;}
SpottedScript.Controls.ChatClient.RePinRoomRequest.prototype={$0:null,$1:null,sendNow:function(){this.$1.invokeRePinRoom(this.$0);}}
SpottedScript.Controls.ChatClient.ForceResetSessionAndGetState=function(parent){SpottedScript.Controls.ChatClient.ForceResetSessionAndGetState.initializeBase(this);this.$0=parent;}
SpottedScript.Controls.ChatClient.ForceResetSessionAndGetState.prototype={$0:null,sendNow:function(){this.$0.invokeForceResetSessionAndGetState();}}
SpottedScript.Controls.ChatClient.CriticalRequest=function(){}
SpottedScript.Controls.ChatClient.GotNoItemsEventArgs=function(serverRequestIndex){SpottedScript.Controls.ChatClient.GotNoItemsEventArgs.initializeBase(this);this.serverRequestIndex=serverRequestIndex;}
SpottedScript.Controls.ChatClient.GotNoItemsEventArgs.prototype={serverRequestIndex:0}
SpottedScript.Controls.ChatClient.GotMoreInfoEventArgs=function(roomGuid,moreInfoHtml){SpottedScript.Controls.ChatClient.GotMoreInfoEventArgs.initializeBase(this);this.roomGuid=roomGuid;this.moreInfoHtml=moreInfoHtml;}
SpottedScript.Controls.ChatClient.GotMoreInfoEventArgs.prototype={roomGuid:null,moreInfoHtml:null}
SpottedScript.Controls.ChatClient.GotArchiveItemsEventArgs=function(roomGuid,archiveItems){SpottedScript.Controls.ChatClient.GotArchiveItemsEventArgs.initializeBase(this);this.roomGuid=roomGuid;this.archiveItems=archiveItems;}
SpottedScript.Controls.ChatClient.GotArchiveItemsEventArgs.prototype={roomGuid:null,archiveItems:null}
SpottedScript.Controls.ChatClient.GotItemsEventArgs=function(items,serverRequestIndex){SpottedScript.Controls.ChatClient.GotItemsEventArgs.initializeBase(this);this.items=items;this.serverRequestIndex=serverRequestIndex;}
SpottedScript.Controls.ChatClient.GotItemsEventArgs.prototype={items:null,serverRequestIndex:0}
SpottedScript.Controls.ChatClient.GotRoomEventArgs=function(roomStub){SpottedScript.Controls.ChatClient.GotRoomEventArgs.initializeBase(this);this.roomStub=roomStub;}
SpottedScript.Controls.ChatClient.GotRoomEventArgs.prototype={roomStub:null}
SpottedScript.Controls.ChatClient.GotRoomStateEventArgs=function(roomState){SpottedScript.Controls.ChatClient.GotRoomStateEventArgs.initializeBase(this);this.roomState=roomState;}
SpottedScript.Controls.ChatClient.GotRoomStateEventArgs.prototype={roomState:null}
SpottedScript.Controls.ChatClient.GotExceptionEventArgs=function(error,method){SpottedScript.Controls.ChatClient.GotExceptionEventArgs.initializeBase(this);this.error=error;this.method=method;}
SpottedScript.Controls.ChatClient.GotExceptionEventArgs.prototype={error:null,method:null}
SpottedScript.Controls.ChatClient.DebugPrintEventArgs=function(html){SpottedScript.Controls.ChatClient.DebugPrintEventArgs.initializeBase(this);this.html=html;}
SpottedScript.Controls.ChatClient.DebugPrintEventArgs.prototype={html:null}
SpottedScript.Controls.ChatClient.View=function(clientId){this.clientId=clientId;}
SpottedScript.Controls.ChatClient.View.prototype={clientId:null,get_outerMain:function(){return document.getElementById(this.clientId+'_OuterMain');},get_tabsChatLink:function(){return document.getElementById(this.clientId+'_TabsChatLink');},get_tabChatHolder:function(){return document.getElementById(this.clientId+'_TabChatHolder');},get_roomsMain:function(){return document.getElementById(this.clientId+'_RoomsMain');},get_roomList:function(){return document.getElementById(this.clientId+'_RoomList');},get_privateChatDrop:function(){return document.getElementById(this.clientId+'_PrivateChatDrop');},get_roomPrivateListDivider:function(){return document.getElementById(this.clientId+'_RoomPrivateListDivider');},get_roomPrivateList:function(){return document.getElementById(this.clientId+'_RoomPrivateList');},get_roomGuestListDivider:function(){return document.getElementById(this.clientId+'_RoomGuestListDivider');},get_roomGuestList:function(){return document.getElementById(this.clientId+'_RoomGuestList');},get_privateChatDropMain:function(){return document.getElementById(this.clientId+'_PrivateChatDropMain');},get_messagesMain:function(){return document.getElementById(this.clientId+'_MessagesMain');},get_textBoxHolder:function(){return document.getElementById(this.clientId+'_TextBoxHolder');},get_textBox:function(){return document.getElementById(this.clientId+'_TextBox');},get_messageList:function(){return document.getElementById(this.clientId+'_MessageList');},get_wrongSessionHolder:function(){return document.getElementById(this.clientId+'_WrongSessionHolder');},get_wrongSessionResumeLink:function(){return document.getElementById(this.clientId+'_WrongSessionResumeLink');},get_timeoutHolder:function(){return document.getElementById(this.clientId+'_TimeoutHolder');},get_timeoutResumeLink:function(){return document.getElementById(this.clientId+'_TimeoutResumeLink');},get_deleteArchiveHolder:function(){return document.getElementById(this.clientId+'_DeleteArchiveHolder');},get_deleteArchiveAnchor:function(){return document.getElementById(this.clientId+'_DeleteArchiveAnchor');},get_deleteArchiveDoneLabel:function(){return document.getElementById(this.clientId+'_DeleteArchiveDoneLabel');},get_streamList:function(){return document.getElementById(this.clientId+'_StreamList');},get_popupsCheckBox:function(){return document.getElementById(this.clientId+'_PopupsCheckBox');},get_stickyCheckBox:function(){return document.getElementById(this.clientId+'_StickyCheckBox');},get_downlevelMain:function(){return document.getElementById(this.clientId+'_DownlevelMain');},get_initGo:function(){return document.getElementById(this.clientId+'_InitGo');},get_initUsrK:function(){return document.getElementById(this.clientId+'_InitUsrK');},get_initClientID:function(){return document.getElementById(this.clientId+'_InitClientID');},get_initLastActionTicks:function(){return document.getElementById(this.clientId+'_InitLastActionTicks');},get_initSystemMessagesRoomGuid:function(){return document.getElementById(this.clientId+'_InitSystemMessagesRoomGuid');},get_initInboxUpdatesRoomGuid:function(){return document.getElementById(this.clientId+'_InitInboxUpdatesRoomGuid');},get_initBuddyAlertsRoomGuid:function(){return document.getElementById(this.clientId+'_InitBuddyAlertsRoomGuid');},get_initBuddyStreamRoomGuid:function(){return document.getElementById(this.clientId+'_InitBuddyStreamRoomGuid');},get_initAnimatePopups:function(){return document.getElementById(this.clientId+'_InitAnimatePopups');},get_initTopPhoto:function(){return document.getElementById(this.clientId+'_InitTopPhoto');}}
Type.registerNamespace('SpottedScript.Controls.ChatClient.Shared');
SpottedScript.Controls.ChatClient.Shared.RoomType=function(){};SpottedScript.Controls.ChatClient.Shared.RoomType.prototype = {normal:1,inboxUpdates:2,newPhotosAll:3,newPhotosProSpotters:4,newPhotosSpotters:5,newPhotosBuddies:6,systemMessages:7,privateChat:8,privateChatRequestsBuddies:9,privateChatRequestsStrangers:10,randomChat:11,buddyAlerts:12,orphans:13,laughs:14,newVideosAll:15,publicStream:16,buddyStream:17,privateChatRequests:18}
SpottedScript.Controls.ChatClient.Shared.RoomType.registerEnum('SpottedScript.Controls.ChatClient.Shared.RoomType',false);SpottedScript.Controls.ChatClient.Shared.ItemType=function(){};SpottedScript.Controls.ChatClient.Shared.ItemType.prototype = {publicChatMessage:1,privateChatMessage:2,commentAlert:3,privateMessageAlert:4,laughAlert:5,loginAlert:6,photoAlert:7,logoutAlert:8,invite:9,groupNewsAlert:10,error:11,debug:12,commentChatMessage:13,buddyLaughAlert:14,topPhoto:15}
SpottedScript.Controls.ChatClient.Shared.ItemType.registerEnum('SpottedScript.Controls.ChatClient.Shared.ItemType',false);SpottedScript.Controls.ChatClient.Shared.PresenceState=function(){};SpottedScript.Controls.ChatClient.Shared.PresenceState.prototype = {none:0,offline:1,online:2,chatting:3}
SpottedScript.Controls.ChatClient.Shared.PresenceState.registerEnum('SpottedScript.Controls.ChatClient.Shared.PresenceState',false);SpottedScript.Controls.ChatClient.Shared.ArchiveStub=function(){SpottedScript.Controls.ChatClient.Shared.ArchiveStub.initializeBase(this);}
SpottedScript.Controls.ChatClient.Shared.ArchiveStub.prototype={roomGuid:null,archiveItems:null}
SpottedScript.Controls.ChatClient.Shared.DeleteArchiveStub=function(){SpottedScript.Controls.ChatClient.Shared.DeleteArchiveStub.initializeBase(this);}
SpottedScript.Controls.ChatClient.Shared.DeleteArchiveStub.prototype={roomGuid:null}
SpottedScript.Controls.ChatClient.Shared.TopPhotoStub=function(guid,type,dateTime,roomGuid,photoK,photoUrl,photoIcon,photoWeb,photoWebWidth,photoWebHeight,photoThumb,photoThumbWidth,photoThumbHeight){SpottedScript.Controls.ChatClient.Shared.TopPhotoStub.initializeBase(this,[guid,type,dateTime,roomGuid]);this.photoK=photoK;this.photoUrl=photoUrl;this.photoIcon=photoIcon;this.photoWeb=photoWeb;this.photoWebWidth=photoWebWidth;this.photoWebHeight=photoWebHeight;this.photoThumb=photoThumb;this.photoThumbWidth=photoThumbWidth;this.photoThumbHeight=photoThumbHeight;}
SpottedScript.Controls.ChatClient.Shared.TopPhotoStub.prototype={photoK:0,photoUrl:null,photoIcon:null,photoWeb:null,photoWebWidth:0,photoWebHeight:0,photoThumb:null,photoThumbWidth:0,photoThumbHeight:0}
SpottedScript.Controls.ChatClient.Shared.UnPinStub=function(){SpottedScript.Controls.ChatClient.Shared.UnPinStub.initializeBase(this);}
SpottedScript.Controls.ChatClient.Shared.UnPinStub.prototype={roomGuid:null}
SpottedScript.Controls.ChatClient.Shared.CommentMessageStub=function(guid,type,dateTime,roomGuid,nickName,stmuParams,usrK,pic,chatPic,text,pinRoomGuid,url,subject){SpottedScript.Controls.ChatClient.Shared.CommentMessageStub.initializeBase(this,[guid,type,dateTime,roomGuid,nickName,stmuParams,usrK,pic,chatPic,text,pinRoomGuid]);this.url=url;this.subject=subject;}
SpottedScript.Controls.ChatClient.Shared.CommentMessageStub.prototype={url:null,subject:null}
SpottedScript.Controls.ChatClient.Shared.MoreInfoStub=function(){SpottedScript.Controls.ChatClient.Shared.MoreInfoStub.initializeBase(this);}
SpottedScript.Controls.ChatClient.Shared.MoreInfoStub.prototype={roomGuid:null,moreInfoHtml:null}
SpottedScript.Controls.ChatClient.Shared.AlertStub=function(guid,type,dateTime,roomGuid,nickName,stmuParams,usrK,pic){SpottedScript.Controls.ChatClient.Shared.AlertStub.initializeBase(this,[guid,type,dateTime,roomGuid]);this.nickName=nickName;this.stmuParams=stmuParams;this.usrK=usrK;this.pic=pic;}
SpottedScript.Controls.ChatClient.Shared.AlertStub.prototype={nickName:null,stmuParams:null,usrK:0,pic:null}
SpottedScript.Controls.ChatClient.Shared.LaughStub=function(guid,type,dateTime,roomGuid,nickName,stmuParams,usrK,pic,chatPic,text,pinRoomGuid,url,subject){SpottedScript.Controls.ChatClient.Shared.LaughStub.initializeBase(this,[guid,type,dateTime,roomGuid,nickName,stmuParams,usrK,pic,chatPic,text,pinRoomGuid,url,subject]);}
SpottedScript.Controls.ChatClient.Shared.GuestRefreshStub=function(){}
SpottedScript.Controls.ChatClient.Shared.GuestRefreshStub.prototype={roomGuid:null,lastItemGuidReturned:null,itemsJson:null}
SpottedScript.Controls.ChatClient.Shared.GetStateStub=function(){SpottedScript.Controls.ChatClient.Shared.GetStateStub.initializeBase(this);}
SpottedScript.Controls.ChatClient.Shared.GetStateStub.prototype={roomState:null}
SpottedScript.Controls.ChatClient.Shared.PrivateStub=function(guid,type,dateTime,roomGuid,nickName,stmuParams,usrK,pic,chatPic,text,pinRoomGuid,buddy){SpottedScript.Controls.ChatClient.Shared.PrivateStub.initializeBase(this,[guid,type,dateTime,roomGuid,nickName,stmuParams,usrK,pic,chatPic,text,pinRoomGuid]);this.buddy=buddy;}
SpottedScript.Controls.ChatClient.Shared.PrivateStub.prototype={buddy:false}
SpottedScript.Controls.ChatClient.Shared.StateStub=function(){}
SpottedScript.Controls.ChatClient.Shared.StateStub.prototype={guid:null,selected:false,guest:false,newMessages:0,totalMessages:0,latestItem:null,latestItemOld:null,latestItemSeen:null,listOrder:0,tokenDateTimeTicks:null,token:null,initialise:function(guid,selected,guest,newMessages,totalMessages,latestItem,latestItemSeen,latestItemOld,listOrder,tokenDateTimeTicks,token){this.guid=guid;this.selected=selected;this.guest=guest;this.newMessages=newMessages;this.totalMessages=totalMessages;this.latestItem=latestItem;this.latestItemOld=latestItemOld;this.latestItemSeen=latestItemSeen;this.listOrder=listOrder;this.tokenDateTimeTicks=tokenDateTimeTicks;this.token=token;}}
SpottedScript.Controls.ChatClient.Shared.RoomHtml=function(roomStub,loggedIn){this.roomStub=roomStub;this.clientID=this.roomStub.parentClientID+'_Room_'+this.roomStub.guid;this.linkID=this.clientID+'_Link';this.presenceID=this.clientID+'_Presence';this.crossID=this.clientID+'_Cross';this.totalID=this.clientID+'_Total';this.statsSeperatorID=this.clientID+'_StatsSeperator';this.unreadID=this.clientID+'_Unread';this.$0=loggedIn;}
SpottedScript.Controls.ChatClient.Shared.RoomHtml.get_$1=function(){return SpottedScript.Misc.get_browserIsFirefox()&&SpottedScript.Misc.get_browserVersion()>=2&&SpottedScript.Misc.get_browserVersion()<3;}
SpottedScript.Controls.ChatClient.Shared.RoomHtml.get_$2=function(){return SpottedScript.Misc.get_browserIsIE();}
SpottedScript.Controls.ChatClient.Shared.RoomHtml.prototype={roomStub:null,clientID:null,linkID:null,presenceID:null,crossID:null,totalID:null,statsSeperatorID:null,unreadID:null,$0:false,toHtml:function(){var $0=new Spotted.System.Text.StringBuilder();this.appendHtml($0);return $0.toString();},appendHtml:function(sb){sb.append('<div');sb.appendAttribute('id',this.clientID);sb.appendAttribute('class',(this.roomStub.selected)?'ChatClientRoomHolder ChatClientRoomSelected':'ChatClientRoomHolder');sb.appendAttribute('roomGuid',this.roomStub.guid);sb.appendAttribute('roomName',this.roomStub.name);sb.appendAttribute('roomUrl',this.roomStub.url);sb.appendAttribute('roomPinned',this.roomStub.pinned.toString().toLowerCase());sb.appendAttribute('roomIsStarredByDefault',this.roomStub.isStarredByDefault.toString().toLowerCase());sb.appendAttribute('roomStarred',this.roomStub.starred.toString().toLowerCase());sb.appendAttribute('roomStarrable',this.roomStub.starrable.toString().toLowerCase());sb.appendAttribute('roomPinable',this.roomStub.pinable.toString().toLowerCase());sb.appendAttribute('roomSelected',this.roomStub.selected.toString().toLowerCase());sb.appendAttribute('roomGuest',this.roomStub.guest.toString().toLowerCase());sb.appendAttribute('roomNewMessages',this.roomStub.newMessages.toString());sb.appendAttribute('roomTotalMessages',this.roomStub.totalMessages.toString());sb.appendAttribute('roomLatestItem',this.roomStub.latestItem);sb.appendAttribute('roomLatestItemSeen',this.roomStub.latestItemSeen);sb.appendAttribute('roomLatestItemOld',this.roomStub.latestItemOld);sb.appendAttribute('roomReadOnly',this.roomStub.readOnly.toString().toLowerCase());sb.appendAttribute('roomListOrder',this.roomStub.listOrder.toString());sb.appendAttribute('roomIsPhotoChatRoom',this.roomStub.isPhotoChatRoom.toString().toLowerCase());sb.appendAttribute('roomIsPrivateChatRoom',this.roomStub.isPrivateChatRoom.toString().toLowerCase());sb.appendAttribute('roomIsNewPhotoAlertsRoom',this.roomStub.isNewPhotoAlertsRoom.toString().toLowerCase());sb.appendAttribute('roomPresence',(this.roomStub.presence).toString());sb.appendAttribute('roomIcon',this.roomStub.icon);sb.appendAttribute('roomTokenDateTimeTicks',this.roomStub.tokenDateTimeTicks);sb.appendAttribute('roomToken',this.roomStub.token);sb.appendAttribute('roomHasArchive',this.roomStub.hasArchive.toString().toLowerCase());if(this.roomStub.hiddenFromRoomList){sb.appendAttribute('style','display:none;');}sb.appendAttribute('roomHiddenFromRoomList',this.roomStub.hiddenFromRoomList.toString().toLowerCase());sb.appendAttribute('roomIsStreamRoom',this.roomStub.isStreamRoom.toString().toLowerCase());sb.append('>');sb.append('<div class=\"ChatClientRoomLinkHolder\">');sb.append('<span');sb.appendAttribute('id',this.linkID);sb.appendAttribute('class',(this.roomStub.selected)?'ChatClientRoomLink ChatClientRoomLinkSelected':((this.roomStub.newMessages===0)?'ChatClientRoomLink ChatClientRoomLinkNoUnread':'ChatClientRoomLink'));if(this.roomStub.icon.length>0){sb.appendAttribute('onmouseover','stma(\''+this.roomStub.icon+'\');');sb.appendAttribute('onmouseout','htm();');}sb.append('>');sb.append(this.roomStub.name);sb.append('</span>');if(this.roomStub.isPrivateChatRoom&&(this.roomStub.presence===2||this.roomStub.presence===3)){sb.append('<img');sb.appendAttribute('src',(this.roomStub.presence===3)?'/gfx/chat-chatting.png':'/gfx/chat-online.png');sb.appendAttribute('width',(this.roomStub.presence===3)?'13':'9');sb.appendAttribute('height','11');sb.appendAttribute('id',this.presenceID);sb.appendAttribute('onmouseover',(this.roomStub.presence===2)?'sttd(3);':'sttd(4);');sb.appendAttribute('onmouseout','htm();');sb.appendAttribute('class','ChatClientRoomPresence');sb.append(' />');}sb.append('</div>');sb.append('<div class=\"ChatClientRoomPinHolder\">');var $0=this.$0&&this.roomStub.pinable;sb.append('<img');sb.appendAttribute('id',this.crossID);sb.appendAttribute('src',($0)?'/gfx/chat-cross.png':'/gfx/1pix.gif');sb.append(' width=\"11\" height=\"11\"');sb.appendAttribute('class',($0)?'ChatClientRoomCross':'ChatClientRoomNoCross');if($0){sb.appendAttribute('onmouseover','sttd(1);');sb.appendAttribute('onmouseout','htm();');}sb.append(' />');sb.append('</div>');sb.append('<div class=\"ChatClientRoomStatsHolder\">');sb.append('<span class=\"ChatClientRoomUnreadHolder\"');sb.appendAttribute('id',this.unreadID);sb.append('>');sb.append((this.roomStub.newMessages===0)?'&nbsp;':this.roomStub.newMessages.toString());sb.append('</span>');sb.append('<span class=\"ChatClientRoomSeperatorHolder\"');sb.appendAttribute('id',this.statsSeperatorID);sb.append('>');sb.append((this.roomStub.newMessages>0)?'/':'&nbsp;');sb.append('</span>');sb.append('<span class=\"ChatClientRoomTotalHolder\"');sb.appendAttribute('id',this.totalID);sb.append('>');sb.append((this.roomStub.totalMessages===0)?'&nbsp;':this.roomStub.totalMessages.toString());sb.append('</span>');sb.append('</div>');sb.append('</div>');}}
SpottedScript.Controls.ChatClient.Shared.SendStub=function(){SpottedScript.Controls.ChatClient.Shared.SendStub.initializeBase(this);}
SpottedScript.Controls.ChatClient.Shared.SendStub.prototype={itemGuid:null}
SpottedScript.Controls.ChatClient.Shared.PinStub=function(){SpottedScript.Controls.ChatClient.Shared.PinStub.initializeBase(this);}
SpottedScript.Controls.ChatClient.Shared.PinStub.prototype={roomStub:null}
SpottedScript.Controls.ChatClient.Shared.ItemStub=function(guid,type,dateTime,roomGuid){this.guid=guid;this.type=type;this.dateTime=dateTime;this.roomGuid=roomGuid;}
SpottedScript.Controls.ChatClient.Shared.ItemStub.prototype={guid:null,type:0,dateTime:null,roomGuid:null}
SpottedScript.Controls.ChatClient.Shared.MessageStub=function(guid,type,dateTime,roomGuid,nickName,stmuParams,usrK,pic,chatPic,text,pinRoomGuid){SpottedScript.Controls.ChatClient.Shared.MessageStub.initializeBase(this,[guid,type,dateTime,roomGuid]);this.nickName=nickName;this.stmuParams=stmuParams;this.usrK=usrK;this.pic=pic;this.chatPic=chatPic;this.text=text;this.pinRoomGuid=pinRoomGuid;}
SpottedScript.Controls.ChatClient.Shared.MessageStub.prototype={nickName:null,stmuParams:null,usrK:0,pic:null,chatPic:null,text:null,pinRoomGuid:null}
SpottedScript.Controls.ChatClient.Shared.PhotoStub=function(guid,type,dateTime,roomGuid,width,height,url,web,icon,thumb,thumbWidth,thumbHeight,buddyAlert){SpottedScript.Controls.ChatClient.Shared.PhotoStub.initializeBase(this,[guid,type,dateTime,roomGuid]);this.width=width;this.height=height;this.url=url;this.web=web;this.icon=icon;this.thumb=thumb;this.thumbWidth=thumbWidth;this.thumbHeight=thumbHeight;this.buddyAlert=buddyAlert;}
SpottedScript.Controls.ChatClient.Shared.PhotoStub.prototype={width:0,height:0,url:null,web:null,icon:null,thumb:null,thumbWidth:0,thumbHeight:0,buddyAlert:false}
SpottedScript.Controls.ChatClient.Shared.RefreshStub=function(){}
SpottedScript.Controls.ChatClient.Shared.RefreshStub.prototype={lastItemGuidReturned:null,lastActionTicks:null,itemsJson:null,guestRefreshStubs:null}
SpottedScript.Controls.ChatClient.Shared.RoomStub=function(parentClientID,guid,name,url,pinned,starred,isStarredByDefault,pinable,starrable,selected,guest,newMessages,totalMessages,latestItem,latestItemSeen,latestItemOld,readOnly,listOrder,isPhotoChatRoom,isPrivateChatRoom,isNewPhotoAlertsRoom,presence,icon,tokenDateTimeTicks,token,hasArchive,hiddenFromRoomList,isStreamRoom){this.parentClientID=parentClientID;this.guid=guid;this.name=name;this.url=url;this.pinned=pinned;this.starred=starred;this.isStarredByDefault=isStarredByDefault;this.pinable=pinable;this.starrable=starrable;this.selected=selected;this.guest=guest;this.newMessages=newMessages;this.totalMessages=totalMessages;this.latestItem=latestItem;this.latestItemSeen=latestItemSeen;this.latestItemOld=latestItemOld;this.readOnly=readOnly;this.listOrder=listOrder;this.isPhotoChatRoom=isPhotoChatRoom;this.isPrivateChatRoom=isPrivateChatRoom;this.isNewPhotoAlertsRoom=isNewPhotoAlertsRoom;this.presence=presence;this.icon=icon;this.tokenDateTimeTicks=tokenDateTimeTicks;this.token=token;this.hasArchive=hasArchive;this.hiddenFromRoomList=hiddenFromRoomList;this.isStreamRoom=isStreamRoom;}
SpottedScript.Controls.ChatClient.Shared.RoomStub.prototype={parentClientID:null,guid:null,name:null,url:null,pinned:false,pinable:false,starred:false,starrable:false,isStarredByDefault:false,selected:false,guest:false,newMessages:0,totalMessages:0,latestItem:null,latestItemSeen:null,latestItemOld:null,readOnly:false,listOrder:0,isPhotoChatRoom:false,isPrivateChatRoom:false,isNewPhotoAlertsRoom:false,presence:0,icon:null,tokenDateTimeTicks:null,token:null,hasArchive:false,hiddenFromRoomList:false,isStreamRoom:false}
SpottedScript.Controls.ChatClient.Items.Item.registerClass('SpottedScript.Controls.ChatClient.Items.Item');
SpottedScript.Controls.ChatClient.Items.TopPhoto.registerClass('SpottedScript.Controls.ChatClient.Items.TopPhoto',SpottedScript.Controls.ChatClient.Items.Item);
SpottedScript.Controls.ChatClient.Items.Html.registerClass('SpottedScript.Controls.ChatClient.Items.Html',SpottedScript.Controls.ChatClient.Items.Item);
SpottedScript.Controls.ChatClient.Items.Newable.registerClass('SpottedScript.Controls.ChatClient.Items.Newable',SpottedScript.Controls.ChatClient.Items.Html);
SpottedScript.Controls.ChatClient.Items.Message.registerClass('SpottedScript.Controls.ChatClient.Items.Message',SpottedScript.Controls.ChatClient.Items.Newable,SpottedScript.Controls.ChatClient.Items.IHasPostingUsr);
SpottedScript.Controls.ChatClient.Items.CommentMessage.registerClass('SpottedScript.Controls.ChatClient.Items.CommentMessage',SpottedScript.Controls.ChatClient.Items.Message);
SpottedScript.Controls.ChatClient.Items.Alert.registerClass('SpottedScript.Controls.ChatClient.Items.Alert',SpottedScript.Controls.ChatClient.Items.Newable,SpottedScript.Controls.ChatClient.Items.IHasPostingUsr);
SpottedScript.Controls.ChatClient.Items.Laugh.registerClass('SpottedScript.Controls.ChatClient.Items.Laugh',SpottedScript.Controls.ChatClient.Items.CommentMessage);
SpottedScript.Controls.ChatClient.Items.Logout.registerClass('SpottedScript.Controls.ChatClient.Items.Logout',SpottedScript.Controls.ChatClient.Items.Alert);
SpottedScript.Controls.ChatClient.Items.Login.registerClass('SpottedScript.Controls.ChatClient.Items.Login',SpottedScript.Controls.ChatClient.Items.Alert);
SpottedScript.Controls.ChatClient.Items.Note.registerClass('SpottedScript.Controls.ChatClient.Items.Note',SpottedScript.Controls.ChatClient.Items.Html);
SpottedScript.Controls.ChatClient.Items.Photo.registerClass('SpottedScript.Controls.ChatClient.Items.Photo',SpottedScript.Controls.ChatClient.Items.Newable);
SpottedScript.Controls.ChatClient.Items.Error.registerClass('SpottedScript.Controls.ChatClient.Items.Error',SpottedScript.Controls.ChatClient.Items.Html);
SpottedScript.Controls.ChatClient.Items.Private.registerClass('SpottedScript.Controls.ChatClient.Items.Private',SpottedScript.Controls.ChatClient.Items.Message);
SpottedScript.Controls.ChatClient.PopupArea.registerClass('SpottedScript.Controls.ChatClient.PopupArea');
SpottedScript.Controls.ChatClient.Popup.registerClass('SpottedScript.Controls.ChatClient.Popup');
SpottedScript.Controls.ChatClient.Controller.registerClass('SpottedScript.Controls.ChatClient.Controller');
SpottedScript.Controls.ChatClient.Room.registerClass('SpottedScript.Controls.ChatClient.Room');
SpottedScript.Controls.ChatClient.StarActionEventArgs.registerClass('SpottedScript.Controls.ChatClient.StarActionEventArgs',Sys.EventArgs);
SpottedScript.Controls.ChatClient.PinActionEventArgs.registerClass('SpottedScript.Controls.ChatClient.PinActionEventArgs',Sys.EventArgs);
SpottedScript.Controls.ChatClient.RoomGuidEventArgs.registerClass('SpottedScript.Controls.ChatClient.RoomGuidEventArgs',Sys.EventArgs);
SpottedScript.Controls.ChatClient.ServerClass.registerClass('SpottedScript.Controls.ChatClient.ServerClass');
SpottedScript.Controls.ChatClient.CriticalRequest.registerClass('SpottedScript.Controls.ChatClient.CriticalRequest');
SpottedScript.Controls.ChatClient.StoreUpdatedRoomListOrderRequest.registerClass('SpottedScript.Controls.ChatClient.StoreUpdatedRoomListOrderRequest',SpottedScript.Controls.ChatClient.CriticalRequest);
SpottedScript.Controls.ChatClient.SendMessageRequest.registerClass('SpottedScript.Controls.ChatClient.SendMessageRequest',SpottedScript.Controls.ChatClient.CriticalRequest);
SpottedScript.Controls.ChatClient.MoreInfoRequest.registerClass('SpottedScript.Controls.ChatClient.MoreInfoRequest',SpottedScript.Controls.ChatClient.CriticalRequest);
SpottedScript.Controls.ChatClient.ArchiveItemsRequest.registerClass('SpottedScript.Controls.ChatClient.ArchiveItemsRequest',SpottedScript.Controls.ChatClient.CriticalRequest);
SpottedScript.Controls.ChatClient.DeleteArchiveRequest.registerClass('SpottedScript.Controls.ChatClient.DeleteArchiveRequest',SpottedScript.Controls.ChatClient.CriticalRequest);
SpottedScript.Controls.ChatClient.UnPinRoomRequest.registerClass('SpottedScript.Controls.ChatClient.UnPinRoomRequest',SpottedScript.Controls.ChatClient.CriticalRequest);
SpottedScript.Controls.ChatClient.PinRoomRequest.registerClass('SpottedScript.Controls.ChatClient.PinRoomRequest',SpottedScript.Controls.ChatClient.CriticalRequest);
SpottedScript.Controls.ChatClient.StarRoomRequest.registerClass('SpottedScript.Controls.ChatClient.StarRoomRequest',SpottedScript.Controls.ChatClient.CriticalRequest);
SpottedScript.Controls.ChatClient.SwitchPhotoRoomRequest.registerClass('SpottedScript.Controls.ChatClient.SwitchPhotoRoomRequest',SpottedScript.Controls.ChatClient.CriticalRequest);
SpottedScript.Controls.ChatClient.RePinRoomRequest.registerClass('SpottedScript.Controls.ChatClient.RePinRoomRequest',SpottedScript.Controls.ChatClient.CriticalRequest);
SpottedScript.Controls.ChatClient.ForceResetSessionAndGetState.registerClass('SpottedScript.Controls.ChatClient.ForceResetSessionAndGetState',SpottedScript.Controls.ChatClient.CriticalRequest);
SpottedScript.Controls.ChatClient.GotNoItemsEventArgs.registerClass('SpottedScript.Controls.ChatClient.GotNoItemsEventArgs',Sys.EventArgs);
SpottedScript.Controls.ChatClient.GotMoreInfoEventArgs.registerClass('SpottedScript.Controls.ChatClient.GotMoreInfoEventArgs',Sys.EventArgs);
SpottedScript.Controls.ChatClient.GotArchiveItemsEventArgs.registerClass('SpottedScript.Controls.ChatClient.GotArchiveItemsEventArgs',Sys.EventArgs);
SpottedScript.Controls.ChatClient.GotItemsEventArgs.registerClass('SpottedScript.Controls.ChatClient.GotItemsEventArgs',Sys.EventArgs);
SpottedScript.Controls.ChatClient.GotRoomEventArgs.registerClass('SpottedScript.Controls.ChatClient.GotRoomEventArgs',Sys.EventArgs);
SpottedScript.Controls.ChatClient.GotRoomStateEventArgs.registerClass('SpottedScript.Controls.ChatClient.GotRoomStateEventArgs',Sys.EventArgs);
SpottedScript.Controls.ChatClient.GotExceptionEventArgs.registerClass('SpottedScript.Controls.ChatClient.GotExceptionEventArgs',Sys.EventArgs);
SpottedScript.Controls.ChatClient.DebugPrintEventArgs.registerClass('SpottedScript.Controls.ChatClient.DebugPrintEventArgs',Sys.EventArgs);
SpottedScript.Controls.ChatClient.View.registerClass('SpottedScript.Controls.ChatClient.View');
SpottedScript.Controls.ChatClient.Shared.RefreshStub.registerClass('SpottedScript.Controls.ChatClient.Shared.RefreshStub');
SpottedScript.Controls.ChatClient.Shared.ArchiveStub.registerClass('SpottedScript.Controls.ChatClient.Shared.ArchiveStub',SpottedScript.Controls.ChatClient.Shared.RefreshStub);
SpottedScript.Controls.ChatClient.Shared.DeleteArchiveStub.registerClass('SpottedScript.Controls.ChatClient.Shared.DeleteArchiveStub',SpottedScript.Controls.ChatClient.Shared.RefreshStub);
SpottedScript.Controls.ChatClient.Shared.ItemStub.registerClass('SpottedScript.Controls.ChatClient.Shared.ItemStub');
SpottedScript.Controls.ChatClient.Shared.TopPhotoStub.registerClass('SpottedScript.Controls.ChatClient.Shared.TopPhotoStub',SpottedScript.Controls.ChatClient.Shared.ItemStub);
SpottedScript.Controls.ChatClient.Shared.UnPinStub.registerClass('SpottedScript.Controls.ChatClient.Shared.UnPinStub',SpottedScript.Controls.ChatClient.Shared.RefreshStub);
SpottedScript.Controls.ChatClient.Shared.MessageStub.registerClass('SpottedScript.Controls.ChatClient.Shared.MessageStub',SpottedScript.Controls.ChatClient.Shared.ItemStub);
SpottedScript.Controls.ChatClient.Shared.CommentMessageStub.registerClass('SpottedScript.Controls.ChatClient.Shared.CommentMessageStub',SpottedScript.Controls.ChatClient.Shared.MessageStub);
SpottedScript.Controls.ChatClient.Shared.MoreInfoStub.registerClass('SpottedScript.Controls.ChatClient.Shared.MoreInfoStub',SpottedScript.Controls.ChatClient.Shared.RefreshStub);
SpottedScript.Controls.ChatClient.Shared.AlertStub.registerClass('SpottedScript.Controls.ChatClient.Shared.AlertStub',SpottedScript.Controls.ChatClient.Shared.ItemStub);
SpottedScript.Controls.ChatClient.Shared.LaughStub.registerClass('SpottedScript.Controls.ChatClient.Shared.LaughStub',SpottedScript.Controls.ChatClient.Shared.CommentMessageStub);
SpottedScript.Controls.ChatClient.Shared.GuestRefreshStub.registerClass('SpottedScript.Controls.ChatClient.Shared.GuestRefreshStub');
SpottedScript.Controls.ChatClient.Shared.GetStateStub.registerClass('SpottedScript.Controls.ChatClient.Shared.GetStateStub',SpottedScript.Controls.ChatClient.Shared.RefreshStub);
SpottedScript.Controls.ChatClient.Shared.PrivateStub.registerClass('SpottedScript.Controls.ChatClient.Shared.PrivateStub',SpottedScript.Controls.ChatClient.Shared.MessageStub);
SpottedScript.Controls.ChatClient.Shared.StateStub.registerClass('SpottedScript.Controls.ChatClient.Shared.StateStub');
SpottedScript.Controls.ChatClient.Shared.RoomHtml.registerClass('SpottedScript.Controls.ChatClient.Shared.RoomHtml');
SpottedScript.Controls.ChatClient.Shared.SendStub.registerClass('SpottedScript.Controls.ChatClient.Shared.SendStub',SpottedScript.Controls.ChatClient.Shared.RefreshStub);
SpottedScript.Controls.ChatClient.Shared.PinStub.registerClass('SpottedScript.Controls.ChatClient.Shared.PinStub',SpottedScript.Controls.ChatClient.Shared.RefreshStub);
SpottedScript.Controls.ChatClient.Shared.PhotoStub.registerClass('SpottedScript.Controls.ChatClient.Shared.PhotoStub',SpottedScript.Controls.ChatClient.Shared.ItemStub);
SpottedScript.Controls.ChatClient.Shared.RoomStub.registerClass('SpottedScript.Controls.ChatClient.Shared.RoomStub');
SpottedScript.Controls.ChatClient.PopupArea.popupWidth=250;
SpottedScript.Controls.ChatClient.PopupArea.popupHeight=170;
SpottedScript.Controls.ChatClient.Controller.instance=null;
