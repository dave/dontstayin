Type.registerNamespace('SpottedScript.Controls.EventBox');
SpottedScript.Controls.EventBox.Controller=function(view){this.$E={};this.$F={};Sys.Application.set_enableHistory(true);this.view=view;this.server=new SpottedScript.Controls.EventBox.ServerClass(this);this.server.gotEventPage=Function.createDelegate(this,this.gotEventPage);this.server.gotGenericException=Function.createDelegate(this,this.$14);if(SpottedScript.Misc.get_browserIsIE()){jQuery(document.body).ready(Function.createDelegate(this,this.$1));}else{this.$1();}}
SpottedScript.Controls.EventBox.Controller.prototype={view:null,server:null,initParentObjectType:0,initParentObjectK:0,initMusicTypeK:0,initTabType:0,initPageIndex:0,currentParentObjectType:0,currentParentObjectK:0,currentMusicTypeK:0,currentTabType:0,currentPageIndex:0,clientID:null,enableEffects:false,$0:null,eventInfoHolderOuterJQ:null,eventInfoHolderOuterElement:null,currentlySelectedEvent:null,$1:function(){Sys.Application.add_navigate(Function.createDelegate(this,this.$2));this.clientID=this.view.get_initClientID().value;this.enableEffects=Boolean.parse(this.view.get_initEnableEffects().value);this.eventInfoHolderOuterJQ=jQuery(this.view.get_eventInfoHolderOuter());$addHandler(this.view.get_eventIconsNavigationForwardHolder(),'click',Function.createDelegate(this,this.$4));$addHandler(this.view.get_eventIconsNavigationBackHolder(),'click',Function.createDelegate(this,this.$5));$addHandler(this.view.get_musicDropDownControl().view.get_dropDown(),'change',Function.createDelegate(this,this.$D));$addHandler(this.view.get_pastEventsTab(),'click',Function.createDelegate(this,this.$7));$addHandler(this.view.get_futureEventsTab(),'click',Function.createDelegate(this,this.$8));$addHandler(this.view.get_ticketsTab(),'click',Function.createDelegate(this,this.$9));this.$0={};var $0=(eval(' [ '+this.view.get_initFirstPage().value+' ] '))[0];var $1=new SpottedScript.Controls.EventBox.Shared.EventPageDetails(this,$0,false);$1.set_selected(true);$1.html.initialiseElements(true,false,false,true,true,false,true);for(var $2=0;$2<$1.events.length;$2++){$1.events[$2].changeSelectedState($2===0,false,'');}this.currentlySelectedEvent=$1.events[0];this.$0[$1.getKey()]=$1;this.initParentObjectType=$1.data.parentObjectType;this.initParentObjectK=$1.data.parentObjectK;this.initTabType=$1.data.tabType;this.initMusicTypeK=$1.data.musicTypeK;this.initPageIndex=$1.data.pageIndex;this.currentParentObjectType=this.initParentObjectType;this.currentParentObjectK=this.initParentObjectK;this.currentTabType=this.initTabType;this.currentMusicTypeK=this.initMusicTypeK;this.currentPageIndex=this.initPageIndex;if(SpottedScript.Misc.get_browserIsIE()){Sys.Application.addHistoryPoint({});}},$2:function($p0,$p1){if($p1.get_state()['EventBox_PageKey']!=null&&$p1.get_state()['EventBox_PageKey'].toString().length>0){this.$3($p1.get_state()['EventBox_PageKey'].toString());}else{this.$3(null);}},$3:function($p0){if($p0==null){var $1=new SpottedScript.Controls.EventBox.Shared.EventPageDetails(this,new SpottedScript.Controls.EventBox.Shared.EventPageStub(this.initParentObjectType,this.initParentObjectK,this.initTabType,this.initMusicTypeK,this.initPageIndex,this.initPageIndex,null),false);$p0=$1.getKey();}if(this.get_currentEventPage().getKey()===$p0){return;}this.get_currentEventPage().changeSelectedState(false,false,'');var $0=SpottedScript.Controls.EventBox.Shared.EventPageDetails.getStubFromKey($p0);this.currentParentObjectType=$0.parentObjectType;this.currentParentObjectK=$0.parentObjectK;this.currentMusicTypeK=$0.musicTypeK;this.currentTabType=$0.tabType;this.currentPageIndex=$0.pageIndex;this.get_currentEventPage().changeSelectedState(true,false,'');this.changeEventNow(this.get_currentEventPage().events[0],false,'');this.view.get_musicDropDownControl().view.get_dropDown().value=this.currentMusicTypeK.toString();this.$C();},$4:function($p0){this.$6(true);},$5:function($p0){this.$6(false);},$6:function($p0){var $0=this.currentPageIndex+(($p0)?1:((this.currentPageIndex===0)?0:-1));if(this.currentPageIndex===$0){return;}var $1=($p0)?'right':'left';this.get_currentEventPage().changeSelectedState(false,true,$1);this.currentPageIndex=$0;this.get_currentEventPage().changeSelectedState(true,true,$1);this.changeEventNow(this.get_currentEventPage().events[0],true,$1);var $2={};$2['EventBox_PageKey']=this.get_currentEventPage().getKey();Sys.Application.addHistoryPoint($2,'Event box - page '+($0+1).toString());},$7:function($p0){this.$B(2);},$8:function($p0){this.$B(1);},$9:function($p0){this.$B(3);},$A:function($p0){return ($p0===1)?1:($p0===2)?2:3;},$B:function($p0){if(this.currentTabType===$p0){return;}var $0=this.$A(this.currentTabType);var $1=this.$A($p0);var $2='left';if($0<$1){$2='right';}this.get_currentEventPage().changeSelectedState(false,true,$2);this.currentPageIndex=0;this.currentTabType=$p0;this.get_currentEventPage().changeSelectedState(true,true,$2);this.changeEventNow(this.get_currentEventPage().events[0],true,$2);this.$C();var $3={};$3['EventBox_PageKey']=this.get_currentEventPage().getKey();Sys.Application.addHistoryPoint($3,'Event box - '+((this.currentTabType===1)?'future events':(this.currentTabType===1)?'past events':'tickets'));},$C:function(){this.view.get_futureEventsTab().className=(this.currentTabType===1)?'TabbedHeading Selected':'TabbedHeading';this.view.get_pastEventsTab().className=(this.currentTabType===2)?'TabbedHeading Selected':'TabbedHeading';this.view.get_ticketsTab().className=(this.currentTabType===3)?'TabbedHeading Selected':'TabbedHeading';},$D:function($p0){var $0='up';for(var $2=0;$2<this.view.get_musicDropDownControl().view.get_dropDown().options.length;$2++){var $3=this.view.get_musicDropDownControl().view.get_dropDown().options[$2];if($3.value===this.currentMusicTypeK.toString()){$0='down';break;}if($3.value===this.view.get_musicDropDownControl().view.get_dropDown().value){break;}}this.get_currentEventPage().changeSelectedState(false,true,$0);this.currentPageIndex=0;this.currentMusicTypeK=Number.parseInvariant(this.view.get_musicDropDownControl().view.get_dropDown().value);this.get_currentEventPage().changeSelectedState(true,true,$0);this.changeEventNow(this.get_currentEventPage().events[0],true,$0);var $1={};$1['EventBox_PageKey']=this.get_currentEventPage().getKey();Sys.Application.addHistoryPoint($1,'Event box - '+this.view.get_musicDropDownControl().view.get_dropDown().options[this.view.get_musicDropDownControl().view.get_dropDown().selectedIndex].innerHTML);},performOrQueueAnimationTask:function(task,taskType){if(this.$F[taskType]==null||!this.$F[taskType]){this.$F[taskType]=true;var $0=task[0];$0();}else{if(this.$E[taskType]!=null){var $1=this.$E[taskType];if($1.length===2){var $2=$1[1];$2();}}this.$E[taskType]=task;}},finishedAnimationTask:function(taskType){if(this.$E[taskType]!=null){var $0=this.$E[taskType];this.$F[taskType]=true;var $1=$0[0];$1();this.$E[taskType]=null;}else{this.$F[taskType]=false;}},$10:0,$11:0,eventIconMouseOut:function(e){this.$11++;},eventIconMouseOver:function(e){this.$10++;var $0=this.$10;var $1=this.$11;this.eventIconMouseOverAfterDelay(e,$0,$1);},eventIconMouseOverAfterDelay:function(e,mouseOverID,mouseOutID){if(this.$10!==mouseOverID||this.$11!==mouseOutID){return;}var $0=this.$12(e);if($0.hasData){this.changeEventNow($0,true,null);}},changeEventNow:function(newSelectedEvent,animate,movementDirection){if(newSelectedEvent!=null&&!newSelectedEvent.get_selected()){if(movementDirection==null){movementDirection=(this.currentlySelectedEvent==null)?'right':(newSelectedEvent.positionIndex>this.currentlySelectedEvent.positionIndex)?'right':'left';}if(this.currentlySelectedEvent!=null){this.currentlySelectedEvent.changeSelectedState(false,animate,movementDirection);}if(newSelectedEvent!=null){newSelectedEvent.changeSelectedState(true,animate,movementDirection);}this.currentlySelectedEvent=newSelectedEvent;}},$12:function($p0){try{var $0=$p0.target;while($0!=null){if($0.id.endsWith('_Icon_Image')){var $1=$p0.target.id.split('_');var $2=Number.parseInvariant($1[$1.length-3]);return this.get_currentEventPage().events[$2];}else if($0.parentNode!=null){$0=$0.parentNode;}}return null;}catch($3){return null;}},get_currentEventPage:function(){var $0=new SpottedScript.Controls.EventBox.Shared.EventPageStub(this.currentParentObjectType,this.currentParentObjectK,this.currentTabType,this.currentMusicTypeK,this.currentPageIndex,this.currentPageIndex,null);var $1=SpottedScript.Controls.EventBox.Shared.EventPageDetails.getKeyStatic($0);if(this.$0[$1]==null){this.server.getEventPage($1);}if(this.$0[$1]==null){var $2=new SpottedScript.Controls.EventBox.Shared.EventPageDetails(this,$0,true);$2.requestInProgress=true;$2.html.initialiseElements(true,true,false,true,true,false,true);this.$0[$1]=$2;}return this.$0[$1];},gotEventPage:function(o,e){if(o!=null){var $0=o;var $1=new SpottedScript.Controls.EventBox.Shared.EventPageDetails(this,$0,false);this.$13($1);if($0.requestedPageIndex!==$0.pageIndex){var $2=new SpottedScript.Controls.EventBox.Shared.EventPageStub($0.parentObjectType,$0.parentObjectK,$0.tabType,$0.musicTypeK,$0.requestedPageIndex,$0.requestedPageIndex,null);var $3=new SpottedScript.Controls.EventBox.Shared.EventPageDetails(this,$2,false);this.$13($3);}}},$13:function($p0){var $0=$p0.getKey();if(this.$0[$0]!=null){var $1=this.$0[$0];if($1.hasIncompleteEventData){if($1.get_selected()){$p0.set_selected(true);}var $2=false;for(var $3=0;$3<8;$3++){if($1.events[$3].get_selected()){$p0.events[$3].set_selected(true);this.currentlySelectedEvent=$p0.events[$3];$2=true;}}$p0.html.initialiseElements(true,false,false,true,false,false,true);$p0.html.initialiseElements(false,false,true,true,false,true,true);if($2){if(this.enableEffects){this.performOrQueueAnimationTask([Function.createDelegate(this,function(){
this.currentlySelectedEvent.html.resizeInfoHolderAnimate();})],'ResizeInfoHolderAnimate');}else{this.currentlySelectedEvent.html.resizeInfoHolderImmediate();}}}else{return;}}else{$p0.html.initialiseElements(true,true,false,true,true,false,true);}this.$0[$0]=$p0;},$14:function($p0,$p1){var $0=$p1;}}
SpottedScript.Controls.EventBox.ServerClass=function(controller){this.$0=controller;}
SpottedScript.Controls.EventBox.ServerClass.prototype={$0:null,gotEventPage:null,gotGenericException:null,getEventPage:function(key){Spotted.WebServices.Controls.EventBox.Service.getEventPage(key,Function.createDelegate(this,this.getEventPageSuccessCallback),Function.createDelegate(this,this.getEventPageFailureCallback),'',2000);},getEventPageSuccessCallback:function(page,userContext,methodName){if(page!=null){if(this.gotEventPage!=null){this.gotEventPage(page,null);}}},getEventPageFailureCallback:function(error,userContext,methodName){if(this.gotGenericException!=null){this.gotGenericException(this,new SpottedScript.Controls.EventBox.GotExceptionEventArgs(error,methodName));}}}
SpottedScript.Controls.EventBox.GotExceptionEventArgs=function(error,method){SpottedScript.Controls.EventBox.GotExceptionEventArgs.initializeBase(this);this.error=error;this.method=method;}
SpottedScript.Controls.EventBox.GotExceptionEventArgs.prototype={error:null,method:null}
SpottedScript.Controls.EventBox.View=function(clientId){this.clientId=clientId;}
SpottedScript.Controls.EventBox.View.prototype={clientId:null,get_futureEventsTab:function(){return document.getElementById(this.clientId+'_FutureEventsTab');},get_pastEventsTab:function(){return document.getElementById(this.clientId+'_PastEventsTab');},get_ticketsTab:function(){return document.getElementById(this.clientId+'_TicketsTab');},get_initEnableEffects:function(){return document.getElementById(this.clientId+'_InitEnableEffects');},get_initClientID:function(){return document.getElementById(this.clientId+'_InitClientID');},get_initFirstPage:function(){return document.getElementById(this.clientId+'_InitFirstPage');},get_titleHolder:function(){return document.getElementById(this.clientId+'_TitleHolder');},get_musicDropDownHolder:function(){return document.getElementById(this.clientId+'_MusicDropDownHolder');},get_musicDropDownControl:function(){return eval(this.clientId+'_MusicDropDownControlController');},get_eventIconsHolder:function(){return document.getElementById(this.clientId+'_EventIconsHolder');},get_eventIconsNavigationBackHolder:function(){return document.getElementById(this.clientId+'_EventIconsNavigationBackHolder');},get_eventIconsNavigationForwardHolder:function(){return document.getElementById(this.clientId+'_EventIconsNavigationForwardHolder');},get_eventInfoHolderOuter:function(){return document.getElementById(this.clientId+'_EventInfoHolderOuter');},get_bottomNavigationTitle:function(){return document.getElementById(this.clientId+'_BottomNavigationTitle');},get_bottomNavigationHolder:function(){return document.getElementById(this.clientId+'_BottomNavigationHolder');}}
Type.registerNamespace('SpottedScript.Controls.EventBox.Shared');
SpottedScript.Controls.EventBox.Shared.TabType=function(){};SpottedScript.Controls.EventBox.Shared.TabType.prototype = {future:1,past:2,tickets:3}
SpottedScript.Controls.EventBox.Shared.TabType.registerEnum('SpottedScript.Controls.EventBox.Shared.TabType',false);SpottedScript.Controls.EventBox.Shared.EventDetails=function(positionIndex,page,e,isLoading){this.positionIndex=positionIndex;this.page=page;this.parentClientID=this.page.clientID;this.hasData=e!=null;this.isLoading=isLoading;this.controller=this.page.controller;this.data=e;this.html=new SpottedScript.Controls.EventBox.Shared.EventHtml(this);}
SpottedScript.Controls.EventBox.Shared.EventDetails.prototype={controller:null,page:null,parentClientID:null,data:null,html:null,positionIndex:0,hasData:false,isLoading:false,get_selected:function(){return this.$0;},set_selected:function(value){if(this.$0!==value){this.$0=value;this.html.updateUI();}return value;},$0:false,changeSelectedState:function(state,animate,direction){if(this.$0===state){return;}this.$0=state;this.html.updateIconUI();if(!state){if(direction==='left'){direction='right';}else if(direction==='right'){direction='left';}else if(direction==='up'){direction='down';}else if(direction==='down'){direction='up';}}if(animate&&this.controller.enableEffects){if(state){this.controller.performOrQueueAnimationTask([Function.createDelegate(this,function(){
this.html.showInfoAnimate(direction);})],'ShowInfoAnimate');if(this.hasData){this.controller.performOrQueueAnimationTask([Function.createDelegate(this,function(){
this.html.resizeInfoHolderAnimate();})],'ResizeInfoHolderAnimate');}}else{this.controller.performOrQueueAnimationTask([Function.createDelegate(this,function(){
this.html.hideInfoAnimate(direction);}),Function.createDelegate(this,function(){
this.html.hideInfoImmediate();})],'HideInfoAnimate');}}else{if(state){this.html.showInfoImmediate();this.html.resizeInfoHolderImmediate();}else{this.html.hideInfoImmediate();}}}}
SpottedScript.Controls.EventBox.Shared.EventHtml=function(details){this.$0=details;this.iconKeylineClientID=this.$0.parentClientID+'_Event_'+this.$0.positionIndex+'_Icon_Keyline';this.iconImageClientID=this.$0.parentClientID+'_Event_'+this.$0.positionIndex+'_Icon_Image';this.infoHolderInnerClientID=this.$0.parentClientID+'_Event_'+this.$0.positionIndex+'_Info_Holder';this.infoTextHolderClientID=this.$0.parentClientID+'_Event_'+this.$0.positionIndex+'_Info_TextHolder';}
SpottedScript.Controls.EventBox.Shared.EventHtml.prototype={$0:null,elementsInitialised:false,iconKeylineClientID:null,iconImageClientID:null,infoHolderInnerClientID:null,infoTextHolderClientID:null,appendHtmlIcon:function(sb){sb.append('<div');sb.appendAttribute('class','EventBoxIconHolder');sb.append('>');sb.append('<div');sb.appendAttribute('id',this.iconKeylineClientID);sb.appendAttribute('class',(this.$0.get_selected())?'EventBoxIconKeyline Selected':'EventBoxIconKeyline');sb.append('>&nbsp;');sb.append('</div>');sb.append('<img');sb.appendAttribute('id',this.iconImageClientID);if(this.$0.hasData){sb.appendAttribute('src',SpottedScript.Misc.getPicUrlFromGuid(this.$0.data.eventPicGuid));sb.appendAttribute('class','BorderBlack All EventBoxIconImage');}else{sb.appendAttribute('src','/gfx/1pix.gif');}sb.appendAttribute('width','50');sb.appendAttribute('height','50');sb.append('/>');sb.append('</div>');},toHtmlIcon:function(){var $0=new Spotted.System.Text.StringBuilder();this.appendHtmlIcon($0);return $0.toString();},appendHtmlInfo:function(sb){sb.append('<div');sb.appendAttribute('id',this.infoHolderInnerClientID);sb.appendAttribute('class','EventBoxInfoHolderInner');sb.append('>');this.appendHtmlInfoInner(sb);sb.append('</div>');},appendHtmlInfoInner:function(sb){sb.append('<div');sb.appendAttribute('id',this.infoTextHolderClientID);sb.appendAttribute('class','EventBoxInfoTextHolder');sb.append('>');if(this.$0.hasData){sb.append('<a');sb.appendAttribute('href',this.$0.data.eventUrl);sb.append('>');sb.append('<img');sb.appendAttribute('src',SpottedScript.Misc.getPicUrlFromGuid(this.$0.data.eventPicGuid));sb.appendAttribute('class','BorderBlack All EventBoxInfoImage');sb.appendAttribute('width','100');sb.appendAttribute('height','100');sb.appendAttribute('align','right');sb.append('/>');sb.append('</a>');sb.append('<b>');sb.append('<a');sb.appendAttribute('href',this.$0.data.eventUrl);sb.append('>');sb.append(this.$0.data.eventName);sb.append('</a>');sb.append('</b>');sb.append(' @ ');sb.append('<a');sb.appendAttribute('href',this.$0.data.venueUrl);sb.append('>');sb.append(this.$0.data.venueName);sb.append('</a>');sb.append(' in ');sb.append('<a');sb.appendAttribute('href',this.$0.data.placeUrl);sb.append('>');sb.append(this.$0.data.placeName);sb.append('</a>');sb.append(', ');sb.append(this.$0.data.friendlyDateString);sb.append('.<br />');sb.append(this.$0.data.eventShortDescription);sb.append('<br />');sb.append('(');sb.append(this.$0.data.eventMusicText);sb.append(')');sb.append('<br />');sb.append(this.$0.data.eventMembersAttending.toString());sb.append((this.$0.data.eventMembersAttending===1)?' member':' members');sb.append((this.$0.data.eventInInTheFuture)?' attending':' attended');}else if(this.$0.isLoading){sb.append('<center>Loading details...</center>');}else if(this.$0.page.isEmpty){sb.append('<center>Sorry, no events - <a href=\"/pages/events/edit\">click here to add one</a>.</center>');}sb.append('</div>');},toHtmlInfo:function(){var $0=new Spotted.System.Text.StringBuilder();this.appendHtmlInfo($0);return $0.toString();},toHtmlInfoInner:function(){var $0=new Spotted.System.Text.StringBuilder();this.appendHtmlInfoInner($0);return $0.toString();},hideInfoImmediate:function(){this.infoHolderInnerElement.style.display='none';},hideInfoAnimate:function(direction){var $0={};$0['direction']=direction;$0['easing']='easeOutQuint';this.infoHolderInnerJQ.hide('drop',$0,250,Function.createDelegate(this,function(){
this.$0.controller.finishedAnimationTask('HideInfoAnimate');}));},showInfoImmediate:function(){this.infoHolderInnerElement.style.display='block';},showInfoAnimate:function(direction){this.infoHolderInnerElement.style.display='block';var $0={};$0['direction']=direction;$0['easing']='easeOutQuint';this.infoHolderInnerJQ.show('drop',$0,250,Function.createDelegate(this,function(){
this.resizeInfoHolderImmediate();this.$0.controller.finishedAnimationTask('ShowInfoAnimate');}));},resizeInfoHolderImmediate:function(){this.$0.controller.view.get_eventInfoHolderOuter().style.height=this.getInfoHeight().toString()+'px';},resizeInfoHolderAnimate:function(){var $0={};$0['height']=this.getInfoHeight().toString()+'px';this.$0.controller.eventInfoHolderOuterJQ.animate($0,250,'easeOutQuint',Function.createDelegate(this,function(){
this.$0.controller.finishedAnimationTask('ResizeInfoHolderAnimate');}));},getInfoHeight:function(){var $0=this.infoTextHolderJQ.height();$0=($0>100)?$0:100;return $0;},iconKeylineElement:null,iconImageElement:null,infoHolderInnerElement:null,infoTextHolderElement:null,infoHolderInnerJQ:null,infoTextHolderJQ:null,kill:function(element){if(element==null){return;}while(element.childNodes.length>0){this.kill(element.childNodes[element.childNodes.length-1]);}if(element.parentNode!=null){element.parentNode.removeChild(element);}},initialiseElements:function(initialiseIcon,createInfoHtml,refreshInfoHtml,initialiseInfo){if(initialiseIcon){this.iconKeylineElement=document.getElementById(this.iconKeylineClientID);this.iconImageElement=document.getElementById(this.iconImageClientID);$addHandler(this.iconImageElement,'mouseover',Function.createDelegate(this.$0.controller,this.$0.controller.eventIconMouseOver));$addHandler(this.iconImageElement,'mouseout',Function.createDelegate(this.$0.controller,this.$0.controller.eventIconMouseOut));}if(createInfoHtml){this.infoHolderInnerElement=document.getElementById(this.infoHolderInnerClientID);this.kill(this.infoHolderInnerElement);this.infoHolderInnerElement=document.createElement('div');this.infoHolderInnerElement.innerHTML=this.toHtmlInfo();this.$0.controller.view.get_eventInfoHolderOuter().appendChild(this.infoHolderInnerElement);}if(refreshInfoHtml){this.infoHolderInnerElement=document.getElementById(this.infoHolderInnerClientID);this.infoHolderInnerElement.innerHTML=this.toHtmlInfoInner();}if(initialiseInfo){this.infoHolderInnerElement=document.getElementById(this.infoHolderInnerClientID);this.infoHolderInnerJQ=jQuery(this.infoHolderInnerElement);this.infoTextHolderElement=document.getElementById(this.infoTextHolderClientID);this.infoTextHolderJQ=jQuery(this.infoTextHolderElement);}this.elementsInitialised=true;this.updateUI();},updateUI:function(){if(this.elementsInitialised){this.updateIconUI();this.updateInfoHolderUI();}},updateIconUI:function(){this.iconKeylineElement.className=(this.$0.get_selected()&&!this.$0.page.isEmpty)?'EventBoxIconKeyline Selected':'EventBoxIconKeyline';},updateInfoHolderUI:function(){this.infoHolderInnerElement.style.display=(this.$0.get_selected())?'block':'none';}}
SpottedScript.Controls.EventBox.Shared.EventStub=function(eventK,eventName,eventUrl,venueK,venueName,venueUrl,placeK,placeName,placeUrl,friendlyDateString,eventPicGuid,eventShortDescription,eventMusicText,eventMembersAttending,eventInInTheFuture){this.eventK=eventK;this.eventName=eventName;this.eventUrl=eventUrl;this.venueK=venueK;this.venueName=venueName;this.venueUrl=venueUrl;this.placeK=placeK;this.placeName=placeName;this.placeUrl=placeUrl;this.friendlyDateString=friendlyDateString;this.eventPicGuid=eventPicGuid;this.eventShortDescription=eventShortDescription;this.eventMusicText=eventMusicText;this.eventMembersAttending=eventMembersAttending;this.eventInInTheFuture=eventInInTheFuture;}
SpottedScript.Controls.EventBox.Shared.EventStub.prototype={eventK:0,eventName:null,eventUrl:null,venueK:0,venueName:null,venueUrl:null,placeK:0,placeName:null,placeUrl:null,friendlyDateString:null,eventPicGuid:null,eventShortDescription:null,eventMusicText:null,eventMembersAttending:0,eventInInTheFuture:false}
SpottedScript.Controls.EventBox.Shared.EventPageDetails=function(controller,data,isLoading){this.data=data;this.isLoading=isLoading;this.controller=controller;this.parentClientID=this.controller.clientID;this.clientID=this.parentClientID+'_'+this.getKey();this.events=new Array(8);var $0=false;var $1=false;for(var $2=0;$2<8;$2++){this.events[$2]=new SpottedScript.Controls.EventBox.Shared.EventDetails($2,this,(this.data.events!=null&&this.data.events.length>$2&&this.data.events[$2]!=null)?this.data.events[$2]:null,isLoading);if(this.data.events==null||this.data.events.length<=$2||this.data.events[$2]==null){$1=true;}else{$0=true;}}this.hasIncompleteEventData=$1;this.isEmpty=!$0;this.html=new SpottedScript.Controls.EventBox.Shared.EventPageHtml(this);}
SpottedScript.Controls.EventBox.Shared.EventPageDetails.getKeyStatic=function(data){return (data.parentObjectType).toString()+'_'+data.parentObjectK.toString()+'_'+(data.tabType).toString()+'_'+data.musicTypeK.toString()+'_'+data.pageIndex.toString();}
SpottedScript.Controls.EventBox.Shared.EventPageDetails.getStubFromKey=function(key){var $0=key.split('_');return new SpottedScript.Controls.EventBox.Shared.EventPageStub(Number.parseInvariant($0[0]),Number.parseInvariant($0[1]),Number.parseInvariant($0[2]),Number.parseInvariant($0[3]),Number.parseInvariant($0[4]),Number.parseInvariant($0[4]),null);}
SpottedScript.Controls.EventBox.Shared.EventPageDetails.prototype={events:null,controller:null,parentClientID:null,clientID:null,data:null,html:null,requestInProgress:false,hasIncompleteEventData:false,isLoading:false,isEmpty:false,get_selected:function(){return this.$0;},set_selected:function(value){if(this.$0!==value){this.$0=value;this.html.updateUI();}return value;},$0:false,getKey:function(){return SpottedScript.Controls.EventBox.Shared.EventPageDetails.getKeyStatic(this.data);},changeSelectedState:function(state,animate,direction){if(this.$0===state){return;}this.$0=state;if(!state){if(direction==='left'){direction='right';}else if(direction==='right'){direction='left';}else if(direction==='up'){direction='down';}else if(direction==='down'){direction='up';}}if(animate&&this.controller.enableEffects){if(state){this.controller.performOrQueueAnimationTask([Function.createDelegate(this,function(){
this.html.showAnimate(direction);})],'EventPage_ShowAnimate');}else{this.controller.performOrQueueAnimationTask([Function.createDelegate(this,function(){
this.html.hideAnimate(direction);}),Function.createDelegate(this,function(){
this.html.hideImmediate();})],'EventPage_HideAnimate');}}else{if(state){this.html.showImmediate();}else{this.html.hideImmediate();}}},getEventsIconsHtml:function(){var $0=new Spotted.System.Text.StringBuilder();for(var $1=0;$1<8;$1++){this.events[$1].html.appendHtmlIcon($0);}return $0.toString();}}
SpottedScript.Controls.EventBox.Shared.EventPageHtml=function(details){this.$0=details;this.holderClientID=this.$0.parentClientID+'_EventPage_'+this.$0.getKey()+'_Holder';}
SpottedScript.Controls.EventBox.Shared.EventPageHtml.prototype={$0:null,elementsInitialised:false,holderClientID:null,appendHtml:function(sb){sb.append('<div');sb.appendAttribute('id',this.holderClientID);sb.appendAttribute('class',(this.$0.get_selected())?'EventBoxPageHolder Selected':'EventBoxPageHolder');sb.append('>');this.appendHtmlInner(sb);sb.append('</div>');},appendHtmlInner:function(sb){for(var $0=0;$0<8;$0++){this.$0.events[$0].html.appendHtmlIcon(sb);}},toHtml:function(){var $0=new Spotted.System.Text.StringBuilder();this.appendHtml($0);return $0.toString();},toHtmlInner:function(){var $0=new Spotted.System.Text.StringBuilder();this.appendHtmlInner($0);return $0.toString();},hideImmediate:function(){this.holderElement.style.display='none';},hideAnimate:function(direction){var $0={};$0['direction']=direction;$0['easing']='easeOutQuint';this.holderJQ.hide('drop',$0,500,Function.createDelegate(this,function(){
this.$0.controller.finishedAnimationTask('EventPage_HideAnimate');}));},showImmediate:function(){this.holderElement.style.display='block';},showAnimate:function(direction){this.holderElement.style.display='block';var $0={};$0['direction']=direction;$0['easing']='easeOutQuint';this.holderJQ.show('drop',$0,500,Function.createDelegate(this,function(){
this.$0.controller.finishedAnimationTask('EventPage_ShowAnimate');}));},holderElement:null,holderJQ:null,initialiseElements:function(initialiseHolder,createIconsHtml,refreshIconsHtml,initialiseIcons,createInfoHtml,refreshInfoHtml,initialiseInfo){if(createIconsHtml){var $0=document.createElement('div');$0.innerHTML=this.toHtml();this.$0.controller.view.get_eventIconsHolder().appendChild($0);}if(initialiseHolder){this.holderElement=document.getElementById(this.holderClientID);this.holderJQ=jQuery(this.holderElement);}if(refreshIconsHtml){this.holderElement.innerHTML=this.$0.getEventsIconsHtml();}if(initialiseIcons||createInfoHtml||refreshInfoHtml||initialiseInfo){for(var $1=0;$1<8;$1++){this.$0.events[$1].html.initialiseElements(initialiseIcons,createInfoHtml,refreshInfoHtml,initialiseInfo);}}this.elementsInitialised=true;this.updateUI();},updateUI:function(){if(this.elementsInitialised){this.updateHolderUI();}},updateHolderUI:function(){this.holderElement.className=(this.$0.get_selected())?'EventBoxPageHolder Selected':'EventBoxPageHolder';}}
SpottedScript.Controls.EventBox.Shared.EventPageStub=function(parentObjectType,parentObjectK,tabType,musicTypeK,pageIndex,requestedPageIndex,events){this.parentObjectType=parentObjectType;this.parentObjectK=parentObjectK;this.tabType=tabType;this.musicTypeK=musicTypeK;this.pageIndex=pageIndex;this.requestedPageIndex=requestedPageIndex;this.events=events;}
SpottedScript.Controls.EventBox.Shared.EventPageStub.prototype={parentObjectType:0,parentObjectK:0,tabType:0,musicTypeK:0,pageIndex:0,requestedPageIndex:0,events:null}
SpottedScript.Controls.EventBox.Controller.registerClass('SpottedScript.Controls.EventBox.Controller');
SpottedScript.Controls.EventBox.ServerClass.registerClass('SpottedScript.Controls.EventBox.ServerClass');
SpottedScript.Controls.EventBox.GotExceptionEventArgs.registerClass('SpottedScript.Controls.EventBox.GotExceptionEventArgs',Sys.EventArgs);
SpottedScript.Controls.EventBox.View.registerClass('SpottedScript.Controls.EventBox.View');
SpottedScript.Controls.EventBox.Shared.EventDetails.registerClass('SpottedScript.Controls.EventBox.Shared.EventDetails');
SpottedScript.Controls.EventBox.Shared.EventHtml.registerClass('SpottedScript.Controls.EventBox.Shared.EventHtml');
SpottedScript.Controls.EventBox.Shared.EventStub.registerClass('SpottedScript.Controls.EventBox.Shared.EventStub');
SpottedScript.Controls.EventBox.Shared.EventPageDetails.registerClass('SpottedScript.Controls.EventBox.Shared.EventPageDetails');
SpottedScript.Controls.EventBox.Shared.EventPageHtml.registerClass('SpottedScript.Controls.EventBox.Shared.EventPageHtml');
SpottedScript.Controls.EventBox.Shared.EventPageStub.registerClass('SpottedScript.Controls.EventBox.Shared.EventPageStub');
