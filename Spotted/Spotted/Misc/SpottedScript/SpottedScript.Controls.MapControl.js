Type.registerNamespace('SpottedScript.Controls.MapControl');
SpottedScript.Controls.MapControl.Controller=function(view){this.$1={};this.$0=view;this.gmap2=new GMap2(view.get_map());this.gmap2.addControl(new GLargeMapControl());var $0=parseFloat(view.get_uiNorth().value);var $1=parseFloat(view.get_uiSouth().value);var $2=parseFloat(view.get_uiWest().value);var $3=parseFloat(view.get_uiEast().value);var $4=$0-$1;var $5=$3-$2;var $6=new GLatLng($0+$4/20,$3+$5/20,true);var $7=new GLatLng($1-$4/20,$2-$5/20,true);var $8=new GLatLngBounds($7,$6);$8.extend($7);$8.extend($6);var $9=this.gmap2.getBoundsZoomLevel($8);if($9>12){$9=12;}var $A=new GLatLng(($0+$1)/2,($3+$2)/2,true);this.gmap2.enableScrollWheelZoom();this.gmap2.setCenter($A,$9);this.gmap2.enableContinuousZoom();this.gmap2.enableDoubleClickZoom();this.gmap2.enableGoogleBar();this.gmap2.checkResize();}
SpottedScript.Controls.MapControl.Controller.prototype={$0:null,gmap2:null,addMapMarkers:function(items){if(items!=null){for(var $0=0;$0<items.length;$0++){var $1=this.$2(items[$0].lat,items[$0].lon);var $2=document.createElement('LI');$2.innerHTML=items[$0].hoverText;$1.$1.appendChild($2);}}},clearMarkers:function(){var $dict1=this.$1;for(var $key2 in $dict1){var $0={key:$key2,value:$dict1[$key2]};var $1=$0.value;$1.$2();}this.gmap2.clearOverlays();this.$1={};},$2:function($p0,$p1){var $0=$p0.toString()+','+$p1.toString();if(this.$1[$0]==null){var $1=new GMarker(new GLatLng($p0,$p1,true));this.gmap2.addOverlay($1);var $2=new SpottedScript.Controls.MapControl._Marker($1);this.$1[$0]=$2;return $2;}else{return this.$1[$0];}}}
SpottedScript.Controls.MapControl._Marker=function(gMarker){this.$0=gMarker;this.$1=document.createElement('UL');GEvent.addListener(gMarker,'mouseout',Function.createDelegate(this,function(){
try{htm();;}catch($1_0){}}));GEvent.addListener(gMarker,'click',Function.createDelegate(this,function(){
}));GEvent.addListener(gMarker,'mouseover',Function.createDelegate(this,function(){
stt(this.$1.innerHTML);;}));GEvent.addListener(gMarker,'mouseout',Function.createDelegate(this,function(){
try{htm();;}catch($1_0){}}));}
SpottedScript.Controls.MapControl._Marker.prototype={$0:null,$1:null,$2:function(){GEvent.clearListeners(this.$0,'click');GEvent.clearListeners(this.$0,'onmouseover');GEvent.clearListeners(this.$0,'onmouseout');}}
SpottedScript.Controls.MapControl.View=function(clientId){this.clientId=clientId;}
SpottedScript.Controls.MapControl.View.prototype={clientId:null,get_map:function(){return document.getElementById(this.clientId+'_map');},get_uiNorth:function(){return document.getElementById(this.clientId+'_uiNorth');},get_uiSouth:function(){return document.getElementById(this.clientId+'_uiSouth');},get_uiEast:function(){return document.getElementById(this.clientId+'_uiEast');},get_uiWest:function(){return document.getElementById(this.clientId+'_uiWest');}}
SpottedScript.Controls.MapControl.Controller.registerClass('SpottedScript.Controls.MapControl.Controller');
SpottedScript.Controls.MapControl._Marker.registerClass('SpottedScript.Controls.MapControl._Marker');
SpottedScript.Controls.MapControl.View.registerClass('SpottedScript.Controls.MapControl.View');
